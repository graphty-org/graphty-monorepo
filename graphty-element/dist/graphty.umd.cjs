(function(ye,P){typeof exports=="object"&&typeof module<"u"?P(exports,require("@babylonjs/core")):typeof define=="function"&&define.amd?define(["exports","@babylonjs/core"],P):(ye=typeof globalThis<"u"?globalThis:ye||self,P(ye.Graphty={},ye.BABYLON))})(this,function(ye,P){"use strict";var Pf=Object.defineProperty;var Af=(ye,P,at)=>P in ye?Pf(ye,P,{enumerable:!0,configurable:!0,writable:!0,value:at}):ye[P]=at;var L=(ye,P,at)=>(Af(ye,typeof P!="symbol"?P+"":P,at),at);let st=class oe{constructor(t,n,r={}){L(this,"parentGraph");L(this,"id");L(this,"metadata");L(this,"mesh");L(this,"label");L(this,"meshDragBehavior");L(this,"dragging",!1);L(this,"nodeMeshConfig");L(this,"pinOnDrag");if(this.parentGraph=t,this.id=n,this.metadata=r.metadata??{},this.nodeMeshConfig=this.parentGraph.config.style.node,this.parentGraph.graphEngine.addNode(this),this.mesh=this.nodeMeshConfig.nodeMeshFactory(this,this.parentGraph,this.nodeMeshConfig),this.mesh.isPickable=!0,this.mesh.metadata={parentNode:this},this.nodeMeshConfig.label&&(this.label=oe.createLabel(this.id.toString(),this,this.parentGraph),this.label.parent=this.mesh,this.label.position.y+=1),this.pinOnDrag=r.pinOnDrag??!0,this.meshDragBehavior=new P.SixDofDragBehavior,this.mesh.addBehavior(this.meshDragBehavior),this.meshDragBehavior.onDragStartObservable.add(()=>{this.parentGraph.running=!0,this.dragging=!0}),this.meshDragBehavior.onDragEndObservable.add(()=>{this.parentGraph.running=!0,this.pinOnDrag&&this.pin(),this.dragging=!1}),this.meshDragBehavior.onPositionChangedObservable.add(i=>{this.parentGraph.running=!0,this.parentGraph.graphEngine.setNodePosition(this,i.position)}),this.mesh.actionManager=this.mesh.actionManager??new P.ActionManager(this.parentGraph.scene),this.parentGraph.fetchNodes&&this.parentGraph.fetchEdges){const{fetchNodes:i,fetchEdges:o}=this.parentGraph;this.mesh.actionManager.registerAction(new P.ExecuteCodeAction({trigger:P.ActionManager.OnDoublePickTrigger},()=>{this.parentGraph.running=!0;const a=o(this,this.parentGraph),u=new Set;a.forEach(h=>{u.add(h.src),u.add(h.dst)}),u.delete(this.id),i(u,this.parentGraph).forEach(h=>this.parentGraph.addNode(h.id,h.metadata)),a.forEach(h=>this.parentGraph.addEdge(h.src,h.dst,h.metadata))}))}}update(){if(this.dragging)return;this.parentGraph.nodeObservable.notifyObservers({type:"node-update-before",node:this});const t=this.parentGraph.graphEngine.getNodePosition(this);this.mesh.position.x=t.x,this.mesh.position.y=t.y,t.z&&(this.mesh.position.z=t.z),this.parentGraph.nodeObservable.notifyObservers({type:"node-update-after",node:this})}pin(){this.parentGraph.graphEngine.pin(this)}unpin(){this.parentGraph.graphEngine.unpin(this)}static get list(){return bo}static create(t,n,r={}){const i=oe.list.get(n);if(i)return i;const o=new oe(t,n,r);return oe.list.set(n,o),o}static defaultNodeMeshFactory(t,n,r){return n.meshCache.get("default-mesh",()=>{let i;switch(r.shape){case"box":i=oe.createBox(t,n,r);break;case"sphere":i=oe.createSphere(t,n,r);break;case"cylinder":i=oe.createCylinder(t,n,r);break;case"cone":i=oe.createCone(t,n,r);break;case"capsule":i=oe.createCapsule(t,n,r);break;case"torus-knot":i=oe.createTorusKnot(t,n,r);break;case"tetrahedron":i=oe.createPolyhedron(0,t,n,r);break;case"octahedron":i=oe.createPolyhedron(1,t,n,r);break;case"dodecahedron":i=oe.createPolyhedron(2,t,n,r);break;case"icosahedron":i=oe.createPolyhedron(3,t,n,r);break;case"rhombicuboctahedron":i=oe.createPolyhedron(4,t,n,r);break;case"triangular_prism":i=oe.createPolyhedron(5,t,n,r);break;case"pentagonal_prism":i=oe.createPolyhedron(6,t,n,r);break;case"hexagonal_prism":i=oe.createPolyhedron(7,t,n,r);break;case"square_pyramid":i=oe.createPolyhedron(8,t,n,r);break;case"pentagonal_pyramid":i=oe.createPolyhedron(9,t,n,r);break;case"triangular_dipyramid":i=oe.createPolyhedron(10,t,n,r);break;case"pentagonal_dipyramid":i=oe.createPolyhedron(11,t,n,r);break;case"elongated_square_dypyramid":i=oe.createPolyhedron(12,t,n,r);break;case"elongated_pentagonal_dipyramid":i=oe.createPolyhedron(13,t,n,r);break;case"elongated_pentagonal_cupola":i=oe.createPolyhedron(14,t,n,r);break;case"goldberg":i=oe.createGoldberg(t,n,r);break;case"icosphere":i=oe.createIcoSphere(t,n,r);break;case"geodesic":i=oe.createGeodesic(t,n,r);break;default:throw new TypeError(`unknown shape: ${r.shape}`)}const o=new P.StandardMaterial("defaultMaterial"),a=P.Color4.FromHexString(r.color);return o.diffuseColor=new P.Color3(a.r,a.g,a.b),o.wireframe=r.wireframe,o.freeze(),i.visibility=a.a,i.visibility=1,i.material=o,i})}static createBox(t,n,r){return P.MeshBuilder.CreateBox("box",{size:r.size})}static createSphere(t,n,r){return P.MeshBuilder.CreateSphere("sphere",{diameter:r.size})}static createCylinder(t,n,r){return P.MeshBuilder.CreateCylinder("cylinder",{height:r.size*1.618,diameter:r.size})}static createCone(t,n,r){return P.MeshBuilder.CreateCylinder("cylinder",{height:r.size*1.618,diameterTop:0,diameterBottom:r.size})}static createCapsule(t,n,r){return P.MeshBuilder.CreateCapsule("capsule",{})}static createTorus(t,n,r){return P.MeshBuilder.CreateTorus("torus",{})}static createTorusKnot(t,n,r){return P.MeshBuilder.CreateTorusKnot("tk",{radius:r.size*.3,tube:r.size*.2,radialSegments:128})}static createPolyhedron(t,n,r,i){return P.MeshBuilder.CreatePolyhedron("polyhedron",{size:i.size,type:t})}static createGoldberg(t,n,r){return P.MeshBuilder.CreateGoldberg("goldberg",{size:r.size})}static createIcoSphere(t,n,r){return P.MeshBuilder.CreateIcoSphere("icosphere",{radius:r.size*.75})}static createGeodesic(t,n,r){return P.MeshBuilder.CreateGeodesic("geodesic",{size:r.size})}static createLabel(t,n,r){const o="48px Verdana",s=.006944444444444444,d=new P.DynamicTexture("DynamicTexture",64,r.scene).getContext();d.font=o;const p=d.measureText(t).width+8,y=p*s,w=new P.DynamicTexture("DynamicTexture",{width:p,height:72},r.scene,!1),m=new P.StandardMaterial("mat",r.scene);m.specularColor=P.Color3.Black(),w.hasAlpha=!0;const E=w.getContext();E.fillStyle="white",E.beginPath();const k=0,_=0,N=[20,20,20,20],M=p,z=72;E.moveTo(k+N[0],_),E.lineTo(k+M-N[1],_),E.arc(k+M-N[1],_+N[1],N[1],3*Math.PI/2,Math.PI*2),E.lineTo(k+M,_+z-N[2]),E.arc(k+M-N[2],_+z-N[2],N[2],0,Math.PI/2),E.lineTo(k+N[3],_+z),E.arc(k+N[3],_+z-N[3],N[3],Math.PI/2,Math.PI),E.lineTo(k,_+N[0]),E.arc(k+N[0],_+N[0],N[0],Math.PI,3*Math.PI/2),E.closePath(),E.fill(),w.drawText(t,null,null,o,"#000000","transparent",!0),m.opacityTexture=w,m.emissiveTexture=w,m.disableLighting=!0;const T=P.MeshBuilder.CreatePlane("plane",{width:y,height:.5},r.scene);return T.material=m,T.billboardMode=7,T}};const bo=new Map;class Ce{constructor(t,n,r,i={}){L(this,"parentGraph");L(this,"srcId");L(this,"dstId");L(this,"dstNode");L(this,"srcNode");L(this,"metadata");L(this,"mesh");L(this,"arrowMesh",null);L(this,"edgeStyleConfig");L(this,"ray");this.parentGraph=t,this.srcId=n,this.dstId=r,this.metadata=i.metadata??{};const o=st.list.get(n);if(!o)throw new Error(`Attempting to create edge '${n}->${r}', Node '${n}' hasn't been created yet.`);const a=st.list.get(r);if(!a)throw new Error(`Attempting to create edge '${n}->${r}', Node '${r}' hasn't been created yet.`);this.srcNode=o,this.dstNode=a,this.ray=new P.Ray(this.srcNode.mesh.position,this.dstNode.mesh.position),this.edgeStyleConfig=this.parentGraph.config.style.edge,this.parentGraph.graphEngine.addEdge(this),this.mesh=this.edgeStyleConfig.edgeMeshFactory(this,this.parentGraph,this.edgeStyleConfig),this.mesh.isPickable=!1,this.mesh.metadata={},this.mesh.metadata.parentEdge=this}update(){const t=this.parentGraph.graphEngine.getEdgePosition(this);this.parentGraph.edgeObservable.notifyObservers({type:"edge-update-before",edge:this});const{srcPoint:n,dstPoint:r}=this.transformArrowCap();n&&r?this.transformEdgeMesh(n,r):this.transformEdgeMesh(new P.Vector3(t.src.x,t.src.y,t.src.z),new P.Vector3(t.dst.x,t.dst.y,t.dst.z)),this.parentGraph.edgeObservable.notifyObservers({type:"edge-update-after",edge:this})}static updateRays(t){if(t.config.style.edge.arrowCap){for(const n of t.graphEngine.edges){const r=n.srcNode.mesh,i=n.dstNode.mesh;n.ray.position=i.position,n.ray.direction=i.position.subtract(r.position)}t.scene.render()}}static get list(){return ko}static create(t,n,r,i={}){const o=Ce.list.get(n,r);if(o)return o;const a=new Ce(t,n,r,i);return Ce.list.set(n,r,a),a}static defaultEdgeMeshFactory(t,n,r){return r.arrowCap&&(t.arrowMesh=n.meshCache.get("default-arrow-cap",()=>{const i=wo(r.width),o=pr(r.width),a=P.GreasedLineTools.GetArrowCap(new P.Vector3(0,0,-o),new P.Vector3(0,0,1),o,i,i);return P.CreateGreasedLine("lines",{points:a.points,widths:a.widths,widthDistribution:P.GreasedLineMeshWidthDistribution.WIDTH_DISTRIBUTION_START},{color:P.Color3.FromHexString(r.color.slice(0,7))})})),n.meshCache.get("default-edge",()=>{switch(r.type){case"plain":return Ce.createPlainLine(t,n,r);case"moving":return Ce.createMovingLine(t,n,r);default:throw new TypeError(`Unknown Edge type: '${r.type}'`)}})}static createPlainLine(t,n,r){return P.CreateGreasedLine("edge-plain",{points:Ce.unitVectorPoints},{color:P.Color3.FromHexString(r.color.slice(0,7)),width:r.width})}static createMovingLine(t,n,r){const i=P.Color3.FromHexString(r.movingLineOpts.baseColor.slice(0,7)),o=P.Color3.FromHexString(r.color.slice(0,7)),a=Math.floor(i.r*255),u=Math.floor(i.g*255),s=Math.floor(i.b*255),h=Math.floor(o.r*255),d=Math.floor(o.g*255),p=Math.floor(o.b*255),y=new Uint8Array([a,u,s,h,d,p]),w=new P.RawTexture(y,y.length/3,1,P.Engine.TEXTUREFORMAT_RGB,n.scene,!1,!0,P.Engine.TEXTURE_NEAREST_NEAREST);w.wrapU=P.RawTexture.WRAP_ADDRESSMODE,w.name="moving-texture";const m=P.CreateGreasedLine("edge-moving",{points:Ce.unitVectorPoints},{width:r.width,colorMode:P.GreasedLineMeshColorMode.COLOR_MODE_MULTIPLY}),E=m.material;return E.emissiveTexture=w,E.disableLighting=!0,w.uScale=5,n.scene.onBeforeRenderObservable.add(()=>{w.uOffset-=.04*n.scene.getAnimationRatio()}),m}transformEdgeMesh(t,n){const r=n.subtract(t),i=new P.Vector3(t.x+r.x/2,t.y+r.y/2,t.z+r.z/2),o=r.length();this.mesh.position=i,this.mesh.lookAt(n),this.mesh.scaling.z=o}transformArrowCap(){if(this.arrowMesh){this.parentGraph.stats.arrowCapUpdate.beginMonitoring();const{srcPoint:t,dstPoint:n,newEndPoint:r}=this.getInterceptPoints();if(!t||!n||!r)throw new Error("Internal Error: mesh intercept points not found");return this.arrowMesh.position=n,this.arrowMesh.lookAt(this.dstNode.mesh.position),this.parentGraph.stats.arrowCapUpdate.endMonitoring(),{srcPoint:t,dstPoint:r}}return{srcPoint:null,dstPoint:null}}getInterceptPoints(){const t=this.srcNode.mesh,n=this.dstNode.mesh;this.parentGraph.stats.intersectCalc.beginMonitoring();const r=this.ray.intersectsMeshes([n]),i=this.ray.intersectsMeshes([t]);this.parentGraph.stats.intersectCalc.endMonitoring();let o=null,a=null,u=null;if(r.length&&i.length){const s=pr(this.edgeStyleConfig.width);a=r[0].pickedPoint,o=i[0].pickedPoint;const h=o.subtract(a).length(),d=h-s,{x:p,y,z:w}=o,{x:m,y:E,z:k}=a,_=p+d/h*(m-p),N=y+d/h*(E-y),M=w+d/h*(k-w);u=new P.Vector3(_,N,M)}return{srcPoint:o,dstPoint:a,newEndPoint:u}}static get unitVectorPoints(){return[0,0,-.5,0,0,.5]}}function wo(e){return Math.max(20*e,4)}function pr(e){return Math.max(e,.5)}class xo{constructor(){L(this,"map",new Map)}has(t,n){const r=this.map.get(t);return r?r.has(n):!1}set(t,n,r){let i=this.map.get(t);if(i||(i=new Map,this.map.set(t,i)),i.has(n))throw new Error("Attempting to create duplicate Edge");i.set(n,r)}get(t,n){const r=this.map.get(t);if(r)return r.get(n)}get size(){let t=0;for(const n of this.map.values())t+=n.size;return t}}const ko=new xo,je={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},gr=Object.create(null);for(const e in je)Object.hasOwn(je,e)&&(gr[je[e]]=e);const Me={to:{},get:{}};Me.get=function(e){const t=e.slice(0,3).toLowerCase();let n,r;switch(t){case"hsl":{n=Me.get.hsl(e),r="hsl";break}case"hwb":{n=Me.get.hwb(e),r="hwb";break}default:{n=Me.get.rgb(e),r="rgb";break}}return n?{model:r,value:n}:null},Me.get.rgb=function(e){if(!e)return null;const t=/^#([a-f\d]{3,4})$/i,n=/^#([a-f\d]{6})([a-f\d]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,o=/^(\w+)$/;let a=[0,0,0,1],u,s,h;if(u=e.match(n)){for(h=u[2],u=u[1],s=0;s<3;s++){const d=s*2;a[s]=Number.parseInt(u.slice(d,d+2),16)}h&&(a[3]=Number.parseInt(h,16)/255)}else if(u=e.match(t)){for(u=u[1],h=u[3],s=0;s<3;s++)a[s]=Number.parseInt(u[s]+u[s],16);h&&(a[3]=Number.parseInt(h+h,16)/255)}else if(u=e.match(r)){for(s=0;s<3;s++)a[s]=Number.parseInt(u[s+1],10);u[4]&&(a[3]=u[5]?Number.parseFloat(u[4])*.01:Number.parseFloat(u[4]))}else if(u=e.match(i)){for(s=0;s<3;s++)a[s]=Math.round(Number.parseFloat(u[s+1])*2.55);u[4]&&(a[3]=u[5]?Number.parseFloat(u[4])*.01:Number.parseFloat(u[4]))}else return(u=e.match(o))?u[1]==="transparent"?[0,0,0,0]:Object.hasOwn(je,u[1])?(a=je[u[1]],a[3]=1,a):null:null;for(s=0;s<3;s++)a[s]=Ke(a[s],0,255);return a[3]=Ke(a[3],0,1),a},Me.get.hsl=function(e){if(!e)return null;const t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){const r=Number.parseFloat(n[4]),i=(Number.parseFloat(n[1])%360+360)%360,o=Ke(Number.parseFloat(n[2]),0,100),a=Ke(Number.parseFloat(n[3]),0,100),u=Ke(Number.isNaN(r)?1:r,0,1);return[i,o,a,u]}return null},Me.get.hwb=function(e){if(!e)return null;const t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){const r=Number.parseFloat(n[4]),i=(Number.parseFloat(n[1])%360+360)%360,o=Ke(Number.parseFloat(n[2]),0,100),a=Ke(Number.parseFloat(n[3]),0,100),u=Ke(Number.isNaN(r)?1:r,0,1);return[i,o,a,u]}return null},Me.to.hex=function(...e){return"#"+Rt(e[0])+Rt(e[1])+Rt(e[2])+(e[3]<1?Rt(Math.round(e[3]*255)):"")},Me.to.rgb=function(...e){return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},Me.to.rgb.percent=function(...e){const t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"},Me.to.hsl=function(...e){return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},Me.to.hwb=function(...e){let t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},Me.to.keyword=function(...e){return gr[e.slice(0,3)]};function Ke(e,t,n){return Math.min(Math.max(t,e),n)}function Rt(e){const t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}const vr={};for(const e of Object.keys(je))vr[je[e]]=e;const A={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},De=(6/29)**3;function ut(e){const t=e>.0031308?1.055*e**.4166666666666667-.055:e*12.92;return Math.min(Math.max(0,t),1)}function ct(e){return e>.04045?((e+.055)/1.055)**2.4:e/12.92}for(const e of Object.keys(A)){if(!("channels"in A[e]))throw new Error("missing channels property: "+e);if(!("labels"in A[e]))throw new Error("missing channel labels property: "+e);if(A[e].labels.length!==A[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=A[e];delete A[e].channels,delete A[e].labels,Object.defineProperty(A[e],"channels",{value:t}),Object.defineProperty(A[e],"labels",{value:n})}A.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=o-i;let u,s;switch(o){case i:{u=0;break}case t:{u=(n-r)/a;break}case n:{u=2+(r-t)/a;break}case r:{u=4+(t-n)/a;break}}u=Math.min(u*60,360),u<0&&(u+=360);const h=(i+o)/2;return o===i?s=0:h<=.5?s=a/(o+i):s=a/(2-o-i),[u,s*100,h*100]},A.rgb.hsv=function(e){let t,n,r,i,o;const a=e[0]/255,u=e[1]/255,s=e[2]/255,h=Math.max(a,u,s),d=h-Math.min(a,u,s),p=function(y){return(h-y)/6/d+1/2};if(d===0)i=0,o=0;else{switch(o=d/h,t=p(a),n=p(u),r=p(s),h){case a:{i=r-n;break}case u:{i=1/3+t-r;break}case s:{i=2/3+n-t;break}}i<0?i+=1:i>1&&(i-=1)}return[i*360,o*100,h*100]},A.rgb.hwb=function(e){const t=e[0],n=e[1];let r=e[2];const i=A.rgb.hsl(e)[0],o=1/255*Math.min(t,Math.min(n,r));return r=1-1/255*Math.max(t,Math.max(n,r)),[i,o*100,r*100]},A.rgb.oklab=function(e){const t=ct(e[0]/255),n=ct(e[1]/255),r=ct(e[2]/255),i=Math.cbrt(.4122214708*t+.5363325363*n+.0514459929*r),o=Math.cbrt(.2119034982*t+.6806995451*n+.1073969566*r),a=Math.cbrt(.0883024619*t+.2817188376*n+.6299787005*r),u=.2104542553*i+.793617785*o-.0040720468*a,s=1.9779984951*i-2.428592205*o+.4505937099*a,h=.0259040371*i+.7827717662*o-.808675766*a;return[u*100,s*100,h*100]},A.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(1-t,1-n,1-r),o=(1-t-i)/(1-i)||0,a=(1-n-i)/(1-i)||0,u=(1-r-i)/(1-i)||0;return[o*100,a*100,u*100,i*100]};function Eo(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}A.rgb.keyword=function(e){const t=vr[e];if(t)return t;let n=Number.POSITIVE_INFINITY,r;for(const i of Object.keys(je)){const o=je[i],a=Eo(e,o);a<n&&(n=a,r=i)}return r},A.keyword.rgb=function(e){return je[e]},A.rgb.xyz=function(e){const t=ct(e[0]/255),n=ct(e[1]/255),r=ct(e[2]/255),i=t*.4124564+n*.3575761+r*.1804375,o=t*.2126729+n*.7151522+r*.072175,a=t*.0193339+n*.119192+r*.9503041;return[i*100,o*100,a*100]},A.rgb.lab=function(e){const t=A.rgb.xyz(e);let n=t[0],r=t[1],i=t[2];n/=95.047,r/=100,i/=108.883,n=n>De?n**(1/3):7.787*n+16/116,r=r>De?r**(1/3):7.787*r+16/116,i=i>De?i**(1/3):7.787*i+16/116;const o=116*r-16,a=500*(n-r),u=200*(r-i);return[o,a,u]},A.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let i,o;if(n===0)return o=r*255,[o,o,o];const a=r<.5?r*(1+n):r+n-r*n,u=2*r-a,s=[0,0,0];for(let h=0;h<3;h++)i=t+1/3*-(h-1),i<0&&i++,i>1&&i--,6*i<1?o=u+(a-u)*6*i:2*i<1?o=a:3*i<2?o=u+(a-u)*(2/3-i)*6:o=u,s[h]=o*255;return s},A.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,i=n;const o=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,i*=o<=1?o:2-o;const a=(r+n)/2,u=r===0?2*i/(o+i):2*n/(r+n);return[t,u*100,a*100]},A.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const i=Math.floor(t)%6,o=t-Math.floor(t),a=255*r*(1-n),u=255*r*(1-n*o),s=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,s,a];case 1:return[u,r,a];case 2:return[a,r,s];case 3:return[a,u,r];case 4:return[s,a,r];case 5:return[r,a,u]}},A.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,i=Math.max(r,.01);let o,a;a=(2-n)*r;const u=(2-n)*i;return o=n*i,o/=u<=1?u:2-u,o=o||0,a/=2,[t,o*100,a*100]},A.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const i=n+r;let o;i>1&&(n/=i,r/=i);const a=Math.floor(6*t),u=1-r;o=6*t-a,a&1&&(o=1-o);const s=n+o*(u-n);let h,d,p;switch(a){default:case 6:case 0:{h=u,d=s,p=n;break}case 1:{h=s,d=u,p=n;break}case 2:{h=n,d=u,p=s;break}case 3:{h=n,d=s,p=u;break}case 4:{h=s,d=n,p=u;break}case 5:{h=u,d=n,p=s;break}}return[h*255,d*255,p*255]},A.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100,o=1-Math.min(1,t*(1-i)+i),a=1-Math.min(1,n*(1-i)+i),u=1-Math.min(1,r*(1-i)+i);return[o*255,a*255,u*255]},A.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let i,o,a;return i=t*3.2404542+n*-1.5371385+r*-.4985314,o=t*-.969266+n*1.8760108+r*.041556,a=t*.0556434+n*-.2040259+r*1.0572252,i=ut(i),o=ut(o),a=ut(a),[i*255,o*255,a*255]},A.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>De?t**(1/3):7.787*t+16/116,n=n>De?n**(1/3):7.787*n+16/116,r=r>De?r**(1/3):7.787*r+16/116;const i=116*n-16,o=500*(t-n),a=200*(n-r);return[i,o,a]},A.xyz.oklab=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,i=Math.cbrt(.8189330101*t+.3618667424*n-.1288597137*r),o=Math.cbrt(.0329845436*t+.9293118715*n+.0361456387*r),a=Math.cbrt(.0482003018*t+.2643662691*n+.633851707*r),u=.2104542553*i+.793617785*o-.0040720468*a,s=1.9779984951*i-2.428592205*o+.4505937099*a,h=.0259040371*i+.7827717662*o-.808675766*a;return[u*100,s*100,h*100]},A.oklab.oklch=function(e){return A.lab.lch(e)},A.oklab.xyz=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,i=(.999999998*t+.396337792*n+.215803758*r)**3,o=(1.000000008*t-.105561342*n-.063854175*r)**3,a=(1.000000055*t-.089484182*n-1.291485538*r)**3,u=1.227013851*i-.55779998*o+.281256149*a,s=-.040580178*i+1.11225687*o-.071676679*a,h=-.076381285*i-.421481978*o+1.58616322*a;return[u*100,s*100,h*100]},A.oklab.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,i=(t+.3963377774*n+.2158037573*r)**3,o=(t-.1055613458*n-.0638541728*r)**3,a=(t-.0894841775*n-1.291485548*r)**3,u=ut(4.0767416621*i-3.3077115913*o+.2309699292*a),s=ut(-1.2684380046*i+2.6097574011*o-.3413193965*a),h=ut(-.0041960863*i-.7034186147*o+1.707614701*a);return[u*255,s*255,h*255]},A.oklch.oklab=function(e){return A.lch.lab(e)},A.lab.xyz=function(e){const t=e[0],n=e[1],r=e[2];let i,o,a;o=(t+16)/116,i=n/500+o,a=o-r/200;const u=o**3,s=i**3,h=a**3;return o=u>De?u:(o-16/116)/7.787,i=s>De?s:(i-16/116)/7.787,a=h>De?h:(a-16/116)/7.787,i*=95.047,o*=100,a*=108.883,[i,o,a]},A.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let i;i=Math.atan2(r,n)*360/2/Math.PI,i<0&&(i+=360);const a=Math.sqrt(n*n+r*r);return[t,a,i]},A.lch.lab=function(e){const t=e[0],n=e[1],i=e[2]/360*2*Math.PI,o=n*Math.cos(i),a=n*Math.sin(i);return[t,o,a]},A.rgb.ansi16=function(e,t=null){const[n,r,i]=e;let o=t===null?A.rgb.hsv(e)[2]:t;if(o=Math.round(o/50),o===0)return 30;let a=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return o===2&&(a+=60),a},A.hsv.ansi16=function(e){return A.rgb.ansi16(A.hsv.rgb(e),e[2])},A.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];return t>>4===n>>4&&n>>4===r>>4?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},A.ansi16.rgb=function(e){e=e[0];let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=(Math.trunc(e>50)+1)*.5,r=(t&1)*n*255,i=(t>>1&1)*n*255,o=(t>>2&1)*n*255;return[r,i,o]},A.ansi256.rgb=function(e){if(e=e[0],e>=232){const o=(e-232)*10+8;return[o,o,o]}e-=16;let t;const n=Math.floor(e/36)/5*255,r=Math.floor((t=e%36)/6)/5*255,i=t%6/5*255;return[n,r,i]},A.rgb.hex=function(e){const n=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".slice(n.length)+n},A.hex.rgb=function(e){const t=e.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!t)return[0,0,0];let n=t[0];t[0].length===3&&(n=[...n].map(u=>u+u).join(""));const r=Number.parseInt(n,16),i=r>>16&255,o=r>>8&255,a=r&255;return[i,o,a]},A.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(Math.max(t,n),r),o=Math.min(Math.min(t,n),r),a=i-o;let u;const s=a<1?o/(1-a):0;return a<=0?u=0:i===t?u=(n-r)/a%6:i===n?u=2+(r-t)/a:u=4+(t-n)/a,u/=6,u%=1,[u*360,a*100,s*100]},A.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let i=0;return r<1&&(i=(n-.5*r)/(1-r)),[e[0],r*100,i*100]},A.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],r*100,i*100]},A.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(n===0)return[r*255,r*255,r*255];const i=[0,0,0],o=t%1*6,a=o%1,u=1-a;let s=0;switch(Math.floor(o)){case 0:{i[0]=1,i[1]=a,i[2]=0;break}case 1:{i[0]=u,i[1]=1,i[2]=0;break}case 2:{i[0]=0,i[1]=1,i[2]=a;break}case 3:{i[0]=0,i[1]=u,i[2]=1;break}case 4:{i[0]=a,i[1]=0,i[2]=1;break}default:i[0]=1,i[1]=0,i[2]=u}return s=(1-n)*r,[(n*i[0]+s)*255,(n*i[1]+s)*255,(n*i[2]+s)*255]},A.hcg.hsv=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);let i=0;return r>0&&(i=t/r),[e[0],i*100,r*100]},A.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let i=0;return r>0&&r<.5?i=t/(2*r):r>=.5&&r<1&&(i=t/(2*(1-r))),[e[0],i*100,r*100]},A.hcg.hwb=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);return[e[0],(r-t)*100,(1-r)*100]},A.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,i=r-t;let o=0;return i<1&&(o=(r-i)/(1-i)),[e[0],i*100,o*100]},A.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},A.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},A.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},A.gray.hsl=function(e){return[0,0,e[0]]},A.gray.hsv=A.gray.hsl,A.gray.hwb=function(e){return[0,100,e[0]]},A.gray.cmyk=function(e){return[0,0,0,e[0]]},A.gray.lab=function(e){return[e[0],0,0]},A.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".slice(r.length)+r},A.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};function No(){const e={},t=Object.keys(A);for(let{length:n}=t,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}function $o(e){const t=No(),n=[e];for(t[e].distance=0;n.length>0;){const r=n.pop(),i=Object.keys(A[r]);for(let{length:o}=i,a=0;a<o;a++){const u=i[a],s=t[u];s.distance===-1&&(s.distance=t[r].distance+1,s.parent=r,n.unshift(u))}}return t}function Mo(e,t){return function(n){return t(e(n))}}function zo(e,t){const n=[t[e].parent,e];let r=A[t[e].parent][e],i=t[e].parent;for(;t[i].parent;)n.unshift(t[i].parent),r=Mo(A[t[i].parent][i],r),i=t[i].parent;return r.conversion=n,r}function To(e){const t=$o(e),n={},r=Object.keys(t);for(let{length:i}=r,o=0;o<i;o++){const a=r[o];t[a].parent!==null&&(n[a]=zo(a,t))}return n}const Ve={},Io=Object.keys(A);function Co(e){const t=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}function So(e){const t=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const i=e(n);if(typeof i=="object")for(let{length:o}=i,a=0;a<o;a++)i[a]=Math.round(i[a]);return i};return"conversion"in e&&(t.conversion=e.conversion),t}for(const e of Io){Ve[e]={},Object.defineProperty(Ve[e],"channels",{value:A[e].channels}),Object.defineProperty(Ve[e],"labels",{value:A[e].labels});const t=To(e),n=Object.keys(t);for(const r of n){const i=t[r];Ve[e][r]=So(i),Ve[e][r].raw=Co(i)}}function $(e,t,n){function r(u,s){var h;Object.defineProperty(u,"_zod",{value:u._zod??{},enumerable:!1}),(h=u._zod).traits??(h.traits=new Set),u._zod.traits.add(e),t(u,s);for(const d in a.prototype)Object.defineProperty(u,d,{value:a.prototype[d].bind(u)});u._zod.constr=a,u._zod.def=s}const i=(n==null?void 0:n.Parent)??Object;class o extends i{}Object.defineProperty(o,"name",{value:e});function a(u){var s;const h=n!=null&&n.Parent?new o:this;r(h,u),(s=h._zod).deferred??(s.deferred=[]);for(const d of h._zod.deferred)d();return h}return Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:u=>{var s,h;return n!=null&&n.Parent&&u instanceof n.Parent?!0:(h=(s=u==null?void 0:u._zod)==null?void 0:s.traits)==null?void 0:h.has(e)}}),Object.defineProperty(a,"name",{value:e}),a}class vt extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const xn={};function tt(e){return e&&Object.assign(xn,e),xn}function Oo(e,t){return typeof t=="bigint"?t.toString():t}function _r(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function kn(e){return e==null}function En(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function Po(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,o=Number.parseInt(e.toFixed(i).replace(".","")),a=Number.parseInt(t.toFixed(i).replace(".",""));return o%a/10**i}function pe(e,t,n){Object.defineProperty(e,t,{get(){{const r=n();return e[t]=r,r}},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function Dt(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function mr(e=10){const t="abcdefghijklmnopqrstuvwxyz";let n="";for(let r=0;r<e;r++)n+=t[Math.floor(Math.random()*t.length)];return n}function _t(e){return JSON.stringify(e)}function Ao(e){return typeof e=="object"&&e!==null}const Fo=_r(()=>{try{const e=Function;return new e(""),!0}catch{return!1}});function yr(e){return typeof e=="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}const Zo=new Set(["string","number","symbol"]);function mt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function nt(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(r._zod.parent=e),r}function q(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Lo(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional")}const Bo={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function jo(e,t){const n={},r=e._zod.def;for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(n[i]=r.shape[i])}return nt(e,{...e._zod.def,shape:n,checks:[]})}function Ro(e,t){const n={...e._zod.def.shape},r=e._zod.def;for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete n[i]}return nt(e,{...e._zod.def,shape:n,checks:[]})}function Do(e,t){const n={...e._zod.def,get shape(){const r={...e._zod.def.shape,...t};return Dt(this,"shape",r),r},checks:[]};return nt(e,n)}function Uo(e,t){return nt(e,{...e._zod.def,get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return Dt(this,"shape",n),n},catchall:t._zod.def.catchall,checks:[]})}function qo(e,t,n){const r=t._zod.def.shape,i={...r};if(n)for(const o in n){if(!(o in r))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(i[o]=e?new e({type:"optional",innerType:r[o]}):r[o])}else for(const o in r)i[o]=e?new e({type:"optional",innerType:r[o]}):r[o];return nt(t,{...t._zod.def,shape:i,checks:[]})}function Go(e,t,n){const r=t._zod.def.shape,i={...r};if(n)for(const o in n){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(i[o]=new e({type:"nonoptional",innerType:r[o]}))}else for(const o in r)i[o]=new e({type:"nonoptional",innerType:r[o]});return nt(t,{...t._zod.def,shape:i,checks:[]})}function yt(e,t=0){for(let n=t;n<e.issues.length;n++)if(e.issues[n].continue!==!0)return!0;return!1}function Nn(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function Ut(e){return typeof e=="string"?e:e==null?void 0:e.message}function rt(e,t,n){var i,o,a,u,s,h;const r={...e,path:e.path??[]};if(!e.message){const d=Ut((a=(o=(i=e.inst)==null?void 0:i._zod.def)==null?void 0:o.error)==null?void 0:a.call(o,e))??Ut((u=t==null?void 0:t.error)==null?void 0:u.call(t,e))??Ut((s=n.customError)==null?void 0:s.call(n,e))??Ut((h=n.localeError)==null?void 0:h.call(n,e))??"Invalid input";r.message=d}return delete r.inst,delete r.continue,t!=null&&t.reportInput||delete r.input,r}function $n(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function bt(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const br=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,Oo,2)},enumerable:!0})},wr=$("$ZodError",br),xr=$("$ZodError",br,{Parent:Error});function Ho(e,t=n=>n.message){const n={},r=[];for(const i of e.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}function Ko(e,t){const n=t||function(o){return o.message},r={_errors:[]},i=o=>{for(const a of o.issues)if(a.code==="invalid_union")a.errors.map(u=>i({issues:u}));else if(a.code==="invalid_key")i({issues:a.issues});else if(a.code==="invalid_element")i({issues:a.issues});else if(a.path.length===0)r._errors.push(n(a));else{let u=r,s=0;for(;s<a.path.length;){const h=a.path[s];s===a.path.length-1?(u[h]=u[h]||{_errors:[]},u[h]._errors.push(n(a))):u[h]=u[h]||{_errors:[]},u=u[h],s++}}};return i(e),r}const Vo=e=>(t,n,r,i)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},a=t._zod.run({value:n,issues:[]},o);if(a instanceof Promise)throw new vt;if(a.issues.length){const u=new((i==null?void 0:i.Err)??e)(a.issues.map(s=>rt(s,o,tt())));throw Error.captureStackTrace(u,i==null?void 0:i.callee),u}return a.value},Wo=e=>async(t,n,r,i)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let a=t._zod.run({value:n,issues:[]},o);if(a instanceof Promise&&(a=await a),a.issues.length){const u=new((i==null?void 0:i.Err)??e)(a.issues.map(s=>rt(s,o,tt())));throw Error.captureStackTrace(u,i==null?void 0:i.callee),u}return a.value},kr=e=>(t,n,r)=>{const i=r?{...r,async:!1}:{async:!1},o=t._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new vt;return o.issues.length?{success:!1,error:new(e??wr)(o.issues.map(a=>rt(a,i,tt())))}:{success:!0,data:o.value}},Jo=kr(xr),Er=e=>async(t,n,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(a=>rt(a,i,tt())))}:{success:!0,data:o.value}},Qo=Er(xr),Yo=/^[cC][^\s-]{8,}$/,Xo=/^[0-9a-z]+$/,ea=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ta=/^[0-9a-vA-V]{20}$/,na=/^[A-Za-z0-9]{27}$/,ra=/^[a-zA-Z0-9_-]{21}$/,ia=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,oa=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Nr=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,aa=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,sa="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function ua(){return new RegExp(sa,"u")}const ca=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ha=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,la=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,fa=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,da=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,$r=/^[A-Za-z0-9_-]*$/,Mn=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,pa=/^\+(?:[0-9]){6,14}[0-9]$/,Mr="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ga=new RegExp(`^${Mr}$`);function zr(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function va(e){return new RegExp(`^${zr(e)}$`)}function _a(e){let t=`${Mr}T${zr(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}const ma=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},ya=/^\d+$/,ba=/^-?\d+(?:\.\d+)?/i,wa=/true|false/i,xa=/^[^A-Z]*$/,ka=/^[^a-z]*$/,ze=$("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),Tr={number:"number",bigint:"bigint",object:"date"},Ir=$("$ZodCheckLessThan",(e,t)=>{ze.init(e,t);const n=Tr[typeof t.value];e._zod.onattach.push(r=>{const i=r._zod.bag,o=(t.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?i.maximum=t.value:i.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Cr=$("$ZodCheckGreaterThan",(e,t)=>{ze.init(e,t);const n=Tr[typeof t.value];e._zod.onattach.push(r=>{const i=r._zod.bag,o=(t.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?i.minimum=t.value:i.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Ea=$("$ZodCheckMultipleOf",(e,t)=>{ze.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):Po(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),Na=$("$ZodCheckNumberFormat",(e,t)=>{var a;ze.init(e,t),t.format=t.format||"float64";const n=(a=t.format)==null?void 0:a.includes("int"),r=n?"int":"number",[i,o]=Bo[t.format];e._zod.onattach.push(u=>{const s=u._zod.bag;s.format=t.format,s.minimum=i,s.maximum=o,n&&(s.pattern=ya)}),e._zod.check=u=>{const s=u.value;if(n){if(!Number.isInteger(s)){u.issues.push({expected:r,format:t.format,code:"invalid_type",input:s,inst:e});return}if(!Number.isSafeInteger(s)){s>0?u.issues.push({input:s,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):u.issues.push({input:s,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort});return}}s<i&&u.issues.push({origin:"number",input:s,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),s>o&&u.issues.push({origin:"number",input:s,code:"too_big",maximum:o,inst:e})}}),$a=$("$ZodCheckMaxLength",(e,t)=>{ze.init(e,t),e._zod.when=n=>{const r=n.value;return!kn(r)&&r.length!==void 0},e._zod.onattach.push(n=>{const r=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const r=n.value;if(r.length<=t.maximum)return;const o=$n(r);n.issues.push({origin:o,code:"too_big",maximum:t.maximum,input:r,inst:e,continue:!t.abort})}}),Ma=$("$ZodCheckMinLength",(e,t)=>{ze.init(e,t),e._zod.when=n=>{const r=n.value;return!kn(r)&&r.length!==void 0},e._zod.onattach.push(n=>{const r=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const r=n.value;if(r.length>=t.minimum)return;const o=$n(r);n.issues.push({origin:o,code:"too_small",minimum:t.minimum,input:r,inst:e,continue:!t.abort})}}),za=$("$ZodCheckLengthEquals",(e,t)=>{ze.init(e,t),e._zod.when=n=>{const r=n.value;return!kn(r)&&r.length!==void 0},e._zod.onattach.push(n=>{const r=n._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=n=>{const r=n.value,i=r.length;if(i===t.length)return;const o=$n(r),a=i>t.length;n.issues.push({origin:o,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},input:n.value,inst:e,continue:!t.abort})}}),qt=$("$ZodCheckStringFormat",(e,t)=>{var n;ze.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.format=t.format,t.pattern&&(r._zod.bag.pattern=t.pattern)}),(n=e._zod).check??(n.check=r=>{if(!t.pattern)throw new Error("Not implemented.");t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})})}),Ta=$("$ZodCheckRegex",(e,t)=>{qt.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Ia=$("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=xa),qt.init(e,t)}),Ca=$("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=ka),qt.init(e,t)}),Sa=$("$ZodCheckIncludes",(e,t)=>{ze.init(e,t);const n=new RegExp(mt(t.includes));t.pattern=n,e._zod.onattach.push(r=>{r._zod.bag.pattern=n}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),Oa=$("$ZodCheckStartsWith",(e,t)=>{ze.init(e,t);const n=new RegExp(`^${mt(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{r._zod.bag.pattern=n}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),Pa=$("$ZodCheckEndsWith",(e,t)=>{ze.init(e,t);const n=new RegExp(`.*${mt(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{r._zod.bag.pattern=new RegExp(`.*${mt(t.suffix)}$`)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),Aa=$("$ZodCheckOverwrite",(e,t)=>{ze.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class Fa{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(a=>a),i=Math.min(...r.map(a=>a.length-a.trimStart().length)),o=r.map(a=>a.slice(i)).map(a=>" ".repeat(this.indent*2)+a);for(const a of o)this.content.push(a)}compile(){const t=Function,n=this==null?void 0:this.args,i=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new t(...n,i.join(`
`))}}const Za={major:4,minor:0,patch:0},ve=$("$ZodType",(e,t)=>{var i;var n;e??(e={}),e._zod.id=t.type+"_"+mr(10),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Za;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const o of r)for(const a of o._zod.onattach)a(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),(i=e._zod.deferred)==null||i.push(()=>{e._zod.run=e._zod.parse});else{const o=(a,u,s)=>{let h=yt(a),d;for(const p of u){if(p._zod.when){if(!p._zod.when(a))continue}else if(h)continue;const y=a.issues.length,w=p._zod.check(a);if(w instanceof Promise&&(s==null?void 0:s.async)===!1)throw new vt;if(d||w instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await w,a.issues.length!==y&&(h||(h=yt(a,y)))});else{if(a.issues.length===y)continue;h||(h=yt(a,y))}}return d?d.then(()=>a):a};e._zod.run=(a,u)=>{const s=e._zod.parse(a,u);if(s instanceof Promise){if(u.async===!1)throw new vt;return s.then(h=>o(h,r,u))}return o(s,r,u)}}e["~standard"]={validate:o=>{var a;try{const u=Jo(e,o);return u.success?{value:u.data}:{issues:(a=u.error)==null?void 0:a.issues}}catch{return Qo(e,o).then(s=>{var h;return s.success?{value:s.data}:{issues:(h=s.error)==null?void 0:h.issues}})}},vendor:"zod",version:1}}),zn=$("$ZodString",(e,t)=>{var n;ve.init(e,t),e._zod.pattern=((n=e==null?void 0:e._zod.bag)==null?void 0:n.pattern)??ma(e._zod.bag),e._zod.parse=(r,i)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),he=$("$ZodStringFormat",(e,t)=>{qt.init(e,t),zn.init(e,t)}),La=$("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=oa),he.init(e,t)}),Ba=$("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Nr(r))}else t.pattern??(t.pattern=Nr());he.init(e,t)}),ja=$("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=aa),he.init(e,t)}),Ra=$("$ZodURL",(e,t)=>{he.init(e,t),e._zod.check=n=>{try{const r=new URL(n.value);Mn.lastIndex=0,Mn.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Mn.source,input:n.value,inst:e}),t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:n.value,inst:e})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e}));return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e})}}}),Da=$("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=ua()),he.init(e,t)}),Ua=$("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=ra),he.init(e,t)}),qa=$("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Yo),he.init(e,t)}),Ga=$("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Xo),he.init(e,t)}),Ha=$("$ZodULID",(e,t)=>{t.pattern??(t.pattern=ea),he.init(e,t)}),Ka=$("$ZodXID",(e,t)=>{t.pattern??(t.pattern=ta),he.init(e,t)}),Va=$("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=na),he.init(e,t)}),Wa=$("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=_a(t)),he.init(e,t)}),Ja=$("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=ga),he.init(e,t)}),Qa=$("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=va(t)),he.init(e,t)}),Ya=$("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=ia),he.init(e,t)}),Xa=$("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=ca),he.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.format="ipv4"})}),es=$("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=ha),he.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e})}}}),ts=$("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=la),he.init(e,t)}),ns=$("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=fa),he.init(e,t),e._zod.check=n=>{const[r,i]=n.value.split("/");try{if(!i)throw new Error;const o=Number(i);if(`${o}`!==i)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e})}}});function Sr(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const rs=$("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=da),he.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{Sr(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e})}});function is(e){if(!$r.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return Sr(n)}const os=$("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=$r),he.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{is(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e})}}),as=$("$ZodE164",(e,t)=>{t.pattern??(t.pattern=pa),he.init(e,t)});function ss(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n,i=JSON.parse(atob(r));return!("typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))}catch{return!1}}const us=$("$ZodJWT",(e,t)=>{he.init(e,t),e._zod.check=n=>{ss(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e})}}),Or=$("$ZodNumber",(e,t)=>{ve.init(e,t),e._zod.pattern=e._zod.bag.pattern??ba,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const i=n.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return n;const o=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...o?{received:o}:{}}),n}}),cs=$("$ZodNumber",(e,t)=>{Na.init(e,t),Or.init(e,t)}),hs=$("$ZodBoolean",(e,t)=>{ve.init(e,t),e._zod.pattern=wa,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}const i=n.value;return typeof i=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),n}}),ls=$("$ZodUnknown",(e,t)=>{ve.init(e,t),e._zod.parse=n=>n}),fs=$("$ZodNever",(e,t)=>{ve.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function Pr(e,t,n){e.issues.length&&t.issues.push(...Nn(n,e.issues)),t.value[n]=e.value}const ds=$("$ZodArray",(e,t)=>{ve.init(e,t),e._zod.parse=(n,r)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),n;n.value=Array(i.length);const o=[];for(let a=0;a<i.length;a++){const u=i[a],s=t.element._zod.run({value:u,issues:[]},r);s instanceof Promise?o.push(s.then(h=>Pr(h,n,a))):Pr(s,n,a)}return o.length?Promise.all(o).then(()=>n):n}});function Gt(e,t,n){e.issues.length&&t.issues.push(...Nn(n,e.issues)),t.value[n]=e.value}function Ar(e,t,n,r){e.issues.length?r[n]===void 0?n in r?t.value[n]=void 0:t.value[n]=e.value:t.issues.push(...Nn(n,e.issues)):e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}const ps=$("$ZodObject",(e,t)=>{ve.init(e,t);const n=_r(()=>{const p=Object.keys(t.shape),y=Lo(t.shape);return{shape:t.shape,keys:p,keySet:new Set(p),numKeys:p.length,optionalKeys:new Set(y)}});pe(e._zod,"disc",()=>{const p=t.shape,y=new Map;let w=!1;for(const m in p){const E=p[m]._zod;if(E.values||E.disc){w=!0;const k={values:new Set(E.values??[]),maps:E.disc?[E.disc]:[]};y.set(m,k)}}if(w)return y});const r=p=>{const y=new Fa(["shape","payload","ctx"]),{keys:w,optionalKeys:m}=n.value,E=N=>{const M=_t(N);return`shape[${M}]._zod.run({ value: input[${M}], issues: [] }, ctx)`};y.write("const input = payload.value;");const k=Object.create(null);for(const N of w)k[N]=mr(15);y.write("const newResult = {}");for(const N of w)if(m.has(N)){const M=k[N];y.write(`const ${M} = ${E(N)};`);const z=_t(N);y.write(`
        if (${M}.issues.length) {
          if (input[${z}] === undefined) {
            if (${z} in input) {
              newResult[${z}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${M}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${z}, ...iss.path] : [${z}],
              }))
            );
          }
        } else if (${M}.value === undefined) {
          if (${z} in input) newResult[${z}] = undefined;
        } else {
          newResult[${z}] = ${M}.value;
        }
        `)}else{const M=k[N];y.write(`const ${M} = ${E(N)};`),y.write(`
          if (${M}.issues.length) payload.issues = payload.issues.concat(${M}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${_t(N)}, ...iss.path] : [${_t(N)}]
          })));`),y.write(`newResult[${_t(N)}] = ${M}.value`)}y.write("payload.value = newResult;"),y.write("return payload;");const _=y.compile();return(N,M)=>_(p,N,M)};let i;const o=Ao,a=!xn.jitless,s=a&&Fo.value,{catchall:h}=t;let d;e._zod.parse=(p,y)=>{d??(d=n.value);const w=p.value;if(!o(w))return p.issues.push({expected:"object",code:"invalid_type",input:w,inst:e}),p;const m=[];if(a&&s&&(y==null?void 0:y.async)===!1&&y.jitless!==!0)i||(i=r(t.shape)),p=i(p,y);else{p.value={};const M=d.shape;for(const z of d.keys){const T=M[z],S=T._zod.run({value:w[z],issues:[]},y),R=T._zod.optin==="optional";S instanceof Promise?m.push(S.then(U=>R?Ar(U,p,z,w):Gt(U,p,z))):R?Ar(S,p,z,w):Gt(S,p,z)}}if(!h)return m.length?Promise.all(m).then(()=>p):p;const E=[],k=d.keySet,_=h._zod,N=_.def.type;for(const M of Object.keys(w)){if(k.has(M))continue;if(N==="never"){E.push(M);continue}const z=_.run({value:w[M],issues:[]},y);z instanceof Promise?m.push(z.then(T=>Gt(T,p,M))):Gt(z,p,M)}return E.length&&p.issues.push({code:"unrecognized_keys",keys:E,input:w,inst:e}),m.length?Promise.all(m).then(()=>p):p}});function Fr(e,t,n,r){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(i=>i.issues.map(o=>rt(o,r,tt())))}),t}const gs=$("$ZodUnion",(e,t)=>{ve.init(e,t),pe(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),pe(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){const n=t.options.map(r=>r._zod.pattern);return new RegExp(`^(${n.map(r=>En(r.source)).join("|")})$`)}}),e._zod.parse=(n,r)=>{let i=!1;const o=[];for(const a of t.options){const u=a._zod.run({value:n.value,issues:[]},r);if(u instanceof Promise)o.push(u),i=!0;else{if(u.issues.length===0)return u;o.push(u)}}return i?Promise.all(o).then(a=>Fr(a,n,e,r)):Fr(o,n,e,r)}}),vs=$("$ZodIntersection",(e,t)=>{ve.init(e,t),e._zod.parse=(n,r)=>{const{value:i}=n,o=t.left._zod.run({value:i,issues:[]},r),a=t.right._zod.run({value:i,issues:[]},r);return o instanceof Promise||a instanceof Promise?Promise.all([o,a]).then(([s,h])=>Zr(n,s,h)):Zr(n,o,a)}});function Tn(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(yr(e)&&yr(t)){const n=Object.keys(t),r=Object.keys(e).filter(o=>n.indexOf(o)!==-1),i={...e,...t};for(const o of r){const a=Tn(e[o],t[o]);if(!a.valid)return{valid:!1,mergeErrorPath:[o,...a.mergeErrorPath]};i[o]=a.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const i=e[r],o=t[r],a=Tn(i,o);if(!a.valid)return{valid:!1,mergeErrorPath:[r,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Zr(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),yt(e))return e;const r=Tn(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const _s=$("$ZodEnum",(e,t)=>{ve.init(e,t);const n=Object.values(t.entries).filter(i=>typeof i=="number"),r=Object.entries(t.entries).filter(([i,o])=>n.indexOf(+i)===-1).map(([i,o])=>o);e._zod.values=new Set(r),e._zod.pattern=new RegExp(`^(${r.filter(i=>Zo.has(typeof i)).map(i=>typeof i=="string"?mt(i):i.toString()).join("|")})$`),e._zod.parse=(i,o)=>{const a=i.value;return e._zod.values.has(a)||i.issues.push({code:"invalid_value",values:r,input:a,inst:e}),i}}),ms=$("$ZodTransform",(e,t)=>{ve.init(e,t),e._zod.parse=(n,r)=>{const i=t.transform(n.value,n);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(a=>(n.value=a,n));if(i instanceof Promise)throw new vt;return n.value=i,n}}),ys=$("$ZodOptional",(e,t)=>{ve.init(e,t),e._zod.optin="optional",e._zod.optout="optional",pe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),pe(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${En(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>n.value===void 0?n:t.innerType._zod.run(n,r)}),bs=$("$ZodNullable",(e,t)=>{ve.init(e,t),pe(e._zod,"optin",()=>t.innerType._zod.optin),pe(e._zod,"optout",()=>t.innerType._zod.optout),pe(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${En(n.source)}|null)$`):void 0}),pe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),ws=$("$ZodDefault",(e,t)=>{ve.init(e,t),e._zod.optin="optional",pe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>Lr(o,t)):Lr(i,t)}});function Lr(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const xs=$("$ZodPrefault",(e,t)=>{ve.init(e,t),e._zod.optin="optional",pe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),ks=$("$ZodNonOptional",(e,t)=>{ve.init(e,t),pe(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>Br(o,e)):Br(i,e)}});function Br(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Es=$("$ZodCatch",(e,t)=>{ve.init(e,t),pe(e._zod,"optin",()=>t.innerType._zod.optin),pe(e._zod,"optout",()=>t.innerType._zod.optout),pe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(a=>rt(a,r,tt()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(o=>rt(o,r,tt()))},input:n.value}),n.issues=[]),n)}}),Ns=$("$ZodPipe",(e,t)=>{ve.init(e,t),pe(e._zod,"values",()=>t.in._zod.values),pe(e._zod,"optin",()=>t.in._zod.optin),pe(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(n,r)=>{const i=t.in._zod.run(n,r);return i instanceof Promise?i.then(o=>jr(o,t,r)):jr(i,t,r)}});function jr(e,t,n){return yt(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const $s=$("$ZodReadonly",(e,t)=>{ve.init(e,t),pe(e._zod,"disc",()=>t.innerType._zod.disc),pe(e._zod,"optin",()=>t.innerType._zod.optin),pe(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,r)=>{const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(Rr):Rr(i)}});function Rr(e){return e.value=Object.freeze(e.value),e}const Ms=$("$ZodCustom",(e,t)=>{ze.init(e,t),ve.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,i=t.fn(r);if(i instanceof Promise)return i.then(o=>Dr(o,n,r,e));Dr(i,n,r,e)}});function Dr(e,t,n,r){if(!e){const i={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),t.issues.push(bt(i))}}class zs{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}remove(t){return this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};return delete r.id,{...r,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function Ts(){return new zs}const Ht=Ts();function Is(e,t){return new e({type:"string",...q(t)})}function Cs(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...q(t)})}function Ur(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...q(t)})}function Ss(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...q(t)})}function Os(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...q(t)})}function Ps(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...q(t)})}function As(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...q(t)})}function Fs(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...q(t)})}function Zs(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...q(t)})}function Ls(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...q(t)})}function Bs(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...q(t)})}function js(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...q(t)})}function Rs(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...q(t)})}function Ds(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...q(t)})}function Us(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...q(t)})}function qs(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...q(t)})}function Gs(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...q(t)})}function Hs(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...q(t)})}function Ks(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...q(t)})}function Vs(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...q(t)})}function Ws(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...q(t)})}function Js(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...q(t)})}function Qs(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...q(t)})}function Ys(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...q(t)})}function Xs(e,t){return new e({type:"string",format:"date",check:"string_format",...q(t)})}function eu(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...q(t)})}function tu(e,t){return new e({type:"string",format:"duration",check:"string_format",...q(t)})}function nu(e,t){return new e({type:"number",checks:[],...q(t)})}function ru(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...q(t)})}function iu(e,t){return new e({type:"boolean",...q(t)})}function ou(e){return new e({type:"unknown"})}function au(e,t){return new e({type:"never",...q(t)})}function qr(e,t){return new Ir({check:"less_than",...q(t),value:e,inclusive:!1})}function In(e,t){return new Ir({check:"less_than",...q(t),value:e,inclusive:!0})}function Gr(e,t){return new Cr({check:"greater_than",...q(t),value:e,inclusive:!1})}function Cn(e,t){return new Cr({check:"greater_than",...q(t),value:e,inclusive:!0})}function Hr(e,t){return new Ea({check:"multiple_of",...q(t),value:e})}function Kr(e,t){return new $a({check:"max_length",...q(t),maximum:e})}function Kt(e,t){return new Ma({check:"min_length",...q(t),minimum:e})}function Vr(e,t){return new za({check:"length_equals",...q(t),length:e})}function su(e,t){return new Ta({check:"string_format",format:"regex",...q(t),pattern:e})}function uu(e){return new Ia({check:"string_format",format:"lowercase",...q(e)})}function cu(e){return new Ca({check:"string_format",format:"uppercase",...q(e)})}function hu(e,t){return new Sa({check:"string_format",format:"includes",...q(t),includes:e})}function lu(e,t){return new Oa({check:"string_format",format:"starts_with",...q(t),prefix:e})}function fu(e,t){return new Pa({check:"string_format",format:"ends_with",...q(t),suffix:e})}function wt(e){return new Aa({check:"overwrite",tx:e})}function du(e){return wt(t=>t.normalize(e))}function pu(){return wt(e=>e.trim())}function gu(){return wt(e=>e.toLowerCase())}function vu(){return wt(e=>e.toUpperCase())}function _u(e,t,n){return new e({type:"array",element:t,...q(n)})}function mu(e,t,n){return new e({type:"custom",check:"custom",fn:t,...q(n)})}const yu=$("ZodISODateTime",(e,t)=>{Wa.init(e,t),de.init(e,t)});function bu(e){return Ys(yu,e)}const wu=$("ZodISODate",(e,t)=>{Ja.init(e,t),de.init(e,t)});function xu(e){return Xs(wu,e)}const ku=$("ZodISOTime",(e,t)=>{Qa.init(e,t),de.init(e,t)});function Eu(e){return eu(ku,e)}const Nu=$("ZodISODuration",(e,t)=>{Ya.init(e,t),de.init(e,t)});function $u(e){return tu(Nu,e)}const Vt=$("ZodError",(e,t)=>{wr.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>Ko(e,n)},flatten:{value:n=>Ho(e,n)},addIssue:{value:n=>e.issues.push(n)},addIssues:{value:n=>e.issues.push(...n)},isEmpty:{get(){return e.issues.length===0}}})},{Parent:Error}),Mu=Vo(Vt),zu=Wo(Vt),Tu=kr(Vt),Iu=Er(Vt),_e=$("ZodType",(e,t)=>(ve.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(n,r)=>nt(e,n,r),e.brand=()=>e,e.register=(n,r)=>(n.add(e,r),e),e.parse=(n,r)=>Mu(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>Tu(e,n,r),e.parseAsync=async(n,r)=>zu(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>Iu(e,n,r),e.spa=e.safeParseAsync,e.refine=(n,r)=>e.check(_c(n,r)),e.superRefine=n=>e.check(mc(n)),e.overwrite=n=>e.check(wt(n)),e.optional=()=>Yt(e),e.nullable=()=>ii(e),e.nullish=()=>Yt(ii(e)),e.nonoptional=n=>hc(e,n),e.array=()=>ti(e),e.or=n=>tc([e,n]),e.and=n=>rc(e,n),e.transform=n=>ai(e,On(n)),e.default=n=>sc(e,n),e.prefault=n=>cc(e,n),e.catch=n=>fc(e,n),e.pipe=n=>ai(e,n),e.readonly=()=>gc(e),e.describe=n=>{const r=e.clone();return Ht.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){var n;return(n=Ht.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return Ht.get(e);const r=e.clone();return Ht.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Wr=$("_ZodString",(e,t)=>{zn.init(e,t),_e.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(su(...r)),e.includes=(...r)=>e.check(hu(...r)),e.startsWith=r=>e.check(lu(r)),e.endsWith=r=>e.check(fu(r)),e.min=(...r)=>e.check(Kt(...r)),e.max=(...r)=>e.check(Kr(...r)),e.length=(...r)=>e.check(Vr(...r)),e.nonempty=(...r)=>e.check(Kt(1,...r)),e.lowercase=r=>e.check(uu(r)),e.uppercase=r=>e.check(cu(r)),e.trim=()=>e.check(pu()),e.normalize=(...r)=>e.check(du(...r)),e.toLowerCase=()=>e.check(gu()),e.toUpperCase=()=>e.check(vu())}),Cu=$("ZodString",(e,t)=>{zn.init(e,t),Wr.init(e,t),e.email=n=>e.check(Cs(Su,n)),e.url=n=>e.check(Fs(Ou,n)),e.jwt=n=>e.check(Qs(Vu,n)),e.emoji=n=>e.check(Zs(Pu,n)),e.guid=n=>e.check(Ur(Jr,n)),e.uuid=n=>e.check(Ss(Wt,n)),e.uuidv4=n=>e.check(Os(Wt,n)),e.uuidv6=n=>e.check(Ps(Wt,n)),e.uuidv7=n=>e.check(As(Wt,n)),e.nanoid=n=>e.check(Ls(Au,n)),e.guid=n=>e.check(Ur(Jr,n)),e.cuid=n=>e.check(Bs(Fu,n)),e.cuid2=n=>e.check(js(Zu,n)),e.ulid=n=>e.check(Rs(Lu,n)),e.base64=n=>e.check(Vs(Gu,n)),e.base64url=n=>e.check(Ws(Hu,n)),e.xid=n=>e.check(Ds(Bu,n)),e.ksuid=n=>e.check(Us(ju,n)),e.ipv4=n=>e.check(qs(Ru,n)),e.ipv6=n=>e.check(Gs(Du,n)),e.cidrv4=n=>e.check(Hs(Uu,n)),e.cidrv6=n=>e.check(Ks(qu,n)),e.e164=n=>e.check(Js(Ku,n)),e.datetime=n=>e.check(bu(n)),e.date=n=>e.check(xu(n)),e.time=n=>e.check(Eu(n)),e.duration=n=>e.check($u(n))});function Oe(e){return Is(Cu,e)}const de=$("ZodStringFormat",(e,t)=>{he.init(e,t),Wr.init(e,t)}),Su=$("ZodEmail",(e,t)=>{ja.init(e,t),de.init(e,t)}),Jr=$("ZodGUID",(e,t)=>{La.init(e,t),de.init(e,t)}),Wt=$("ZodUUID",(e,t)=>{Ba.init(e,t),de.init(e,t)}),Ou=$("ZodURL",(e,t)=>{Ra.init(e,t),de.init(e,t)}),Pu=$("ZodEmoji",(e,t)=>{Da.init(e,t),de.init(e,t)}),Au=$("ZodNanoID",(e,t)=>{Ua.init(e,t),de.init(e,t)}),Fu=$("ZodCUID",(e,t)=>{qa.init(e,t),de.init(e,t)}),Zu=$("ZodCUID2",(e,t)=>{Ga.init(e,t),de.init(e,t)}),Lu=$("ZodULID",(e,t)=>{Ha.init(e,t),de.init(e,t)}),Bu=$("ZodXID",(e,t)=>{Ka.init(e,t),de.init(e,t)}),ju=$("ZodKSUID",(e,t)=>{Va.init(e,t),de.init(e,t)}),Ru=$("ZodIPv4",(e,t)=>{Xa.init(e,t),de.init(e,t)}),Du=$("ZodIPv6",(e,t)=>{es.init(e,t),de.init(e,t)}),Uu=$("ZodCIDRv4",(e,t)=>{ts.init(e,t),de.init(e,t)}),qu=$("ZodCIDRv6",(e,t)=>{ns.init(e,t),de.init(e,t)}),Gu=$("ZodBase64",(e,t)=>{rs.init(e,t),de.init(e,t)}),Hu=$("ZodBase64URL",(e,t)=>{os.init(e,t),de.init(e,t)}),Ku=$("ZodE164",(e,t)=>{as.init(e,t),de.init(e,t)}),Vu=$("ZodJWT",(e,t)=>{us.init(e,t),de.init(e,t)}),Qr=$("ZodNumber",(e,t)=>{Or.init(e,t),_e.init(e,t),e.gt=(r,i)=>e.check(Gr(r,i)),e.gte=(r,i)=>e.check(Cn(r,i)),e.min=(r,i)=>e.check(Cn(r,i)),e.lt=(r,i)=>e.check(qr(r,i)),e.lte=(r,i)=>e.check(In(r,i)),e.max=(r,i)=>e.check(In(r,i)),e.int=r=>e.check(Yr(r)),e.safe=r=>e.check(Yr(r)),e.positive=r=>e.check(Gr(0,r)),e.nonnegative=r=>e.check(Cn(0,r)),e.negative=r=>e.check(qr(0,r)),e.nonpositive=r=>e.check(In(0,r)),e.multipleOf=(r,i)=>e.check(Hr(r,i)),e.step=(r,i)=>e.check(Hr(r,i)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function We(e){return nu(Qr,e)}const Wu=$("ZodNumberFormat",(e,t)=>{cs.init(e,t),Qr.init(e,t)});function Yr(e){return ru(Wu,e)}const Ju=$("ZodBoolean",(e,t)=>{hs.init(e,t),_e.init(e,t)});function Jt(e){return iu(Ju,e)}const Qu=$("ZodUnknown",(e,t)=>{ls.init(e,t),_e.init(e,t)});function Xr(){return ou(Qu)}const Yu=$("ZodNever",(e,t)=>{fs.init(e,t),_e.init(e,t)});function ei(e){return au(Yu,e)}const Xu=$("ZodArray",(e,t)=>{ds.init(e,t),_e.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(Kt(n,r)),e.nonempty=n=>e.check(Kt(1,n)),e.max=(n,r)=>e.check(Kr(n,r)),e.length=(n,r)=>e.check(Vr(n,r))});function ti(e,t){return _u(Xu,e,t)}const ni=$("ZodObject",(e,t)=>{ps.init(e,t),_e.init(e,t),pe(e,"shape",()=>Object.fromEntries(Object.entries(e._zod.def.shape))),e.keyof=()=>Qt(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Xr()}),e.loose=()=>e.clone({...e._zod.def,catchall:Xr()}),e.strict=()=>e.clone({...e._zod.def,catchall:ei()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>Do(e,n),e.merge=n=>Uo(e,n),e.pick=n=>jo(e,n),e.omit=n=>Ro(e,n),e.partial=(...n)=>qo(ri,e,n[0]),e.required=(...n)=>Go(oi,e,n[0])});function xt(e,t){const n={type:"object",get shape(){return Dt(this,"shape",{...e}),this.shape},...q(t)};return new ni(n)}function Pe(e,t){return new ni({type:"object",get shape(){return Dt(this,"shape",{...e}),this.shape},catchall:ei(),...q(t)})}const ec=$("ZodUnion",(e,t)=>{gs.init(e,t),_e.init(e,t),e.options=t.options});function tc(e,t){return new ec({type:"union",options:e,...q(t)})}const nc=$("ZodIntersection",(e,t)=>{vs.init(e,t),_e.init(e,t)});function rc(e,t){return new nc({type:"intersection",left:e,right:t})}const Sn=$("ZodEnum",(e,t)=>{_s.init(e,t),_e.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,i)=>{const o={};for(const a of r)if(n.has(a))o[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new Sn({...t,checks:[],...q(i),entries:o})},e.exclude=(r,i)=>{const o={...t.entries};for(const a of r)if(n.has(a))delete o[a];else throw new Error(`Key ${a} not found in enum`);return new Sn({...t,checks:[],...q(i),entries:o})}});function Qt(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new Sn({type:"enum",entries:n,...q(t)})}const ic=$("ZodTransform",(e,t)=>{ms.init(e,t),_e.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=o=>{if(typeof o=="string")n.issues.push(bt(o,n.value,t));else{const a=o;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=n.value),a.inst??(a.inst=e),a.continue??(a.continue=!0),n.issues.push(bt(a))}};const i=t.transform(n.value,n);return i instanceof Promise?i.then(o=>(n.value=o,n)):(n.value=i,n)}});function On(e){return new ic({type:"transform",transform:e})}const ri=$("ZodOptional",(e,t)=>{ys.init(e,t),_e.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Yt(e){return new ri({type:"optional",innerType:e})}const oc=$("ZodNullable",(e,t)=>{bs.init(e,t),_e.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ii(e){return new oc({type:"nullable",innerType:e})}const ac=$("ZodDefault",(e,t)=>{ws.init(e,t),_e.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function sc(e,t){return new ac({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const uc=$("ZodPrefault",(e,t)=>{xs.init(e,t),_e.init(e,t),e.unwrap=()=>e._zod.def.innerType});function cc(e,t){return new uc({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const oi=$("ZodNonOptional",(e,t)=>{ks.init(e,t),_e.init(e,t),e.unwrap=()=>e._zod.def.innerType});function hc(e,t){return new oi({type:"nonoptional",innerType:e,...q(t)})}const lc=$("ZodCatch",(e,t)=>{Es.init(e,t),_e.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function fc(e,t){return new lc({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const dc=$("ZodPipe",(e,t)=>{Ns.init(e,t),_e.init(e,t),e.in=t.in,e.out=t.out});function ai(e,t){return new dc({type:"pipe",in:e,out:t})}const pc=$("ZodReadonly",(e,t)=>{$s.init(e,t),_e.init(e,t)});function gc(e){return new pc({type:"readonly",innerType:e})}const si=$("ZodCustom",(e,t)=>{Ms.init(e,t),_e.init(e,t)});function vc(e,t){const n=new ze({check:"custom",...q(t)});return n._zod.check=e,n}function _c(e,t={}){return mu(si,e,t)}function mc(e,t){const n=vc(r=>(r.addIssue=i=>{if(typeof i=="string")r.issues.push(bt(i,r.value,n._zod.def));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=n),o.continue??(o.continue=!n._zod.def.abort),r.issues.push(bt(o))}},e(r.value,r)),t);return n}function Xt(e,t={error:`Input not instance of ${e.name}`}){const n=new si({type:"custom",check:"custom",fn:r=>r instanceof e,abort:!0,...q(t)});return n._zod.bag.Class=e,n}const yc=Qt(["box","sphere","cylinder","cone","capsule","torus-knot","tetrahedron","octahedron","dodecahedron","icosahedron","rhombicuboctahedron","triangular_prism","pentagonal_prism","hexagonal_prism","square_pyramid","pentagonal_pyramid","triangular_dipyramid","pentagonal_dipyramid","elongated_square_dypyramid","elongated_pentagonal_dipyramid","elongated_pentagonal_cupola","goldberg","icosphere","geodesic"]);function ui(e){const t=Me.get(e);if(t===null){console.warn("invalid color:",e);return}let n;switch(t.model){case"rgb":n=Ve.rgb.hex(t.value[0],t.value[1],t.value[2]);break;case"hsl":n=Ve.hsl.hex(t.value[0],t.value[1],t.value[2]);break;case"hwb":n=Ve.hwb.hex(t.value[0],t.value[1],t.value[2]);break;default:console.warn("unknown color model",t.model);return}const r=t.value[3]??1,i=Math.round(r*255).toString(16).padStart(2,"0").toUpperCase();return`#${n}${i}`}const Pn=Pe({size:We().min(0).default(1),opacity:We().min(0).max(1).default(1),wireframe:Jt().default(!1),color:Oe().pipe(On(ui)).default("#D3D3D3FF"),label:Jt().default(!1),shape:yc.default("icosphere"),nodeMeshFactory:Xt(Function).default(()=>st.defaultNodeMeshFactory)}),ci=Pe({baseColor:Oe().default("#D3D3D3FF")}),bc=Qt(["plain","moving"]),An=Pe({type:bc.default("moving"),arrowCap:Jt().default(!1),color:Oe().pipe(On(ui)).default("#FFFFFFFF"),width:We().default(.25),movingLineOpts:ci.default(ci.parse({})),edgeMeshFactory:Xt(Function).default(()=>Ce.defaultEdgeMeshFactory)}),wc=Pe({selector:Oe(),style:Pn}),xc=Pe({selector:Oe(),style:An}),kc=Pe({node:wc,edge:xc}).partial().refine(e=>!!e.node||!!e.edge,"StyleLayer requires either 'node' or 'edge'."),Ec=ti(kc),hi=Pe({pinOnDrag:Jt().default(!0)}),Fn=Oe().or(We());xt({id:Fn,metadata:xt()}),xt({src:Fn,dst:Fn,metadata:xt()});const li=Pe({skybox:Oe().default(""),node:Pn.default(Pn.parse({})),edge:An.default(An.parse({})),startingCameraDistance:We().default(30)}),fi=Pe({node:hi.default(hi.parse({})),fetchNodes:Yt(Xt(Function)),fetchEdges:Yt(Xt(Function))}),Nc=Qt(["ngraph","d3"]),di=Pe({type:Nc.default("ngraph"),preSteps:We().default(0),stepMultiplier:We().default(1),minDelta:We().default(0)}),$c=Pe({nodeListProp:Oe().default("nodes"),edgeListProp:Oe().default("edges"),nodeIdProp:Oe().default("id"),edgeSrcIdProp:Oe().default("src"),edgeDstIdProp:Oe().default("dst"),fetchOpts:xt().default({})});function Mc(e={}){return $c.parse(e)}const zc=Pe({style:li.default(li.parse({})),behavior:fi.default(fi.parse({})),engine:di.default(di.parse({}))});function Tc(e={}){return zc.parse(e)}function Ic(e,t,n){var r,i=1;e==null&&(e=0),t==null&&(t=0),n==null&&(n=0);function o(){var a,u=r.length,s,h=0,d=0,p=0;for(a=0;a<u;++a)s=r[a],h+=s.x||0,d+=s.y||0,p+=s.z||0;for(h=(h/u-e)*i,d=(d/u-t)*i,p=(p/u-n)*i,a=0;a<u;++a)s=r[a],h&&(s.x-=h),d&&(s.y-=d),p&&(s.z-=p)}return o.initialize=function(a){r=a},o.x=function(a){return arguments.length?(e=+a,o):e},o.y=function(a){return arguments.length?(t=+a,o):t},o.z=function(a){return arguments.length?(n=+a,o):n},o.strength=function(a){return arguments.length?(i=+a,o):i},o}function Cc(e){const t=+this._x.call(null,e);return pi(this.cover(t),t,e)}function pi(e,t,n){if(isNaN(t))return e;var r,i=e._root,o={data:n},a=e._x0,u=e._x1,s,h,d,p,y;if(!i)return e._root=o,e;for(;i.length;)if((d=t>=(s=(a+u)/2))?a=s:u=s,r=i,!(i=i[p=+d]))return r[p]=o,e;if(h=+e._x.call(null,i.data),t===h)return o.next=i,r?r[p]=o:e._root=o,e;do r=r?r[p]=new Array(2):e._root=new Array(2),(d=t>=(s=(a+u)/2))?a=s:u=s;while((p=+d)==(y=+(h>=s)));return r[y]=i,r[p]=o,e}function Sc(e){Array.isArray(e)||(e=Array.from(e));const t=e.length,n=new Float64Array(t);let r=1/0,i=-1/0;for(let o=0,a;o<t;++o)isNaN(a=+this._x.call(null,e[o]))||(n[o]=a,a<r&&(r=a),a>i&&(i=a));if(r>i)return this;this.cover(r).cover(i);for(let o=0;o<t;++o)pi(this,n[o],e[o]);return this}function Oc(e){if(isNaN(e=+e))return this;var t=this._x0,n=this._x1;if(isNaN(t))n=(t=Math.floor(e))+1;else{for(var r=n-t||1,i=this._root,o,a;t>e||e>=n;)switch(a=+(e<t),o=new Array(2),o[a]=i,i=o,r*=2,a){case 0:n=t+r;break;case 1:t=n-r;break}this._root&&this._root.length&&(this._root=i)}return this._x0=t,this._x1=n,this}function Pc(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Ac(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Ue(e,t,n){this.node=e,this.x0=t,this.x1=n}function Fc(e,t){var n,r=this._x0,i,o,a=this._x1,u=[],s=this._root,h,d;for(s&&u.push(new Ue(s,r,a)),t==null?t=1/0:(r=e-t,a=e+t);h=u.pop();)if(!(!(s=h.node)||(i=h.x0)>a||(o=h.x1)<r))if(s.length){var p=(i+o)/2;u.push(new Ue(s[1],p,o),new Ue(s[0],i,p)),(d=+(e>=p))&&(h=u[u.length-1],u[u.length-1]=u[u.length-1-d],u[u.length-1-d]=h)}else{var y=Math.abs(e-+this._x.call(null,s.data));y<t&&(t=y,r=e-y,a=e+y,n=s.data)}return n}function Zc(e){if(isNaN(s=+this._x.call(null,e)))return this;var t,n=this._root,r,i,o,a=this._x0,u=this._x1,s,h,d,p,y;if(!n)return this;if(n.length)for(;;){if((d=s>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[p=+d]))return this;if(!n.length)break;t[p+1&1]&&(r=t,y=p)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[p]=o:delete t[p],(n=t[0]||t[1])&&n===(t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function Lc(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Bc(){return this._root}function jc(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Rc(e){var t=[],n,r=this._root,i,o,a;for(r&&t.push(new Ue(r,this._x0,this._x1));n=t.pop();)if(!e(r=n.node,o=n.x0,a=n.x1)&&r.length){var u=(o+a)/2;(i=r[1])&&t.push(new Ue(i,u,a)),(i=r[0])&&t.push(new Ue(i,o,u))}return this}function Dc(e){var t=[],n=[],r;for(this._root&&t.push(new Ue(this._root,this._x0,this._x1));r=t.pop();){var i=r.node;if(i.length){var o,a=r.x0,u=r.x1,s=(a+u)/2;(o=i[0])&&t.push(new Ue(o,a,s)),(o=i[1])&&t.push(new Ue(o,s,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.x1);return this}function Uc(e){return e[0]}function qc(e){return arguments.length?(this._x=e,this):this._x}function gi(e,t){var n=new Zn(t??Uc,NaN,NaN);return e==null?n:n.addAll(e)}function Zn(e,t,n){this._x=e,this._x0=t,this._x1=n,this._root=void 0}function vi(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Te=gi.prototype=Zn.prototype;Te.copy=function(){var e=new Zn(this._x,this._x0,this._x1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=vi(t),e;for(n=[{source:t,target:e._root=new Array(2)}];t=n.pop();)for(var i=0;i<2;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(2)}):t.target[i]=vi(r));return e},Te.add=Cc,Te.addAll=Sc,Te.cover=Oc,Te.data=Pc,Te.extent=Ac,Te.find=Fc,Te.remove=Zc,Te.removeAll=Lc,Te.root=Bc,Te.size=jc,Te.visit=Rc,Te.visitAfter=Dc,Te.x=qc;function Gc(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return _i(this.cover(t,n),t,n,e)}function _i(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,a={data:r},u=e._x0,s=e._y0,h=e._x1,d=e._y1,p,y,w,m,E,k,_,N;if(!o)return e._root=a,e;for(;o.length;)if((E=t>=(p=(u+h)/2))?u=p:h=p,(k=n>=(y=(s+d)/2))?s=y:d=y,i=o,!(o=o[_=k<<1|E]))return i[_]=a,e;if(w=+e._x.call(null,o.data),m=+e._y.call(null,o.data),t===w&&n===m)return a.next=o,i?i[_]=a:e._root=a,e;do i=i?i[_]=new Array(4):e._root=new Array(4),(E=t>=(p=(u+h)/2))?u=p:h=p,(k=n>=(y=(s+d)/2))?s=y:d=y;while((_=k<<1|E)===(N=(m>=y)<<1|w>=p));return i[N]=o,i[_]=a,e}function Hc(e){var t,n,r=e.length,i,o,a=new Array(r),u=new Array(r),s=1/0,h=1/0,d=-1/0,p=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=i,u[n]=o,i<s&&(s=i),i>d&&(d=i),o<h&&(h=o),o>p&&(p=o));if(s>d||h>p)return this;for(this.cover(s,h).cover(d,p),n=0;n<r;++n)_i(this,a[n],u[n],e[n]);return this}function Kc(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a=i-n||1,u=this._root,s,h;n>e||e>=i||r>t||t>=o;)switch(h=(t<r)<<1|e<n,s=new Array(4),s[h]=u,u=s,a*=2,h){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Vc(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Wc(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ne(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Jc(e,t,n){var r,i=this._x0,o=this._y0,a,u,s,h,d=this._x1,p=this._y1,y=[],w=this._root,m,E;for(w&&y.push(new Ne(w,i,o,d,p)),n==null?n=1/0:(i=e-n,o=t-n,d=e+n,p=t+n,n*=n);m=y.pop();)if(!(!(w=m.node)||(a=m.x0)>d||(u=m.y0)>p||(s=m.x1)<i||(h=m.y1)<o))if(w.length){var k=(a+s)/2,_=(u+h)/2;y.push(new Ne(w[3],k,_,s,h),new Ne(w[2],a,_,k,h),new Ne(w[1],k,u,s,_),new Ne(w[0],a,u,k,_)),(E=(t>=_)<<1|e>=k)&&(m=y[y.length-1],y[y.length-1]=y[y.length-1-E],y[y.length-1-E]=m)}else{var N=e-+this._x.call(null,w.data),M=t-+this._y.call(null,w.data),z=N*N+M*M;if(z<n){var T=Math.sqrt(n=z);i=e-T,o=t-T,d=e+T,p=t+T,r=w.data}}return r}function Qc(e){if(isNaN(d=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,a=this._x0,u=this._y0,s=this._x1,h=this._y1,d,p,y,w,m,E,k,_;if(!n)return this;if(n.length)for(;;){if((m=d>=(y=(a+s)/2))?a=y:s=y,(E=p>=(w=(u+h)/2))?u=w:h=w,t=n,!(n=n[k=E<<1|m]))return this;if(!n.length)break;(t[k+1&3]||t[k+2&3]||t[k+3&3])&&(r=t,_=k)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[k]=o:delete t[k],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[_]=n:this._root=n),this):(this._root=o,this)}function Yc(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Xc(){return this._root}function eh(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function th(e){var t=[],n,r=this._root,i,o,a,u,s;for(r&&t.push(new Ne(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,a=n.y0,u=n.x1,s=n.y1)&&r.length){var h=(o+u)/2,d=(a+s)/2;(i=r[3])&&t.push(new Ne(i,h,d,u,s)),(i=r[2])&&t.push(new Ne(i,o,d,h,s)),(i=r[1])&&t.push(new Ne(i,h,a,u,d)),(i=r[0])&&t.push(new Ne(i,o,a,h,d))}return this}function nh(e){var t=[],n=[],r;for(this._root&&t.push(new Ne(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,a=r.x0,u=r.y0,s=r.x1,h=r.y1,d=(a+s)/2,p=(u+h)/2;(o=i[0])&&t.push(new Ne(o,a,u,d,p)),(o=i[1])&&t.push(new Ne(o,d,u,s,p)),(o=i[2])&&t.push(new Ne(o,a,p,d,h)),(o=i[3])&&t.push(new Ne(o,d,p,s,h))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function rh(e){return e[0]}function ih(e){return arguments.length?(this._x=e,this):this._x}function oh(e){return e[1]}function ah(e){return arguments.length?(this._y=e,this):this._y}function mi(e,t,n){var r=new Ln(t??rh,n??oh,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Ln(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function yi(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var $e=mi.prototype=Ln.prototype;$e.copy=function(){var e=new Ln(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=yi(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=yi(r));return e},$e.add=Gc,$e.addAll=Hc,$e.cover=Kc,$e.data=Vc,$e.extent=Wc,$e.find=Jc,$e.remove=Qc,$e.removeAll=Yc,$e.root=Xc,$e.size=eh,$e.visit=th,$e.visitAfter=nh,$e.x=ih,$e.y=ah;function sh(e){const t=+this._x.call(null,e),n=+this._y.call(null,e),r=+this._z.call(null,e);return bi(this.cover(t,n,r),t,n,r,e)}function bi(e,t,n,r,i){if(isNaN(t)||isNaN(n)||isNaN(r))return e;var o,a=e._root,u={data:i},s=e._x0,h=e._y0,d=e._z0,p=e._x1,y=e._y1,w=e._z1,m,E,k,_,N,M,z,T,S,R,U;if(!a)return e._root=u,e;for(;a.length;)if((z=t>=(m=(s+p)/2))?s=m:p=m,(T=n>=(E=(h+y)/2))?h=E:y=E,(S=r>=(k=(d+w)/2))?d=k:w=k,o=a,!(a=a[R=S<<2|T<<1|z]))return o[R]=u,e;if(_=+e._x.call(null,a.data),N=+e._y.call(null,a.data),M=+e._z.call(null,a.data),t===_&&n===N&&r===M)return u.next=a,o?o[R]=u:e._root=u,e;do o=o?o[R]=new Array(8):e._root=new Array(8),(z=t>=(m=(s+p)/2))?s=m:p=m,(T=n>=(E=(h+y)/2))?h=E:y=E,(S=r>=(k=(d+w)/2))?d=k:w=k;while((R=S<<2|T<<1|z)===(U=(M>=k)<<2|(N>=E)<<1|_>=m));return o[U]=a,o[R]=u,e}function uh(e){Array.isArray(e)||(e=Array.from(e));const t=e.length,n=new Float64Array(t),r=new Float64Array(t),i=new Float64Array(t);let o=1/0,a=1/0,u=1/0,s=-1/0,h=-1/0,d=-1/0;for(let p=0,y,w,m,E;p<t;++p)isNaN(w=+this._x.call(null,y=e[p]))||isNaN(m=+this._y.call(null,y))||isNaN(E=+this._z.call(null,y))||(n[p]=w,r[p]=m,i[p]=E,w<o&&(o=w),w>s&&(s=w),m<a&&(a=m),m>h&&(h=m),E<u&&(u=E),E>d&&(d=E));if(o>s||a>h||u>d)return this;this.cover(o,a,u).cover(s,h,d);for(let p=0;p<t;++p)bi(this,n[p],r[p],i[p],e[p]);return this}function ch(e,t,n){if(isNaN(e=+e)||isNaN(t=+t)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._z0,a=this._x1,u=this._y1,s=this._z1;if(isNaN(r))a=(r=Math.floor(e))+1,u=(i=Math.floor(t))+1,s=(o=Math.floor(n))+1;else{for(var h=a-r||1,d=this._root,p,y;r>e||e>=a||i>t||t>=u||o>n||n>=s;)switch(y=(n<o)<<2|(t<i)<<1|e<r,p=new Array(8),p[y]=d,d=p,h*=2,y){case 0:a=r+h,u=i+h,s=o+h;break;case 1:r=a-h,u=i+h,s=o+h;break;case 2:a=r+h,i=u-h,s=o+h;break;case 3:r=a-h,i=u-h,s=o+h;break;case 4:a=r+h,u=i+h,o=s-h;break;case 5:r=a-h,u=i+h,o=s-h;break;case 6:a=r+h,i=u-h,o=s-h;break;case 7:r=a-h,i=u-h,o=s-h;break}this._root&&this._root.length&&(this._root=d)}return this._x0=r,this._y0=i,this._z0=o,this._x1=a,this._y1=u,this._z1=s,this}function hh(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function lh(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function ae(e,t,n,r,i,o,a){this.node=e,this.x0=t,this.y0=n,this.z0=r,this.x1=i,this.y1=o,this.z1=a}function fh(e,t,n,r){var i,o=this._x0,a=this._y0,u=this._z0,s,h,d,p,y,w,m=this._x1,E=this._y1,k=this._z1,_=[],N=this._root,M,z;for(N&&_.push(new ae(N,o,a,u,m,E,k)),r==null?r=1/0:(o=e-r,a=t-r,u=n-r,m=e+r,E=t+r,k=n+r,r*=r);M=_.pop();)if(!(!(N=M.node)||(s=M.x0)>m||(h=M.y0)>E||(d=M.z0)>k||(p=M.x1)<o||(y=M.y1)<a||(w=M.z1)<u))if(N.length){var T=(s+p)/2,S=(h+y)/2,R=(d+w)/2;_.push(new ae(N[7],T,S,R,p,y,w),new ae(N[6],s,S,R,T,y,w),new ae(N[5],T,h,R,p,S,w),new ae(N[4],s,h,R,T,S,w),new ae(N[3],T,S,d,p,y,R),new ae(N[2],s,S,d,T,y,R),new ae(N[1],T,h,d,p,S,R),new ae(N[0],s,h,d,T,S,R)),(z=(n>=R)<<2|(t>=S)<<1|e>=T)&&(M=_[_.length-1],_[_.length-1]=_[_.length-1-z],_[_.length-1-z]=M)}else{var U=e-+this._x.call(null,N.data),Y=t-+this._y.call(null,N.data),te=n-+this._z.call(null,N.data),ne=U*U+Y*Y+te*te;if(ne<r){var J=Math.sqrt(r=ne);o=e-J,a=t-J,u=n-J,m=e+J,E=t+J,k=n+J,i=N.data}}return i}function dh(e){if(isNaN(y=+this._x.call(null,e))||isNaN(w=+this._y.call(null,e))||isNaN(m=+this._z.call(null,e)))return this;var t,n=this._root,r,i,o,a=this._x0,u=this._y0,s=this._z0,h=this._x1,d=this._y1,p=this._z1,y,w,m,E,k,_,N,M,z,T,S;if(!n)return this;if(n.length)for(;;){if((N=y>=(E=(a+h)/2))?a=E:h=E,(M=w>=(k=(u+d)/2))?u=k:d=k,(z=m>=(_=(s+p)/2))?s=_:p=_,t=n,!(n=n[T=z<<2|M<<1|N]))return this;if(!n.length)break;(t[T+1&7]||t[T+2&7]||t[T+3&7]||t[T+4&7]||t[T+5&7]||t[T+6&7]||t[T+7&7])&&(r=t,S=T)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[T]=o:delete t[T],(n=t[0]||t[1]||t[2]||t[3]||t[4]||t[5]||t[6]||t[7])&&n===(t[7]||t[6]||t[5]||t[4]||t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[S]=n:this._root=n),this):(this._root=o,this)}function ph(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function gh(){return this._root}function vh(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function _h(e){var t=[],n,r=this._root,i,o,a,u,s,h,d;for(r&&t.push(new ae(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=t.pop();)if(!e(r=n.node,o=n.x0,a=n.y0,u=n.z0,s=n.x1,h=n.y1,d=n.z1)&&r.length){var p=(o+s)/2,y=(a+h)/2,w=(u+d)/2;(i=r[7])&&t.push(new ae(i,p,y,w,s,h,d)),(i=r[6])&&t.push(new ae(i,o,y,w,p,h,d)),(i=r[5])&&t.push(new ae(i,p,a,w,s,y,d)),(i=r[4])&&t.push(new ae(i,o,a,w,p,y,d)),(i=r[3])&&t.push(new ae(i,p,y,u,s,h,w)),(i=r[2])&&t.push(new ae(i,o,y,u,p,h,w)),(i=r[1])&&t.push(new ae(i,p,a,u,s,y,w)),(i=r[0])&&t.push(new ae(i,o,a,u,p,y,w))}return this}function mh(e){var t=[],n=[],r;for(this._root&&t.push(new ae(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=t.pop();){var i=r.node;if(i.length){var o,a=r.x0,u=r.y0,s=r.z0,h=r.x1,d=r.y1,p=r.z1,y=(a+h)/2,w=(u+d)/2,m=(s+p)/2;(o=i[0])&&t.push(new ae(o,a,u,s,y,w,m)),(o=i[1])&&t.push(new ae(o,y,u,s,h,w,m)),(o=i[2])&&t.push(new ae(o,a,w,s,y,d,m)),(o=i[3])&&t.push(new ae(o,y,w,s,h,d,m)),(o=i[4])&&t.push(new ae(o,a,u,m,y,w,p)),(o=i[5])&&t.push(new ae(o,y,u,m,h,w,p)),(o=i[6])&&t.push(new ae(o,a,w,m,y,d,p)),(o=i[7])&&t.push(new ae(o,y,w,m,h,d,p))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function yh(e){return e[0]}function bh(e){return arguments.length?(this._x=e,this):this._x}function wh(e){return e[1]}function xh(e){return arguments.length?(this._y=e,this):this._y}function kh(e){return e[2]}function Eh(e){return arguments.length?(this._z=e,this):this._z}function wi(e,t,n,r){var i=new Bn(t??yh,n??wh,r??kh,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function Bn(e,t,n,r,i,o,a,u,s){this._x=e,this._y=t,this._z=n,this._x0=r,this._y0=i,this._z0=o,this._x1=a,this._y1=u,this._z1=s,this._root=void 0}function xi(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var xe=wi.prototype=Bn.prototype;xe.copy=function(){var e=new Bn(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=xi(t),e;for(n=[{source:t,target:e._root=new Array(8)}];t=n.pop();)for(var i=0;i<8;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(8)}):t.target[i]=xi(r));return e},xe.add=sh,xe.addAll=uh,xe.cover=ch,xe.data=hh,xe.extent=lh,xe.find=fh,xe.remove=dh,xe.removeAll=ph,xe.root=gh,xe.size=vh,xe.visit=_h,xe.visitAfter=mh,xe.x=bh,xe.y=xh,xe.z=Eh;function kt(e){return function(){return e}}function qe(e){return(e()-.5)*1e-6}function Nh(e){return e.index}function ki(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function $h(e){var t=Nh,n=y,r,i=kt(30),o,a,u,s,h,d,p=1;e==null&&(e=[]);function y(_){return 1/Math.min(s[_.source.index],s[_.target.index])}function w(_){for(var N=0,M=e.length;N<p;++N)for(var z=0,T,S,R,U=0,Y=0,te=0,ne,J;z<M;++z)T=e[z],S=T.source,R=T.target,U=R.x+R.vx-S.x-S.vx||qe(d),u>1&&(Y=R.y+R.vy-S.y-S.vy||qe(d)),u>2&&(te=R.z+R.vz-S.z-S.vz||qe(d)),ne=Math.sqrt(U*U+Y*Y+te*te),ne=(ne-o[z])/ne*_*r[z],U*=ne,Y*=ne,te*=ne,R.vx-=U*(J=h[z]),u>1&&(R.vy-=Y*J),u>2&&(R.vz-=te*J),S.vx+=U*(J=1-J),u>1&&(S.vy+=Y*J),u>2&&(S.vz+=te*J)}function m(){if(a){var _,N=a.length,M=e.length,z=new Map(a.map((S,R)=>[t(S,R,a),S])),T;for(_=0,s=new Array(N);_<M;++_)T=e[_],T.index=_,typeof T.source!="object"&&(T.source=ki(z,T.source)),typeof T.target!="object"&&(T.target=ki(z,T.target)),s[T.source.index]=(s[T.source.index]||0)+1,s[T.target.index]=(s[T.target.index]||0)+1;for(_=0,h=new Array(M);_<M;++_)T=e[_],h[_]=s[T.source.index]/(s[T.source.index]+s[T.target.index]);r=new Array(M),E(),o=new Array(M),k()}}function E(){if(a)for(var _=0,N=e.length;_<N;++_)r[_]=+n(e[_],_,e)}function k(){if(a)for(var _=0,N=e.length;_<N;++_)o[_]=+i(e[_],_,e)}return w.initialize=function(_,...N){a=_,d=N.find(M=>typeof M=="function")||Math.random,u=N.find(M=>[1,2,3].includes(M))||2,m()},w.links=function(_){return arguments.length?(e=_,m(),w):e},w.id=function(_){return arguments.length?(t=_,w):t},w.iterations=function(_){return arguments.length?(p=+_,w):p},w.strength=function(_){return arguments.length?(n=typeof _=="function"?_:kt(+_),E(),w):n},w.distance=function(_){return arguments.length?(i=typeof _=="function"?_:kt(+_),k(),w):i},w}var Mh={value:()=>{}};function Ei(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new en(n)}function en(e){this._=e}function zh(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}en.prototype=Ei.prototype={constructor:en,on:function(e,t){var n=this._,r=zh(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=Th(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=Ni(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Ni(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new en(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Th(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Ni(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Mh,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ht=0,Et=0,Nt=0,$i=1e3,tn,$t,nn=0,it=0,rn=0,Mt=typeof performance=="object"&&performance.now?performance:Date,Mi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function zi(){return it||(Mi(Ih),it=Mt.now()+rn)}function Ih(){it=0}function jn(){this._call=this._time=this._next=null}jn.prototype=Ti.prototype={constructor:jn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?zi():+n)+(t==null?0:+t),!this._next&&$t!==this&&($t?$t._next=this:tn=this,$t=this),this._call=e,this._time=n,Rn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rn())}};function Ti(e,t,n){var r=new jn;return r.restart(e,t,n),r}function Ch(){zi(),++ht;for(var e=tn,t;e;)(t=it-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ht}function Ii(){it=(nn=Mt.now())+rn,ht=Et=0;try{Ch()}finally{ht=0,Oh(),it=0}}function Sh(){var e=Mt.now(),t=e-nn;t>$i&&(rn-=t,nn=e)}function Oh(){for(var e,t=tn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:tn=n);$t=e,Rn(r)}function Rn(e){if(!ht){Et&&(Et=clearTimeout(Et));var t=e-it;t>24?(e<1/0&&(Et=setTimeout(Ii,e-Mt.now()-rn)),Nt&&(Nt=clearInterval(Nt))):(Nt||(nn=Mt.now(),Nt=setInterval(Sh,$i)),ht=1,Mi(Ii))}}const Ph=1664525,Ah=1013904223,Ci=4294967296;function Fh(){let e=1;return()=>(e=(Ph*e+Ah)%Ci)/Ci}var Si=3;function Dn(e){return e.x}function Oi(e){return e.y}function Zh(e){return e.z}var Lh=10,Bh=Math.PI*(3-Math.sqrt(5)),jh=Math.PI*20/(9+Math.sqrt(221));function Rh(e,t){t=t||2;var n=Math.min(Si,Math.max(1,Math.round(t))),r,i=1,o=.001,a=1-Math.pow(o,1/300),u=0,s=.6,h=new Map,d=Ti(w),p=Ei("tick","end"),y=Fh();e==null&&(e=[]);function w(){m(),p.call("tick",r),i<o&&(d.stop(),p.call("end",r))}function m(_){var N,M=e.length,z;_===void 0&&(_=1);for(var T=0;T<_;++T)for(i+=(u-i)*a,h.forEach(function(S){S(i)}),N=0;N<M;++N)z=e[N],z.fx==null?z.x+=z.vx*=s:(z.x=z.fx,z.vx=0),n>1&&(z.fy==null?z.y+=z.vy*=s:(z.y=z.fy,z.vy=0)),n>2&&(z.fz==null?z.z+=z.vz*=s:(z.z=z.fz,z.vz=0));return r}function E(){for(var _=0,N=e.length,M;_<N;++_){if(M=e[_],M.index=_,M.fx!=null&&(M.x=M.fx),M.fy!=null&&(M.y=M.fy),M.fz!=null&&(M.z=M.fz),isNaN(M.x)||n>1&&isNaN(M.y)||n>2&&isNaN(M.z)){var z=Lh*(n>2?Math.cbrt(.5+_):n>1?Math.sqrt(.5+_):_),T=_*Bh,S=_*jh;n===1?M.x=z:n===2?(M.x=z*Math.cos(T),M.y=z*Math.sin(T)):(M.x=z*Math.sin(T)*Math.cos(S),M.y=z*Math.cos(T),M.z=z*Math.sin(T)*Math.sin(S))}(isNaN(M.vx)||n>1&&isNaN(M.vy)||n>2&&isNaN(M.vz))&&(M.vx=0,n>1&&(M.vy=0),n>2&&(M.vz=0))}}function k(_){return _.initialize&&_.initialize(e,y,n),_}return E(),r={tick:m,restart:function(){return d.restart(w),r},stop:function(){return d.stop(),r},numDimensions:function(_){return arguments.length?(n=Math.min(Si,Math.max(1,Math.round(_))),h.forEach(k),r):n},nodes:function(_){return arguments.length?(e=_,E(),h.forEach(k),r):e},alpha:function(_){return arguments.length?(i=+_,r):i},alphaMin:function(_){return arguments.length?(o=+_,r):o},alphaDecay:function(_){return arguments.length?(a=+_,r):+a},alphaTarget:function(_){return arguments.length?(u=+_,r):u},velocityDecay:function(_){return arguments.length?(s=1-_,r):1-s},randomSource:function(_){return arguments.length?(y=_,h.forEach(k),r):y},force:function(_,N){return arguments.length>1?(N==null?h.delete(_):h.set(_,k(N)),r):h.get(_)},find:function(){var _=Array.prototype.slice.call(arguments),N=_.shift()||0,M=(n>1?_.shift():null)||0,z=(n>2?_.shift():null)||0,T=_.shift()||1/0,S=0,R=e.length,U,Y,te,ne,J,ke;for(T*=T,S=0;S<R;++S)J=e[S],U=N-J.x,Y=M-(J.y||0),te=z-(J.z||0),ne=U*U+Y*Y+te*te,ne<T&&(ke=J,T=ne);return ke},on:function(_,N){return arguments.length>1?(p.on(_,N),r):p.on(_)}}}function Dh(){var e,t,n,r,i,o=kt(-30),a,u=1,s=1/0,h=.81;function d(m){var E,k=e.length,_=(t===1?gi(e,Dn):t===2?mi(e,Dn,Oi):t===3?wi(e,Dn,Oi,Zh):null).visitAfter(y);for(i=m,E=0;E<k;++E)n=e[E],_.visit(w)}function p(){if(e){var m,E=e.length,k;for(a=new Array(E),m=0;m<E;++m)k=e[m],a[k.index]=+o(k,m,e)}}function y(m){var E=0,k,_,N=0,M,z,T,S,R=m.length;if(R){for(M=z=T=S=0;S<R;++S)(k=m[S])&&(_=Math.abs(k.value))&&(E+=k.value,N+=_,M+=_*(k.x||0),z+=_*(k.y||0),T+=_*(k.z||0));E*=Math.sqrt(4/R),m.x=M/N,t>1&&(m.y=z/N),t>2&&(m.z=T/N)}else{k=m,k.x=k.data.x,t>1&&(k.y=k.data.y),t>2&&(k.z=k.data.z);do E+=a[k.data.index];while(k=k.next)}m.value=E}function w(m,E,k,_,N){if(!m.value)return!0;var M=[k,_,N][t-1],z=m.x-n.x,T=t>1?m.y-n.y:0,S=t>2?m.z-n.z:0,R=M-E,U=z*z+T*T+S*S;if(R*R/h<U)return U<s&&(z===0&&(z=qe(r),U+=z*z),t>1&&T===0&&(T=qe(r),U+=T*T),t>2&&S===0&&(S=qe(r),U+=S*S),U<u&&(U=Math.sqrt(u*U)),n.vx+=z*m.value*i/U,t>1&&(n.vy+=T*m.value*i/U),t>2&&(n.vz+=S*m.value*i/U)),!0;if(m.length||U>=s)return;(m.data!==n||m.next)&&(z===0&&(z=qe(r),U+=z*z),t>1&&T===0&&(T=qe(r),U+=T*T),t>2&&S===0&&(S=qe(r),U+=S*S),U<u&&(U=Math.sqrt(u*U)));do m.data!==n&&(R=a[m.data.index]*i/U,n.vx+=z*R,t>1&&(n.vy+=T*R),t>2&&(n.vz+=S*R));while(m=m.next)}return d.initialize=function(m,...E){e=m,r=E.find(k=>typeof k=="function")||Math.random,t=E.find(k=>[1,2,3].includes(k))||2,p()},d.strength=function(m){return arguments.length?(o=typeof m=="function"?m:kt(+m),p(),d):o},d.distanceMin=function(m){return arguments.length?(u=m*m,d):Math.sqrt(u)},d.distanceMax=function(m){return arguments.length?(s=m*m,d):Math.sqrt(s)},d.theta=function(m){return arguments.length?(h=m*m,d):Math.sqrt(h)},d}function Un(e){return typeof e=="object"&&e!==null&&"index"in e&&typeof e.index=="number"&&"x"in e&&typeof e.x=="number"&&"y"in e&&typeof e.y=="number"&&"z"in e&&typeof e.z=="number"&&"vx"in e&&typeof e.vx=="number"&&"vy"in e&&typeof e.vy=="number"&&"vz"in e&&typeof e.vz=="number"}function Uh(e){return!!(typeof e=="object"&&e!==null&&Object.hasOwn(e,"index")&&"index"in e&&typeof e.index=="number"&&"source"in e&&Un(e.source)&&"target"in e&&Un(e.target))}class qh{constructor(){L(this,"d3ForceLayout");L(this,"d3AlphaMin",.1);L(this,"d3AlphaTarget",0);L(this,"d3AlphaDecay",.0228);L(this,"d3VelocityDecay",.4);L(this,"nodeMapping",new Map);L(this,"edgeMapping",new Map);L(this,"newNodeMap",new Map);L(this,"newEdgeMap",new Map);L(this,"reheat",!1);this.d3ForceLayout=Rh().numDimensions(3).alpha(1).force("link",$h()).force("charge",Dh()).force("center",Ic()).force("dagRadial",null).stop(),this.d3ForceLayout.force("link").id(t=>t.id)}get graphNeedsRefresh(){return!!this.newNodeMap.size||!!this.newEdgeMap.size}async init(){}refresh(){if(this.graphNeedsRefresh||this.reheat){let t=[...this.nodeMapping.values()];t=t.concat([...this.newNodeMap.values()]),this.d3ForceLayout.alpha(1).nodes(t).stop();for(const r of this.newNodeMap.entries()){const i=r[0],o=r[1];if(!Un(o))throw new Error("Internal error: Node is not settled as a complete D3 Node");this.nodeMapping.set(i,o)}this.newNodeMap.clear();let n=[...this.edgeMapping.values()];n=n.concat([...this.newEdgeMap.values()]),this.d3ForceLayout.force("link").links(n);for(const r of this.newEdgeMap.entries()){const i=r[0],o=r[1];if(!Uh(o))throw new Error("Internal error: Edge is not settled as a complete D3 Edge");this.edgeMapping.set(i,o)}this.newEdgeMap.clear()}}step(){this.refresh(),this.d3ForceLayout.tick()}get isSettled(){return console.log(`this.d3ForceLayout.alpha() ${this.d3ForceLayout.alpha()}`),this.d3ForceLayout.alpha()<this.d3AlphaMin}addNode(t){this.newNodeMap.set(t,{id:t.id})}addEdge(t){this.newEdgeMap.set(t,{source:t.srcId,target:t.dstId})}get nodes(){return this.nodeMapping.keys()}get edges(){return this.edgeMapping.keys()}getNodePosition(t){const n=this._getMappedNode(t);if(n.x===void 0||n.y===void 0||n.z===void 0)throw new Error("Internal error: Node not initialized in D3GraphEngine");return{x:n.x,y:n.y,z:n.z}}setNodePosition(t,n){const r=this._getMappedNode(t);r.x=n.x,r.y=n.y,r.z=n.z??0,this.reheat=!0}getEdgePosition(t){const n=this._getMappedEdge(t);return{src:{x:n.source.x,y:n.source.y,z:n.source.z},dst:{x:n.target.x,y:n.target.y,z:n.target.z}}}pin(t){const n=this._getMappedNode(t);n.fx=n.x,n.fy=n.y,n.fz=n.z,this.reheat=!0}unpin(t){const n=this._getMappedNode(t);n.fx=void 0,n.fy=void 0,n.fz=void 0,this.reheat=!0}_getMappedNode(t){this.refresh();const n=this.nodeMapping.get(t);if(!n)throw new Error("Internal error: Node not found in D3GraphEngine");return n}_getMappedEdge(t){this.refresh();const n=this.edgeMapping.get(t);if(!n)throw new Error("Internal error: Edge not found in D3GraphEngine");return n}}const Pi=new Map;class Gh{constructor(){L(this,"hits",0);L(this,"misses",0)}get(t,n){let r=Pi.get(t);return r?(this.hits++,r.createInstance(t)):(this.misses++,r=n(),r.isVisible=!1,Pi.set(t,r),r.createInstance(t))}reset(){this.hits=0,this.misses=0}}var on=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function an(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qn=function(t){Kh(t);var n=Hh(t);return t.on=n.on,t.off=n.off,t.fire=n.fire,t};function Hh(e){var t=Object.create(null);return{on:function(n,r,i){if(typeof r!="function")throw new Error("callback is expected to be a function");var o=t[n];return o||(o=t[n]=[]),o.push({callback:r,ctx:i}),e},off:function(n,r){var i=typeof n>"u";if(i)return t=Object.create(null),e;if(t[n]){var o=typeof r!="function";if(o)delete t[n];else for(var a=t[n],u=0;u<a.length;++u)a[u].callback===r&&a.splice(u,1)}return e},fire:function(n){var r=t[n];if(!r)return e;var i;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var o=0;o<r.length;++o){var a=r[o];a.callback.apply(a.ctx,i)}return e}}}function Kh(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var t=["on","fire","off"],n=0;n<t.length;++n)if(e.hasOwnProperty(t[n]))throw new Error("Subject cannot be eventified, since it already has property '"+t[n]+"'")}var Vh=Jh,Wh=qn;function Jh(e){if(e=e||{},"uniqueLinkId"in e&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),e.multigraph=e.uniqueLinkId),e.multigraph===void 0&&(e.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var t=new Map,n=new Map,r={},i=0,o=e.multigraph?z:M,a=[],u=F,s=F,h=F,d=F,p={version:20,addNode:E,addLink:N,removeLink:U,removeNode:_,getNode:k,getNodeCount:T,getLinkCount:S,getEdgeCount:S,getLinksCount:S,getNodesCount:T,getLinks:R,forEachNode:Ee,forEachLinkedNode:ke,forEachLink:J,beginUpdate:h,endUpdate:d,clear:ne,hasLink:te,hasNode:k,getLink:te};return Wh(p),y(),p;function y(){var Z=p.on;p.on=D;function D(){return p.beginUpdate=h=ie,p.endUpdate=d=be,u=w,s=m,p.on=Z,Z.apply(p,arguments)}}function w(Z,D){a.push({link:Z,changeType:D})}function m(Z,D){a.push({node:Z,changeType:D})}function E(Z,D){if(Z===void 0)throw new Error("Invalid node identifier");h();var W=k(Z);return W?(W.data=D,s(W,"update")):(W=new Qh(Z,D),s(W,"add")),t.set(Z,W),d(),W}function k(Z){return t.get(Z)}function _(Z){var D=k(Z);if(!D)return!1;h();var W=D.links;return W&&(W.forEach(Y),D.links=null),t.delete(Z),s(D,"remove"),d(),!0}function N(Z,D,W){h();var G=k(Z)||E(Z),ce=k(D)||E(D),ue=o(Z,D,W),ge=n.has(ue.id);return n.set(ue.id,ue),Ai(G,ue),Z!==D&&Ai(ce,ue),u(ue,ge?"update":"add"),d(),ue}function M(Z,D,W){var G=sn(Z,D),ce=n.get(G);return ce?(ce.data=W,ce):new Fi(Z,D,W,G)}function z(Z,D,W){var G=sn(Z,D),ce=r.hasOwnProperty(G);if(ce||te(Z,D)){ce||(r[G]=0);var ue="@"+ ++r[G];G=sn(Z+ue,D+ue)}return new Fi(Z,D,W,G)}function T(){return t.size}function S(){return n.size}function R(Z){var D=k(Z);return D?D.links:null}function U(Z,D){return D!==void 0&&(Z=te(Z,D)),Y(Z)}function Y(Z){if(!Z||!n.get(Z.id))return!1;h(),n.delete(Z.id);var D=k(Z.fromId),W=k(Z.toId);return D&&D.links.delete(Z),W&&W.links.delete(Z),u(Z,"remove"),d(),!0}function te(Z,D){if(!(Z===void 0||D===void 0))return n.get(sn(Z,D))}function ne(){h(),Ee(function(Z){_(Z.id)}),d()}function J(Z){if(typeof Z=="function")for(var D=n.values(),W=D.next();!W.done;){if(Z(W.value))return!0;W=D.next()}}function ke(Z,D,W){var G=k(Z);if(G&&G.links&&typeof D=="function")return W?C(G.links,Z,D):O(G.links,Z,D)}function O(Z,D,W){for(var G,ce=Z.values(),ue=ce.next();!ue.done;){var ge=ue.value,Ye=ge.fromId===D?ge.toId:ge.fromId;if(G=W(t.get(Ye),ge),G)return!0;ue=ce.next()}}function C(Z,D,W){for(var G,ce=Z.values(),ue=ce.next();!ue.done;){var ge=ue.value;if(ge.fromId===D&&(G=W(t.get(ge.toId),ge),G))return!0;ue=ce.next()}}function F(){}function ie(){i+=1}function be(){i-=1,i===0&&a.length>0&&(p.fire("changed",a),a.length=0)}function Ee(Z){if(typeof Z!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+Z);for(var D=t.values(),W=D.next();!W.done;){if(Z(W.value))return!0;W=D.next()}}}function Qh(e,t){this.id=e,this.links=null,this.data=t}function Ai(e,t){e.links?e.links.add(t):e.links=new Set([t])}function Fi(e,t,n,r){this.fromId=e,this.toId=t,this.data=n,this.id=r}function sn(e,t){return e.toString()+" "+t.toString()}const Yh=an(Vh);var Gn={exports:{}},zt={exports:{}},Zi=function(t){return t===0?"x":t===1?"y":t===2?"z":"c"+(t+1)};const Xh=Zi;var lt=function(t){return n;function n(r,i){let o=i&&i.indent||0,a=i&&i.join!==void 0?i.join:`
`,u=Array(o+1).join(" "),s=[];for(let h=0;h<t;++h){let d=Xh(h),p=h===0?"":u;s.push(p+r.replace(/{var}/g,d))}return s.join(a)}};const Li=lt;zt.exports=el,zt.exports.generateCreateBodyFunctionBody=Bi,zt.exports.getVectorCode=Ri,zt.exports.getBodyCode=ji;function el(e,t){let n=Bi(e,t),{Body:r}=new Function(n)();return r}function Bi(e,t){return`
${Ri(e,t)}
${ji(e)}
return {Body: Body, Vector: Vector};
`}function ji(e){let t=Li(e),n=t("{var}",{join:", "});return`
function Body(${n}) {
  this.isPinned = false;
  this.pos = new Vector(${n});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${n}) {
  ${t("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function Ri(e,t){let n=Li(e),r="";return t&&(r=`${n(`
   var v{var};
Object.defineProperty(this, '{var}', {
  set: function(v) { 
    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');
    v{var} = v; 
  },
  get: function() { return v{var}; }
});`)}`),`function Vector(${n("{var}",{join:", "})}) {
  ${r}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${n('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${n("this.{var} = v.{var};",{indent:4})}
    } else {
      ${n('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${n("this.{var} = ",{join:""})}0;
  };`}var tl=zt.exports,Je={exports:{}};const Hn=lt,Qe=Zi;Je.exports=nl,Je.exports.generateQuadTreeFunctionBody=Di,Je.exports.getInsertStackCode=Ki,Je.exports.getQuadNodeCode=Hi,Je.exports.isSamePosition=Ui,Je.exports.getChildBodyCode=Gi,Je.exports.setChildBodyCode=qi;function nl(e){let t=Di(e);return new Function(t)()}function Di(e){let t=Hn(e),n=Math.pow(2,e);return`
${Ki()}
${Hi(e)}
${Ui(e)}
${Gi(e)}
${qi(e)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${a("      node.")}
      node.body = null;
      node.mass = ${t("node.mass_{var} = ",{join:""})}0;
      ${t("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${t("var d{var};",{indent:4})}
    var r; 
    ${t("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${t("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${t("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${t("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${t("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${t("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < , treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${Qe(0)} - node.min_${Qe(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${t("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${o()}
        }
      }
    }

    ${t("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${t("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${t("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${t("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${t("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${t("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${t("root.min_{var} = {var}min;",{indent:4})}
    ${t("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${t("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${t("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${t("var min_{var} = node.min_{var};",{indent:8})}
        ${t("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${i(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${t("child.min_{var} = min_{var};",{indent:10})}
          ${t("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${t("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${t("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`;function i(u){let s=[],h=Array(u+1).join(" ");for(let d=0;d<e;++d)s.push(h+`if (${Qe(d)} > max_${Qe(d)}) {`),s.push(h+`  quadIdx = quadIdx + ${Math.pow(2,d)};`),s.push(h+`  min_${Qe(d)} = max_${Qe(d)};`),s.push(h+`  max_${Qe(d)} = node.max_${Qe(d)};`),s.push(h+"}");return s.join(`
`)}function o(){let u=Array(11).join(" "),s=[];for(let h=0;h<n;++h)s.push(u+`if (node.quad${h}) {`),s.push(u+`  queue[pushIdx] = node.quad${h};`),s.push(u+"  queueLength += 1;"),s.push(u+"  pushIdx += 1;"),s.push(u+"}");return s.join(`
`)}function a(u){let s=[];for(let h=0;h<n;++h)s.push(`${u}quad${h} = null;`);return s.join(`
`)}}function Ui(e){let t=Hn(e);return`
  function isSamePosition(point1, point2) {
    ${t("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${t("d{var} < 1e-8",{join:" && "})};
  }  
`}function qi(e){var t=Math.pow(2,e);return`
function setChild(node, idx, child) {
  ${n()}
}`;function n(){let r=[];for(let i=0;i<t;++i){let o=i===0?"  ":"  else ";r.push(`${o}if (idx === ${i}) node.quad${i} = child;`)}return r.join(`
`)}}function Gi(e){return`function getChild(node, idx) {
${t()}
  return null;
}`;function t(){let n=[],r=Math.pow(2,e);for(let i=0;i<r;++i)n.push(`  if (idx === ${i}) return node.quad${i};`);return n.join(`
`)}}function Hi(e){let t=Hn(e),n=Math.pow(2,e);var r=`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${i("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${t("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${t("this.min_{var} = 0;",{indent:2})}
  ${t("this.max_{var} = 0;",{indent:2})}
}
`;return r;function i(o){let a=[];for(let u=0;u<n;++u)a.push(`${o}quad${u} = null;`);return a.join(`
`)}}function Ki(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}var rl=Je.exports,Kn={exports:{}};Kn.exports=ol,Kn.exports.generateFunctionBody=Vi;const il=lt;function ol(e){let t=Vi(e);return new Function("bodies","settings","random",t)}function Vi(e){let t=il(e);return`
  var boundingBox = {
    ${t("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${t("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${t("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${t("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${t("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${t("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${t("var max_{var} = -Infinity;",{indent:4})}
    ${t("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${t("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${t("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${t("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${t("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${t("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}var al=Kn.exports,Vn={exports:{}};const sl=lt;Vn.exports=ul,Vn.exports.generateCreateDragForceFunctionBody=Wi;function ul(e){let t=Wi(e);return new Function("options",t)}function Wi(e){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${sl(e)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}var cl=Vn.exports,Wn={exports:{}};const hl=lt;Wn.exports=ll,Wn.exports.generateCreateSpringForceFunctionBody=Ji;function ll(e){let t=Ji(e);return new Function("options","random",t)}function Ji(e){let t=hl(e);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${t("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${t("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${t("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${t("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}var fl=Wn.exports,Jn={exports:{}};const dl=lt;Jn.exports=pl,Jn.exports.generateIntegratorFunctionBody=Qi;function pl(e){let t=Qi(e);return new Function("bodies","timeStep","adaptiveTimeStepWeight",t)}function Qi(e){let t=dl(e);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${t("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${t("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${t("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${t("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${t("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${t("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${t("body.pos.{var} += d{var};",{indent:4})}

    ${t("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${t("t{var} * t{var}",{join:" + "})})/length;
`}var gl=Jn.exports,Qn,Yi;function vl(){if(Yi)return Qn;Yi=1,Qn=e;function e(t,n,r,i){this.from=t,this.to=n,this.length=r,this.coefficient=i}return Qn}var Yn,Xi;function _l(){if(Xi)return Yn;Xi=1,Yn=e;function e(t,n){var r;if(t||(t={}),n){for(r in n)if(n.hasOwnProperty(r)){var i=t.hasOwnProperty(r),o=typeof n[r],a=!i||typeof t[r]!==o;a?t[r]=n[r]:o==="object"&&(t[r]=e(t[r],n[r]))}}return t}return Yn}var Tt={exports:{}},eo;function ml(){if(eo)return Tt.exports;eo=1,Tt.exports=e,Tt.exports.random=e,Tt.exports.randomIterator=u;function e(s){var h=typeof s=="number"?s:+new Date;return new t(h)}function t(s){this.seed=s}t.prototype.next=a,t.prototype.nextDouble=o,t.prototype.uniform=o,t.prototype.gaussian=n;function n(){var s,h,d;do h=this.nextDouble()*2-1,d=this.nextDouble()*2-1,s=h*h+d*d;while(s>=1||s===0);return h*Math.sqrt(-2*Math.log(s)/s)}t.prototype.levy=r;function r(){var s=1.5,h=Math.pow(i(1+s)*Math.sin(Math.PI*s/2)/(i((1+s)/2)*s*Math.pow(2,(s-1)/2)),1/s);return this.gaussian()*h/Math.pow(Math.abs(this.gaussian()),1/s)}function i(s){return Math.sqrt(2*Math.PI/s)*Math.pow(1/Math.E*(s+1/(12*s-1/(10*s))),s)}function o(){var s=this.seed;return s=s+2127912214+(s<<12)&4294967295,s=(s^3345072700^s>>>19)&4294967295,s=s+374761393+(s<<5)&4294967295,s=(s+3550635116^s<<9)&4294967295,s=s+4251993797+(s<<3)&4294967295,s=(s^3042594569^s>>>16)&4294967295,this.seed=s,(s&268435455)/268435456}function a(s){return Math.floor(this.nextDouble()*s)}function u(s,h){var d=h||e();if(typeof d.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:y,shuffle:p};function p(){var w,m,E;for(w=s.length-1;w>0;--w)m=d.next(w+1),E=s[m],s[m]=s[w],s[w]=E;return s}function y(w){var m,E,k;for(m=s.length-1;m>0;--m)E=d.next(m+1),k=s[E],s[E]=s[m],s[m]=k,w(k);s.length&&w(s[0])}}return Tt.exports}var to=Nl,yl=tl,bl=rl,wl=al,xl=cl,kl=fl,El=gl,no={};function Nl(e){var t=vl(),n=_l(),r=qn;if(e){if(e.springCoeff!==void 0)throw new Error("springCoeff was renamed to springCoefficient");if(e.dragCoeff!==void 0)throw new Error("dragCoeff was renamed to dragCoefficient")}e=n(e,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var i=no[e.dimensions];if(!i){var o=e.dimensions;i={Body:yl(o,e.debug),createQuadTree:bl(o),createBounds:wl(o),createDragForce:xl(o),createSpringForce:kl(o),integrate:El(o)},no[o]=i}var a=i.Body,u=i.createQuadTree,s=i.createBounds,h=i.createDragForce,d=i.createSpringForce,p=i.integrate,y=C=>new a(C),w=ml().random(42),m=[],E=[],k=u(e,w),_=s(m,e,w),N=d(e,w),M=h(e),z=0,T=[],S=new Map,R=0;te("nbody",ke),te("spring",O);var U={bodies:m,quadTree:k,springs:E,settings:e,addForce:te,removeForce:ne,getForces:J,step:function(){for(var C=0;C<T.length;++C)T[C](R);var F=p(m,e.timeStep,e.adaptiveTimeStepWeight);return R+=1,F},addBody:function(C){if(!C)throw new Error("Body is required");return m.push(C),C},addBodyAt:function(C){if(!C)throw new Error("Body position is required");var F=y(C);return m.push(F),F},removeBody:function(C){if(C){var F=m.indexOf(C);if(!(F<0))return m.splice(F,1),m.length===0&&_.reset(),!0}},addSpring:function(C,F,ie,be){if(!C||!F)throw new Error("Cannot add null spring to force simulator");typeof ie!="number"&&(ie=-1);var Ee=new t(C,F,ie,be>=0?be:-1);return E.push(Ee),Ee},getTotalMovement:function(){return z},removeSpring:function(C){if(C){var F=E.indexOf(C);if(F>-1)return E.splice(F,1),!0}},getBestNewBodyPosition:function(C){return _.getBestNewPosition(C)},getBBox:Y,getBoundingBox:Y,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(C){return C!==void 0?(e.gravity=C,k.options({gravity:C}),this):e.gravity},theta:function(C){return C!==void 0?(e.theta=C,k.options({theta:C}),this):e.theta},random:w};return $l(e,U),r(U),U;function Y(){return _.update(),_.box}function te(C,F){if(S.has(C))throw new Error("Force "+C+" is already added");S.set(C,F),T.push(F)}function ne(C){var F=T.indexOf(S.get(C));F<0||(T.splice(F,1),S.delete(C))}function J(){return S}function ke(){if(m.length!==0){k.insertBodies(m);for(var C=m.length;C--;){var F=m[C];F.isPinned||(F.reset(),k.updateBodyForce(F),M.update(F))}}}function O(){for(var C=E.length;C--;)N.update(E[C])}}function $l(e,t){for(var n in e)Ml(e,t,n)}function Ml(e,t,n){if(e.hasOwnProperty(n)&&typeof t[n]!="function"){var r=Number.isFinite(e[n]);r?t[n]=function(i){if(i!==void 0){if(!Number.isFinite(i))throw new Error("Value of "+n+" should be a valid number.");return e[n]=i,t}return e[n]}:t[n]=function(i){return i!==void 0?(e[n]=i,t):e[n]}}}Gn.exports=Tl,Gn.exports.simulator=to;var zl=qn;function Tl(e,t){if(!e)throw new Error("Graph structure cannot be undefined");var n=t&&t.createSimulator||to,r=n(t);if(Array.isArray(t))throw new Error("Physics settings is expected to be an object");var i=e.version>19?ke:J;t&&typeof t.nodeMass=="function"&&(i=t.nodeMass);var o=new Map,a={},u=0,s=r.settings.springTransform||Il;M(),k();var h=!1,d={step:function(){if(u===0)return p(!0),!0;var O=r.step();d.lastMove=O,d.fire("step");var C=O/u,F=C<=.01;return p(F),F},getNodePosition:function(O){return ne(O).pos},setNodePosition:function(O){var C=ne(O);C.setPosition.apply(C,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(O){var C=a[O];if(C)return{from:C.from.pos,to:C.to.pos}},getGraphRect:function(){return r.getBBox()},forEachBody:y,pinNode:function(O,C){var F=ne(O.id);F.isPinned=!!C},isNodePinned:function(O){return ne(O.id).isPinned},dispose:function(){e.off("changed",N),d.fire("disposed")},getBody:E,getSpring:m,getForceVectorLength:w,simulator:r,graph:e,lastMove:0};return zl(d),d;function p(O){h!==O&&(h=O,_(O))}function y(O){o.forEach(O)}function w(){var O=0,C=0;return y(function(F){O+=Math.abs(F.force.x),C+=Math.abs(F.force.y)}),Math.sqrt(O*O+C*C)}function m(O,C){var F;if(C===void 0)typeof O!="object"?F=O:F=O.id;else{var ie=e.hasLink(O,C);if(!ie)return;F=ie.id}return a[F]}function E(O){return o.get(O)}function k(){e.on("changed",N)}function _(O){d.fire("stable",O)}function N(O){for(var C=0;C<O.length;++C){var F=O[C];F.changeType==="add"?(F.node&&z(F.node.id),F.link&&S(F.link)):F.changeType==="remove"&&(F.node&&T(F.node),F.link&&R(F.link))}u=e.getNodesCount()}function M(){u=0,e.forEachNode(function(O){z(O.id),u+=1}),e.forEachLink(S)}function z(O){var C=o.get(O);if(!C){var F=e.getNode(O);if(!F)throw new Error("initBody() was called with unknown node id");var ie=F.position;if(!ie){var be=U(F);ie=r.getBestNewBodyPosition(be)}C=r.addBodyAt(ie),C.id=O,o.set(O,C),Y(O),te(F)&&(C.isPinned=!0)}}function T(O){var C=O.id,F=o.get(C);F&&(o.delete(C),r.removeBody(F))}function S(O){Y(O.fromId),Y(O.toId);var C=o.get(O.fromId),F=o.get(O.toId),ie=r.addSpring(C,F,O.length);s(O,ie),a[O.id]=ie}function R(O){var C=a[O.id];if(C){var F=e.getNode(O.fromId),ie=e.getNode(O.toId);F&&Y(F.id),ie&&Y(ie.id),delete a[O.id],r.removeSpring(C)}}function U(O){var C=[];if(!O.links)return C;for(var F=Math.min(O.links.length,2),ie=0;ie<F;++ie){var be=O.links[ie],Ee=be.fromId!==O.id?o.get(be.fromId):o.get(be.toId);Ee&&Ee.pos&&C.push(Ee)}return C}function Y(O){var C=o.get(O);if(C.mass=i(O),Number.isNaN(C.mass))throw new Error("Node mass should be a number")}function te(O){return O&&(O.isPinned||O.data&&O.data.isPinned)}function ne(O){var C=o.get(O);return C||(z(O),C=o.get(O)),C}function J(O){var C=e.getLinks(O);return C?1+C.length/3:1}function ke(O){var C=e.getLinks(O);return C?1+C.size/3:1}}function Il(){}var Cl=Gn.exports;const Sl=an(Cl);class Ol{constructor(){L(this,"ngraph");L(this,"ngraphLayout");L(this,"nodeMapping",new Map);L(this,"edgeMapping",new Map);L(this,"_settled",!0);this.ngraph=Yh(),this.ngraphLayout=Sl(this.ngraph,{dimensions:3})}async init(){}step(){this._settled=this.ngraphLayout.step()}get isSettled(){return this._settled}addNode(t){const n=this.ngraph.addNode(t.id,{parentNode:t});this.nodeMapping.set(t,n),this._settled=!1}addEdge(t){const n=this.ngraph.addLink(t.srcId,t.dstId,{parentEdge:this});this.edgeMapping.set(t,n),this._settled=!1}getNodePosition(t){const n=this._getMappedNode(t);return this.ngraphLayout.getNodePosition(n.id)}setNodePosition(t,n){const r=this._getMappedNode(t),i=this.ngraphLayout.getNodePosition(r.id);i.x=n.x,i.y=n.y,i.z=n.z}getEdgePosition(t){const n=this._getMappedEdge(t),r=this.ngraphLayout.getLinkPosition(n.id);return{src:{x:r.from.x,y:r.from.y,z:r.from.z},dst:{x:r.to.x,y:r.to.y,z:r.to.z}}}get nodes(){return this.nodeMapping.keys()}get edges(){return this.edgeMapping.keys()}pin(t){const n=this._getMappedNode(t);this.ngraphLayout.pinNode(n,!0)}unpin(t){const n=this._getMappedNode(t);this.ngraphLayout.pinNode(n,!1)}_getMappedNode(t){const n=this.nodeMapping.get(t);if(!n)throw new Error("Internal error: Node not found in NGraphEngine");return n}_getMappedEdge(t){const n=this.edgeMapping.get(t);if(!n)throw new Error("Internal error: Edge not found in NGraphEngine");return n}}class Pl{constructor(t){L(this,"graph");L(this,"sceneInstrumentation");L(this,"babylonInstrumentation");L(this,"graphStep",new P.PerfCounter);L(this,"nodeUpdate",new P.PerfCounter);L(this,"edgeUpdate",new P.PerfCounter);L(this,"arrowCapUpdate",new P.PerfCounter);L(this,"intersectCalc",new P.PerfCounter);L(this,"loadTime",new P.PerfCounter);L(this,"totalUpdates",0);this.graph=t,this.sceneInstrumentation=new P.SceneInstrumentation(t.scene),this.sceneInstrumentation.captureFrameTime=!0,this.sceneInstrumentation.captureRenderTime=!0,this.sceneInstrumentation.captureInterFrameTime=!0,this.sceneInstrumentation.captureCameraRenderTime=!0,this.sceneInstrumentation.captureActiveMeshesEvaluationTime=!0,this.sceneInstrumentation.captureRenderTargetsRenderTime=!0,this.babylonInstrumentation=new P.EngineInstrumentation(t.engine),this.babylonInstrumentation.captureGPUFrameTime=!0,this.babylonInstrumentation.captureShaderCompilationTime=!0}toString(){let t="";function n(o,a,u=""){t+=`${o}: ${a}${u}
`}function r(o){t+=`
${o}
`;for(let a=0;a<o.length;a++)t+="-";t+=`
`}function i(o,a,u=1){t+=`${o} (min/avg/last sec/max [total]): `,t+=`${(a.min*u).toFixed(2)} / `,t+=`${(a.average*u).toFixed(2)} / `,t+=`${(a.lastSecAverage*u).toFixed(2)} / `,t+=`${(a.max*u).toFixed(2)} `,t+=`[${(a.total*u).toFixed(2)}] ms
`}return r("Graph"),n("Num Nodes",this.numNodes),n("Num Edges",this.numEdges),n("Total Updates",this.totalUpdates),n("Mesh Cache Hits",this.meshCacheHits),n("Mesh Cache Misses",this.meshCacheMisses),n("Number of Node Updates",this.nodeUpdate.count),n("Number of Edge Updates",this.edgeUpdate.count),n("Number of ArrowCap Updates",this.arrowCapUpdate.count),r("Graph Engine Performance"),i("JSON Load Time",this.loadTime),i("Graph Physics Engine Time",this.graphStep),i("Node Update Time",this.nodeUpdate),i("Edge Update Time",this.edgeUpdate),i("Arrow Cap Update Time",this.arrowCapUpdate),i("Ray Intersect Calculation Time",this.intersectCalc),r("BabylonJS Performance"),n("Draw Calls",this.sceneInstrumentation.drawCallsCounter.count),i("GPU Time",this.babylonInstrumentation.gpuFrameTimeCounter,1e-6),i("Shader Time",this.babylonInstrumentation.shaderCompilationTimeCounter),i("Mesh Evaluation Time",this.sceneInstrumentation.activeMeshesEvaluationTimeCounter),i("Render Targets Time",this.sceneInstrumentation.renderTargetsRenderTimeCounter),i("Draw Calls Time",this.sceneInstrumentation.drawCallsCounter),i("Frame Time",this.sceneInstrumentation.frameTimeCounter),i("Render Time",this.sceneInstrumentation.renderTimeCounter),i("Time Between Frames",this.sceneInstrumentation.interFrameTimeCounter),i("Camera Render Time",this.sceneInstrumentation.cameraRenderTimeCounter),t}step(){this.totalUpdates++}reset(){this.totalUpdates=0}get numNodes(){return st.list.size}get numEdges(){return Ce.list.size}get meshCacheHits(){return this.graph.meshCache.hits}get meshCacheMisses(){return this.graph.meshCache.misses}}class Al{constructor(t,n){L(this,"config");L(this,"stats");L(this,"element");L(this,"canvas");L(this,"engine");L(this,"scene");L(this,"camera");L(this,"skybox");L(this,"xrHelper");L(this,"meshCache");L(this,"graphEngineType");L(this,"graphEngine");L(this,"running",!0);L(this,"pinOnDrag");L(this,"fetchNodes");L(this,"fetchEdges");L(this,"graphObservable",new P.Observable);L(this,"nodeObservable",new P.Observable);L(this,"edgeObservable",new P.Observable);if(this.config=Tc(n),this.meshCache=new Gh,this.config.behavior.fetchNodes&&(this.fetchNodes=this.config.behavior.fetchNodes),this.config.behavior.fetchEdges&&(this.fetchEdges=this.config.behavior.fetchEdges),typeof t=="string"){const r=document.getElementById(t);if(!r)throw new Error(`getElementById() could not find element '${t}'`);this.element=r}else if(t instanceof HTMLElement)this.element=t;else throw new TypeError("Graph constructor requires 'element' argument that is either a string specifying the ID of the HTML element or an HTMLElement");if(this.element.innerHTML="",this.canvas=document.createElement("canvas"),this.canvas.setAttribute("id","babylonForceGraphRenderCanvas"),this.canvas.setAttribute("touch-action","none"),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.touchAction="none",this.element.appendChild(this.canvas),this.engine=new P.Engine(this.canvas,!0),this.scene=new P.Scene(this.engine),this.camera=new P.ArcRotateCamera("camera",-Math.PI/2,Math.PI/2.5,this.config.style.startingCameraDistance,new P.Vector3(0,0,0)),delete this.camera.lowerBetaLimit,delete this.camera.upperBetaLimit,this.camera.attachControl(this.canvas,!0),new P.HemisphericLight("light",new P.Vector3(1,1,0)),this.config.style.skybox&&this.config.style.skybox.length&&new P.PhotoDome("testdome",this.config.style.skybox,{resolution:32,size:1e3},this.scene),this.config.engine.type==="ngraph")this.graphEngine=new Ol;else if(this.config.engine.type==="d3")this.graphEngine=new qh;else throw new TypeError(`Unknown graph engine type: '${this.graphEngineType}'`);this.stats=new Pl(this);for(let r=0;r<this.config.engine.preSteps;r++)this.graphEngine.step()}async init(){this.engine.runRenderLoop(()=>{this.update(),this.scene.render()}),Fl();const t=[ro("VR","immersive-vr","local-floor"),ro("AR","immersive-ar","local-floor")];if(navigator.xr){this.xrHelper=await this.scene.createDefaultXRExperienceAsync({uiOptions:{customButtons:t},disableTeleportation:!0}),this.xrHelper.baseExperience.onInitialXRPoseSetObservable.add(r=>{var i;((i=this.xrHelper)==null?void 0:i.baseExperience.sessionManager.sessionMode)==="immersive-ar"&&r.setTransformationFromNonVRCamera(this.camera)});const n=document.querySelector(".xr-button-overlay");n&&(n.style.cssText="z-index:11;position: absolute; right: 20px;bottom: 50px;")}else{const n=Zl(this),r=document.createElement("button");r.classList.add("webxr-button"),r.classList.add("webxr-not-available"),r.innerHTML="VR / AR NOT AVAILABLE",n.appendChild(r),setTimeout(()=>{n.remove()},5e3)}window.addEventListener("resize",()=>{this.engine.resize()})}update(){if(this.running){this.stats.step(),this.stats.graphStep.beginMonitoring();for(let t=0;t<this.config.engine.stepMultiplier;t++)this.graphEngine.step();this.stats.graphStep.endMonitoring(),this.stats.nodeUpdate.beginMonitoring();for(const t of this.graphEngine.nodes)t.update();this.stats.nodeUpdate.endMonitoring(),this.stats.edgeUpdate.beginMonitoring(),Ce.updateRays(this);for(const t of this.graphEngine.edges)t.update();this.stats.edgeUpdate.endMonitoring(),this.graphEngine.isSettled&&(this.graphObservable.notifyObservers({type:"graph-settled",graph:this}),this.running=!1)}}addNode(t,n={}){return this.nodeObservable.notifyObservers({type:"node-add-before",nodeId:t,metadata:n}),st.create(this,t,{nodeMeshConfig:this.config.style.node,pinOnDrag:this.pinOnDrag,metadata:n})}addEdge(t,n,r={}){return this.edgeObservable.notifyObservers({type:"edge-add-before",srcNodeId:t,dstNodeId:n,metadata:r}),Ce.create(this,t,n,{edgeMeshConfig:this.config.style.edge,metadata:r})}addListener(t,n){switch(t){case"graph-settled":this.graphObservable.add(r=>{r.type===t&&n(r)});break;case"node-add-before":this.nodeObservable.add(r=>{r.type===t&&n(r)});break;case"edge-add-before":this.edgeObservable.add(r=>{r.type===t&&n(r)});break;default:throw new TypeError(`Unknown listener type in addListener: ${t}`)}}async loadJsonData(t,n){this.stats.loadTime.beginMonitoring();const{nodeListProp:r,edgeListProp:i,nodeIdProp:o,edgeSrcIdProp:a,edgeDstIdProp:u,fetchOpts:s}=Mc(n),d=await(await fetch(t,s)).json();if(!Array.isArray(d[r]))throw TypeError(`when fetching JSON data: '${r}' was not an Array`);if(!Array.isArray(d[i]))throw TypeError(`when fetching JSON data: '${i}' was not an Array`);for(const p of d[r]){const y=p[o],w=p;this.addNode(y,w)}for(const p of d[i]){const y=p[a],w=p[u],m=p;this.addEdge(y,w,m)}this.stats.loadTime.endMonitoring()}}function ro(e,t,n){t=t||"immersive-vr",n=n||"local-floor";const r=document.createElement("button");r.classList.add("webxr-button"),r.classList.add("webxr-available"),r.innerHTML=e;const i=new P.WebXREnterExitUIButton(r,t,n);return i.update=function(o){o===null?(r.style.display="",r.classList.remove("webxr-presenting")):o===i?(r.style.display="",r.classList.add("webxr-presenting")):r.style.display="none"},i}function Fl(){const e=`
    .webxr-button {
        font-family: 'Verdana', sans-serif;
        font-size: 1em;
        font-weight: bold;
        color: white;
        border: 2px solid white;
        padding: 4px 16px 4px 16px;
        margin-left: 10px;
        border-radius: 8px;
    }

    .webxr-available {
        background: black;
        box-shadow:0 0 0 0px white, 0 0 0 2px black;
    }

    .webxr-presenting {
        background: red;
    }

    .webxr-presenting::before {
        content: "EXIT ";
    }

    .webxr-not-available {
        background: grey;
        box-shadow:0 0 0 0px white, 0 0 0 2px grey;
    }

    .webxr-available:hover {
        transform: scale(1.05);
    } 

    .webxr-available:active {
        background-color: rgba(51,51,51,1);
    } 
    
    .webxr-available:focus {
        background-color: rgba(51,51,51,1);
    }
    
    canvas {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        outline: none;
        -webkit-tap-highlight-color: rgba(255, 255, 255, 0); /* mobile webkit */
    }`,t=document.createElement("style");t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)}function Zl(e){const t=document.createElement("div");t.classList.add("xr-button-overlay"),t.style.cssText="z-index:11;position: absolute; right: 20px;bottom: 50px;";const n=e.scene.getEngine().getInputElement();return n&&n.parentNode&&n.parentNode.appendChild(t),t}class io extends HTMLElement{connectedCallback(){this.innerHTML="<p>Placeholder: Graphty goes here.</p>"}get thing(){return!0}set thing(t){}}window.customElements.define("graphty-core",io);var un={exports:{}};un.exports,function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,o=16,a=9007199254740991,u="[object Arguments]",s="[object Array]",h="[object AsyncFunction]",d="[object Boolean]",p="[object Date]",y="[object Error]",w="[object Function]",m="[object GeneratorFunction]",E="[object Map]",k="[object Number]",_="[object Null]",N="[object Object]",M="[object Proxy]",z="[object RegExp]",T="[object Set]",S="[object String]",R="[object Undefined]",U="[object WeakMap]",Y="[object ArrayBuffer]",te="[object DataView]",ne="[object Float32Array]",J="[object Float64Array]",ke="[object Int8Array]",O="[object Int16Array]",C="[object Int32Array]",F="[object Uint8Array]",ie="[object Uint8ClampedArray]",be="[object Uint16Array]",Ee="[object Uint32Array]",Z=/[\\^$.*+?()[\]{}|]/g,D=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,G={};G[ne]=G[J]=G[ke]=G[O]=G[C]=G[F]=G[ie]=G[be]=G[Ee]=!0,G[u]=G[s]=G[Y]=G[d]=G[te]=G[p]=G[y]=G[w]=G[E]=G[k]=G[N]=G[z]=G[T]=G[S]=G[U]=!1;var ce=typeof on=="object"&&on&&on.Object===Object&&on,ue=typeof self=="object"&&self&&self.Object===Object&&self,ge=ce||ue||Function("return this")(),Ye=t&&!t.nodeType&&t,Fe=Ye&&!0&&e&&!e.nodeType&&e,Re=Fe&&Fe.exports===Ye,Ge=Re&&ce.process,ft=function(){try{var l=Fe&&Fe.require&&Fe.require("util").types;return l||Ge&&Ge.binding&&Ge.binding("util")}catch{}}(),It=ft&&ft.isTypedArray;function cn(l,v,b){switch(b.length){case 0:return l.call(v);case 1:return l.call(v,b[0]);case 2:return l.call(v,b[0],b[1]);case 3:return l.call(v,b[0],b[1],b[2])}return l.apply(v,b)}function er(l,v){for(var b=-1,j=Array(l);++b<l;)j[b]=v(b);return j}function tr(l){return function(v){return l(v)}}function hn(l,v){return l==null?void 0:l[v]}function nr(l,v){return function(b){return l(v(b))}}var Ct=Array.prototype,K=Function.prototype,Xe=Object.prototype,dt=ge["__core-js_shared__"],ot=K.toString,Ze=Xe.hasOwnProperty,ln=function(){var l=/[^.]+$/.exec(dt&&dt.keys&&dt.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),fn=Xe.toString,c=ot.call(Object),f=RegExp("^"+ot.call(Ze).replace(Z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=Re?ge.Buffer:void 0,x=ge.Symbol,I=ge.Uint8Array,B=g?g.allocUnsafe:void 0,V=nr(Object.getPrototypeOf,Object),Q=Object.create,we=Xe.propertyIsEnumerable,Le=Ct.splice,se=x?x.toStringTag:void 0,H=function(){try{var l=ar(Object,"defineProperty");return l({},"",{}),l}catch{}}(),Be=g?g.isBuffer:void 0,dn=Math.max,St=Date.now,Ot=ar(ge,"Map"),et=ar(Object,"create"),Pt=function(){function l(){}return function(v){if(!He(v))return{};if(Q)return Q(v);l.prototype=v;var b=new l;return l.prototype=void 0,b}}();function me(l){var v=-1,b=l==null?0:l.length;for(this.clear();++v<b;){var j=l[v];this.set(j[0],j[1])}}function pn(){this.__data__=et?et(null):{},this.size=0}function At(l){var v=this.has(l)&&delete this.__data__[l];return this.size-=v?1:0,v}function gn(l){var v=this.__data__;if(et){var b=v[l];return b===r?void 0:b}return Ze.call(v,l)?v[l]:void 0}function Ft(l){var v=this.__data__;return et?v[l]!==void 0:Ze.call(v,l)}function Zt(l,v){var b=this.__data__;return this.size+=this.has(l)?0:1,b[l]=et&&v===void 0?r:v,this}me.prototype.clear=pn,me.prototype.delete=At,me.prototype.get=gn,me.prototype.has=Ft,me.prototype.set=Zt;function Ie(l){var v=-1,b=l==null?0:l.length;for(this.clear();++v<b;){var j=l[v];this.set(j[0],j[1])}}function Lt(){this.__data__=[],this.size=0}function vn(l){var v=this.__data__,b=mn(v,l);if(b<0)return!1;var j=v.length-1;return b==j?v.pop():Le.call(v,b,1),--this.size,!0}function _n(l){var v=this.__data__,b=mn(v,l);return b<0?void 0:v[b][1]}function Dl(l){return mn(this.__data__,l)>-1}function Ul(l,v){var b=this.__data__,j=mn(b,l);return j<0?(++this.size,b.push([l,v])):b[j][1]=v,this}Ie.prototype.clear=Lt,Ie.prototype.delete=vn,Ie.prototype.get=_n,Ie.prototype.has=Dl,Ie.prototype.set=Ul;function pt(l){var v=-1,b=l==null?0:l.length;for(this.clear();++v<b;){var j=l[v];this.set(j[0],j[1])}}function ql(){this.size=0,this.__data__={hash:new me,map:new(Ot||Ie),string:new me}}function Gl(l){var v=bn(this,l).delete(l);return this.size-=v?1:0,v}function Hl(l){return bn(this,l).get(l)}function Kl(l){return bn(this,l).has(l)}function Vl(l,v){var b=bn(this,l),j=b.size;return b.set(l,v),this.size+=b.size==j?0:1,this}pt.prototype.clear=ql,pt.prototype.delete=Gl,pt.prototype.get=Hl,pt.prototype.has=Kl,pt.prototype.set=Vl;function gt(l){var v=this.__data__=new Ie(l);this.size=v.size}function Wl(){this.__data__=new Ie,this.size=0}function Jl(l){var v=this.__data__,b=v.delete(l);return this.size=v.size,b}function Ql(l){return this.__data__.get(l)}function Yl(l){return this.__data__.has(l)}function Xl(l,v){var b=this.__data__;if(b instanceof Ie){var j=b.__data__;if(!Ot||j.length<n-1)return j.push([l,v]),this.size=++b.size,this;b=this.__data__=new pt(j)}return b.set(l,v),this.size=b.size,this}gt.prototype.clear=Wl,gt.prototype.delete=Jl,gt.prototype.get=Ql,gt.prototype.has=Yl,gt.prototype.set=Xl;function ef(l,v){var b=cr(l),j=!b&&ur(l),X=!b&&!j&&po(l),re=!b&&!j&&!X&&vo(l),le=b||j||X||re,ee=le?er(l.length,String):[],fe=ee.length;for(var Ae in l)(v||Ze.call(l,Ae))&&!(le&&(Ae=="length"||X&&(Ae=="offset"||Ae=="parent")||re&&(Ae=="buffer"||Ae=="byteLength"||Ae=="byteOffset")||lo(Ae,fe)))&&ee.push(Ae);return ee}function rr(l,v,b){(b!==void 0&&!wn(l[v],b)||b===void 0&&!(v in l))&&ir(l,v,b)}function tf(l,v,b){var j=l[v];(!(Ze.call(l,v)&&wn(j,b))||b===void 0&&!(v in l))&&ir(l,v,b)}function mn(l,v){for(var b=l.length;b--;)if(wn(l[b][0],v))return b;return-1}function ir(l,v,b){v=="__proto__"&&H?H(l,v,{configurable:!0,enumerable:!0,value:b,writable:!0}):l[v]=b}var nf=gf();function yn(l){return l==null?l===void 0?R:_:se&&se in Object(l)?vf(l):xf(l)}function uo(l){return Bt(l)&&yn(l)==u}function rf(l){if(!He(l)||bf(l))return!1;var v=lr(l)?f:D;return v.test($f(l))}function of(l){return Bt(l)&&go(l.length)&&!!G[yn(l)]}function af(l){if(!He(l))return wf(l);var v=fo(l),b=[];for(var j in l)j=="constructor"&&(v||!Ze.call(l,j))||b.push(j);return b}function or(l,v,b,j,X){l!==v&&nf(v,function(re,le){if(X||(X=new gt),He(re))sf(l,v,le,b,or,j,X);else{var ee=j?j(sr(l,le),re,le+"",l,v,X):void 0;ee===void 0&&(ee=re),rr(l,le,ee)}},_o)}function sf(l,v,b,j,X,re,le){var ee=sr(l,b),fe=sr(v,b),Ae=le.get(fe);if(Ae){rr(l,b,Ae);return}var Se=re?re(ee,fe,b+"",l,v,le):void 0,jt=Se===void 0;if(jt){var fr=cr(fe),dr=!fr&&po(fe),yo=!fr&&!dr&&vo(fe);Se=fe,fr||dr||yo?cr(ee)?Se=ee:Mf(ee)?Se=ff(ee):dr?(jt=!1,Se=cf(fe,!0)):yo?(jt=!1,Se=lf(fe,!0)):Se=[]:zf(fe)||ur(fe)?(Se=ee,ur(ee)?Se=Tf(ee):(!He(ee)||lr(ee))&&(Se=_f(fe))):jt=!1}jt&&(le.set(fe,Se),X(Se,fe,j,re,le),le.delete(fe)),rr(l,b,Se)}function co(l,v){return Ef(kf(l,v,mo),l+"")}var uf=H?function(l,v){return H(l,"toString",{configurable:!0,enumerable:!1,value:Sf(v),writable:!0})}:mo;function cf(l,v){if(v)return l.slice();var b=l.length,j=B?B(b):new l.constructor(b);return l.copy(j),j}function hf(l){var v=new l.constructor(l.byteLength);return new I(v).set(new I(l)),v}function lf(l,v){var b=v?hf(l.buffer):l.buffer;return new l.constructor(b,l.byteOffset,l.length)}function ff(l,v){var b=-1,j=l.length;for(v||(v=Array(j));++b<j;)v[b]=l[b];return v}function df(l,v,b,j){var X=!b;b||(b={});for(var re=-1,le=v.length;++re<le;){var ee=v[re],fe=j?j(b[ee],l[ee],ee,b,l):void 0;fe===void 0&&(fe=l[ee]),X?ir(b,ee,fe):tf(b,ee,fe)}return b}function pf(l){return co(function(v,b){var j=-1,X=b.length,re=X>1?b[X-1]:void 0,le=X>2?b[2]:void 0;for(re=l.length>3&&typeof re=="function"?(X--,re):void 0,le&&mf(b[0],b[1],le)&&(re=X<3?void 0:re,X=1),v=Object(v);++j<X;){var ee=b[j];ee&&l(v,ee,j,re)}return v})}function gf(l){return function(v,b,j){for(var X=-1,re=Object(v),le=j(v),ee=le.length;ee--;){var fe=le[l?ee:++X];if(b(re[fe],fe,re)===!1)break}return v}}function ho(l,v,b,j,X,re){return He(l)&&He(v)&&(re.set(v,l),or(l,v,void 0,ho,re),re.delete(v)),l}function bn(l,v){var b=l.__data__;return yf(v)?b[typeof v=="string"?"string":"hash"]:b.map}function ar(l,v){var b=hn(l,v);return rf(b)?b:void 0}function vf(l){var v=Ze.call(l,se),b=l[se];try{l[se]=void 0;var j=!0}catch{}var X=fn.call(l);return j&&(v?l[se]=b:delete l[se]),X}function _f(l){return typeof l.constructor=="function"&&!fo(l)?Pt(V(l)):{}}function lo(l,v){var b=typeof l;return v=v??a,!!v&&(b=="number"||b!="symbol"&&W.test(l))&&l>-1&&l%1==0&&l<v}function mf(l,v,b){if(!He(b))return!1;var j=typeof v;return(j=="number"?hr(b)&&lo(v,b.length):j=="string"&&v in b)?wn(b[v],l):!1}function yf(l){var v=typeof l;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?l!=="__proto__":l===null}function bf(l){return!!ln&&ln in l}function fo(l){var v=l&&l.constructor,b=typeof v=="function"&&v.prototype||Xe;return l===b}function wf(l){var v=[];if(l!=null)for(var b in Object(l))v.push(b);return v}function xf(l){return fn.call(l)}function kf(l,v,b){return v=dn(v===void 0?l.length-1:v,0),function(){for(var j=arguments,X=-1,re=dn(j.length-v,0),le=Array(re);++X<re;)le[X]=j[v+X];X=-1;for(var ee=Array(v+1);++X<v;)ee[X]=j[X];return ee[v]=b(le),cn(l,this,ee)}}function sr(l,v){if(!(v==="constructor"&&typeof l[v]=="function")&&v!="__proto__")return l[v]}var Ef=Nf(uf);function Nf(l){var v=0,b=0;return function(){var j=St(),X=o-(j-b);if(b=j,X>0){if(++v>=i)return arguments[0]}else v=0;return l.apply(void 0,arguments)}}function $f(l){if(l!=null){try{return ot.call(l)}catch{}try{return l+""}catch{}}return""}function wn(l,v){return l===v||l!==l&&v!==v}var ur=uo(function(){return arguments}())?uo:function(l){return Bt(l)&&Ze.call(l,"callee")&&!we.call(l,"callee")},cr=Array.isArray;function hr(l){return l!=null&&go(l.length)&&!lr(l)}function Mf(l){return Bt(l)&&hr(l)}var po=Be||Of;function lr(l){if(!He(l))return!1;var v=yn(l);return v==w||v==m||v==h||v==M}function go(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=a}function He(l){var v=typeof l;return l!=null&&(v=="object"||v=="function")}function Bt(l){return l!=null&&typeof l=="object"}function zf(l){if(!Bt(l)||yn(l)!=N)return!1;var v=V(l);if(v===null)return!0;var b=Ze.call(v,"constructor")&&v.constructor;return typeof b=="function"&&b instanceof b&&ot.call(b)==c}var vo=It?tr(It):of;function Tf(l){return df(l,_o(l))}var If=co(function(l){return l.push(void 0,ho),cn(Cf,void 0,l)});function _o(l){return hr(l)?ef(l,!0):af(l)}var Cf=pf(function(l,v,b,j){or(l,v,b,j)});function Sf(l){return function(){return l}}function mo(l){return l}function Of(){return!1}e.exports=If}(un,un.exports);var Ll=un.exports;const Bl=an(Ll);var oo={};(function(e){(function(t){function n(c){return c!==null?Object.prototype.toString.call(c)==="[object Array]":!1}function r(c){return c!==null?Object.prototype.toString.call(c)==="[object Object]":!1}function i(c,f){if(c===f)return!0;var g=Object.prototype.toString.call(c);if(g!==Object.prototype.toString.call(f))return!1;if(n(c)===!0){if(c.length!==f.length)return!1;for(var x=0;x<c.length;x++)if(i(c[x],f[x])===!1)return!1;return!0}if(r(c)===!0){var I={};for(var B in c)if(hasOwnProperty.call(c,B)){if(i(c[B],f[B])===!1)return!1;I[B]=!0}for(var V in f)if(hasOwnProperty.call(f,V)&&I[V]!==!0)return!1;return!0}return!1}function o(c){if(c===""||c===!1||c===null)return!0;if(n(c)&&c.length===0)return!0;if(r(c)){for(var f in c)if(c.hasOwnProperty(f))return!1;return!0}else return!1}function a(c){for(var f=Object.keys(c),g=[],x=0;x<f.length;x++)g.push(c[f[x]]);return g}var u;typeof String.prototype.trimLeft=="function"?u=function(c){return c.trimLeft()}:u=function(c){return c.match(/^\s*(.*)/)[1]};var s=0,h=1,d=2,p=3,y=4,w=5,m=6,E=7,k=8,_=9,N={0:"number",1:"any",2:"string",3:"array",4:"object",5:"boolean",6:"expression",7:"null",8:"Array<number>",9:"Array<string>"},M="EOF",z="UnquotedIdentifier",T="QuotedIdentifier",S="Rbracket",R="Rparen",U="Comma",Y="Colon",te="Rbrace",ne="Number",J="Current",ke="Expref",O="Pipe",C="Or",F="And",ie="EQ",be="GT",Ee="LT",Z="GTE",D="LTE",W="NE",G="Flatten",ce="Star",ue="Filter",ge="Dot",Ye="Not",Fe="Lbrace",Re="Lbracket",Ge="Lparen",ft="Literal",It={".":ge,"*":ce,",":U,":":Y,"{":Fe,"}":te,"]":S,"(":Ge,")":R,"@":J},cn={"<":!0,">":!0,"=":!0,"!":!0},er={" ":!0,"	":!0,"\n":!0};function tr(c){return c>="a"&&c<="z"||c>="A"&&c<="Z"||c==="_"}function hn(c){return c>="0"&&c<="9"||c==="-"}function nr(c){return c>="a"&&c<="z"||c>="A"&&c<="Z"||c>="0"&&c<="9"||c==="_"}function Ct(){}Ct.prototype={tokenize:function(c){var f=[];this._current=0;for(var g,x,I;this._current<c.length;)if(tr(c[this._current]))g=this._current,x=this._consumeUnquotedIdentifier(c),f.push({type:z,value:x,start:g});else if(It[c[this._current]]!==void 0)f.push({type:It[c[this._current]],value:c[this._current],start:this._current}),this._current++;else if(hn(c[this._current]))I=this._consumeNumber(c),f.push(I);else if(c[this._current]==="[")I=this._consumeLBracket(c),f.push(I);else if(c[this._current]==='"')g=this._current,x=this._consumeQuotedIdentifier(c),f.push({type:T,value:x,start:g});else if(c[this._current]==="'")g=this._current,x=this._consumeRawStringLiteral(c),f.push({type:ft,value:x,start:g});else if(c[this._current]==="`"){g=this._current;var B=this._consumeLiteral(c);f.push({type:ft,value:B,start:g})}else if(cn[c[this._current]]!==void 0)f.push(this._consumeOperator(c));else if(er[c[this._current]]!==void 0)this._current++;else if(c[this._current]==="&")g=this._current,this._current++,c[this._current]==="&"?(this._current++,f.push({type:F,value:"&&",start:g})):f.push({type:ke,value:"&",start:g});else if(c[this._current]==="|")g=this._current,this._current++,c[this._current]==="|"?(this._current++,f.push({type:C,value:"||",start:g})):f.push({type:O,value:"|",start:g});else{var V=new Error("Unknown character:"+c[this._current]);throw V.name="LexerError",V}return f},_consumeUnquotedIdentifier:function(c){var f=this._current;for(this._current++;this._current<c.length&&nr(c[this._current]);)this._current++;return c.slice(f,this._current)},_consumeQuotedIdentifier:function(c){var f=this._current;this._current++;for(var g=c.length;c[this._current]!=='"'&&this._current<g;){var x=this._current;c[x]==="\\"&&(c[x+1]==="\\"||c[x+1]==='"')?x+=2:x++,this._current=x}return this._current++,JSON.parse(c.slice(f,this._current))},_consumeRawStringLiteral:function(c){var f=this._current;this._current++;for(var g=c.length;c[this._current]!=="'"&&this._current<g;){var x=this._current;c[x]==="\\"&&(c[x+1]==="\\"||c[x+1]==="'")?x+=2:x++,this._current=x}this._current++;var I=c.slice(f+1,this._current-1);return I.replace("\\'","'")},_consumeNumber:function(c){var f=this._current;this._current++;for(var g=c.length;hn(c[this._current])&&this._current<g;)this._current++;var x=parseInt(c.slice(f,this._current));return{type:ne,value:x,start:f}},_consumeLBracket:function(c){var f=this._current;return this._current++,c[this._current]==="?"?(this._current++,{type:ue,value:"[?",start:f}):c[this._current]==="]"?(this._current++,{type:G,value:"[]",start:f}):{type:Re,value:"[",start:f}},_consumeOperator:function(c){var f=this._current,g=c[f];if(this._current++,g==="!")return c[this._current]==="="?(this._current++,{type:W,value:"!=",start:f}):{type:Ye,value:"!",start:f};if(g==="<")return c[this._current]==="="?(this._current++,{type:D,value:"<=",start:f}):{type:Ee,value:"<",start:f};if(g===">")return c[this._current]==="="?(this._current++,{type:Z,value:">=",start:f}):{type:be,value:">",start:f};if(g==="="&&c[this._current]==="=")return this._current++,{type:ie,value:"==",start:f}},_consumeLiteral:function(c){this._current++;for(var f=this._current,g=c.length,x;c[this._current]!=="`"&&this._current<g;){var I=this._current;c[I]==="\\"&&(c[I+1]==="\\"||c[I+1]==="`")?I+=2:I++,this._current=I}var B=u(c.slice(f,this._current));return B=B.replace("\\`","`"),this._looksLikeJSON(B)?x=JSON.parse(B):x=JSON.parse('"'+B+'"'),this._current++,x},_looksLikeJSON:function(c){var f='[{"',g=["true","false","null"],x="-0123456789";if(c==="")return!1;if(f.indexOf(c[0])>=0)return!0;if(g.indexOf(c)>=0)return!0;if(x.indexOf(c[0])>=0)try{return JSON.parse(c),!0}catch{return!1}else return!1}};var K={};K[M]=0,K[z]=0,K[T]=0,K[S]=0,K[R]=0,K[U]=0,K[te]=0,K[ne]=0,K[J]=0,K[ke]=0,K[O]=1,K[C]=2,K[F]=3,K[ie]=5,K[be]=5,K[Ee]=5,K[Z]=5,K[D]=5,K[W]=5,K[G]=9,K[ce]=20,K[ue]=21,K[ge]=40,K[Ye]=45,K[Fe]=50,K[Re]=55,K[Ge]=60;function Xe(){}Xe.prototype={parse:function(c){this._loadTokens(c),this.index=0;var f=this.expression(0);if(this._lookahead(0)!==M){var g=this._lookaheadToken(0),x=new Error("Unexpected token type: "+g.type+", value: "+g.value);throw x.name="ParserError",x}return f},_loadTokens:function(c){var f=new Ct,g=f.tokenize(c);g.push({type:M,value:"",start:c.length}),this.tokens=g},expression:function(c){var f=this._lookaheadToken(0);this._advance();for(var g=this.nud(f),x=this._lookahead(0);c<K[x];)this._advance(),g=this.led(x,g),x=this._lookahead(0);return g},_lookahead:function(c){return this.tokens[this.index+c].type},_lookaheadToken:function(c){return this.tokens[this.index+c]},_advance:function(){this.index++},nud:function(c){var f,g,x;switch(c.type){case ft:return{type:"Literal",value:c.value};case z:return{type:"Field",name:c.value};case T:var I={type:"Field",name:c.value};if(this._lookahead(0)===Ge)throw new Error("Quoted identifier not allowed for function names.");return I;case Ye:return g=this.expression(K.Not),{type:"NotExpression",children:[g]};case ce:return f={type:"Identity"},g=null,this._lookahead(0)===S?g={type:"Identity"}:g=this._parseProjectionRHS(K.Star),{type:"ValueProjection",children:[f,g]};case ue:return this.led(c.type,{type:"Identity"});case Fe:return this._parseMultiselectHash();case G:return f={type:G,children:[{type:"Identity"}]},g=this._parseProjectionRHS(K.Flatten),{type:"Projection",children:[f,g]};case Re:return this._lookahead(0)===ne||this._lookahead(0)===Y?(g=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},g)):this._lookahead(0)===ce&&this._lookahead(1)===S?(this._advance(),this._advance(),g=this._parseProjectionRHS(K.Star),{type:"Projection",children:[{type:"Identity"},g]}):this._parseMultiselectList();case J:return{type:J};case ke:return x=this.expression(K.Expref),{type:"ExpressionReference",children:[x]};case Ge:for(var B=[];this._lookahead(0)!==R;)this._lookahead(0)===J?(x={type:J},this._advance()):x=this.expression(0),B.push(x);return this._match(R),B[0];default:this._errorToken(c)}},led:function(c,f){var g;switch(c){case ge:var x=K.Dot;return this._lookahead(0)!==ce?(g=this._parseDotRHS(x),{type:"Subexpression",children:[f,g]}):(this._advance(),g=this._parseProjectionRHS(x),{type:"ValueProjection",children:[f,g]});case O:return g=this.expression(K.Pipe),{type:O,children:[f,g]};case C:return g=this.expression(K.Or),{type:"OrExpression",children:[f,g]};case F:return g=this.expression(K.And),{type:"AndExpression",children:[f,g]};case Ge:for(var I=f.name,B=[],V,Q;this._lookahead(0)!==R;)this._lookahead(0)===J?(V={type:J},this._advance()):V=this.expression(0),this._lookahead(0)===U&&this._match(U),B.push(V);return this._match(R),Q={type:"Function",name:I,children:B},Q;case ue:var we=this.expression(0);return this._match(S),this._lookahead(0)===G?g={type:"Identity"}:g=this._parseProjectionRHS(K.Filter),{type:"FilterProjection",children:[f,g,we]};case G:var Le={type:G,children:[f]},se=this._parseProjectionRHS(K.Flatten);return{type:"Projection",children:[Le,se]};case ie:case W:case be:case Z:case Ee:case D:return this._parseComparator(f,c);case Re:var H=this._lookaheadToken(0);return H.type===ne||H.type===Y?(g=this._parseIndexExpression(),this._projectIfSlice(f,g)):(this._match(ce),this._match(S),g=this._parseProjectionRHS(K.Star),{type:"Projection",children:[f,g]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(c){if(this._lookahead(0)===c)this._advance();else{var f=this._lookaheadToken(0),g=new Error("Expected "+c+", got: "+f.type);throw g.name="ParserError",g}},_errorToken:function(c){var f=new Error("Invalid token ("+c.type+'): "'+c.value+'"');throw f.name="ParserError",f},_parseIndexExpression:function(){if(this._lookahead(0)===Y||this._lookahead(1)===Y)return this._parseSliceExpression();var c={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match(S),c},_projectIfSlice:function(c,f){var g={type:"IndexExpression",children:[c,f]};return f.type==="Slice"?{type:"Projection",children:[g,this._parseProjectionRHS(K.Star)]}:g},_parseSliceExpression:function(){for(var c=[null,null,null],f=0,g=this._lookahead(0);g!==S&&f<3;){if(g===Y)f++,this._advance();else if(g===ne)c[f]=this._lookaheadToken(0).value,this._advance();else{var x=this._lookahead(0),I=new Error("Syntax error, unexpected token: "+x.value+"("+x.type+")");throw I.name="Parsererror",I}g=this._lookahead(0)}return this._match(S),{type:"Slice",children:c}},_parseComparator:function(c,f){var g=this.expression(K[f]);return{type:"Comparator",name:f,children:[c,g]}},_parseDotRHS:function(c){var f=this._lookahead(0),g=[z,T,ce];if(g.indexOf(f)>=0)return this.expression(c);if(f===Re)return this._match(Re),this._parseMultiselectList();if(f===Fe)return this._match(Fe),this._parseMultiselectHash()},_parseProjectionRHS:function(c){var f;if(K[this._lookahead(0)]<10)f={type:"Identity"};else if(this._lookahead(0)===Re)f=this.expression(c);else if(this._lookahead(0)===ue)f=this.expression(c);else if(this._lookahead(0)===ge)this._match(ge),f=this._parseDotRHS(c);else{var g=this._lookaheadToken(0),x=new Error("Sytanx error, unexpected token: "+g.value+"("+g.type+")");throw x.name="ParserError",x}return f},_parseMultiselectList:function(){for(var c=[];this._lookahead(0)!==S;){var f=this.expression(0);if(c.push(f),this._lookahead(0)===U&&(this._match(U),this._lookahead(0)===S))throw new Error("Unexpected token Rbracket")}return this._match(S),{type:"MultiSelectList",children:c}},_parseMultiselectHash:function(){for(var c=[],f=[z,T],g,x,I,B;;){if(g=this._lookaheadToken(0),f.indexOf(g.type)<0)throw new Error("Expecting an identifier token, got: "+g.type);if(x=g.value,this._advance(),this._match(Y),I=this.expression(0),B={type:"KeyValuePair",name:x,value:I},c.push(B),this._lookahead(0)===U)this._match(U);else if(this._lookahead(0)===te){this._match(te);break}}return{type:"MultiSelectHash",children:c}}};function dt(c){this.runtime=c}dt.prototype={search:function(c,f){return this.visit(c,f)},visit:function(c,f){var g,x,I,B,V,Q,we,Le,se,H;switch(c.type){case"Field":return f!==null&&r(f)?(Q=f[c.name],Q===void 0?null:Q):null;case"Subexpression":for(I=this.visit(c.children[0],f),H=1;H<c.children.length;H++)if(I=this.visit(c.children[1],I),I===null)return null;return I;case"IndexExpression":return we=this.visit(c.children[0],f),Le=this.visit(c.children[1],we),Le;case"Index":if(!n(f))return null;var Be=c.value;return Be<0&&(Be=f.length+Be),I=f[Be],I===void 0&&(I=null),I;case"Slice":if(!n(f))return null;var dn=c.children.slice(0),St=this.computeSliceParams(f.length,dn),Ot=St[0],et=St[1],Pt=St[2];if(I=[],Pt>0)for(H=Ot;H<et;H+=Pt)I.push(f[H]);else for(H=Ot;H>et;H+=Pt)I.push(f[H]);return I;case"Projection":var me=this.visit(c.children[0],f);if(!n(me))return null;for(se=[],H=0;H<me.length;H++)x=this.visit(c.children[1],me[H]),x!==null&&se.push(x);return se;case"ValueProjection":if(me=this.visit(c.children[0],f),!r(me))return null;se=[];var pn=a(me);for(H=0;H<pn.length;H++)x=this.visit(c.children[1],pn[H]),x!==null&&se.push(x);return se;case"FilterProjection":if(me=this.visit(c.children[0],f),!n(me))return null;var At=[],gn=[];for(H=0;H<me.length;H++)g=this.visit(c.children[2],me[H]),o(g)||At.push(me[H]);for(var Ft=0;Ft<At.length;Ft++)x=this.visit(c.children[1],At[Ft]),x!==null&&gn.push(x);return gn;case"Comparator":switch(B=this.visit(c.children[0],f),V=this.visit(c.children[1],f),c.name){case ie:I=i(B,V);break;case W:I=!i(B,V);break;case be:I=B>V;break;case Z:I=B>=V;break;case Ee:I=B<V;break;case D:I=B<=V;break;default:throw new Error("Unknown comparator: "+c.name)}return I;case G:var Zt=this.visit(c.children[0],f);if(!n(Zt))return null;var Ie=[];for(H=0;H<Zt.length;H++)x=Zt[H],n(x)?Ie.push.apply(Ie,x):Ie.push(x);return Ie;case"Identity":return f;case"MultiSelectList":if(f===null)return null;for(se=[],H=0;H<c.children.length;H++)se.push(this.visit(c.children[H],f));return se;case"MultiSelectHash":if(f===null)return null;se={};var Lt;for(H=0;H<c.children.length;H++)Lt=c.children[H],se[Lt.name]=this.visit(Lt.value,f);return se;case"OrExpression":return g=this.visit(c.children[0],f),o(g)&&(g=this.visit(c.children[1],f)),g;case"AndExpression":return B=this.visit(c.children[0],f),o(B)===!0?B:this.visit(c.children[1],f);case"NotExpression":return B=this.visit(c.children[0],f),o(B);case"Literal":return c.value;case O:return we=this.visit(c.children[0],f),this.visit(c.children[1],we);case J:return f;case"Function":var vn=[];for(H=0;H<c.children.length;H++)vn.push(this.visit(c.children[H],f));return this.runtime.callFunction(c.name,vn);case"ExpressionReference":var _n=c.children[0];return _n.jmespathType=ke,_n;default:throw new Error("Unknown node type: "+c.type)}},computeSliceParams:function(c,f){var g=f[0],x=f[1],I=f[2],B=[null,null,null];if(I===null)I=1;else if(I===0){var V=new Error("Invalid slice, step cannot be 0");throw V.name="RuntimeError",V}var Q=I<0;return g===null?g=Q?c-1:0:g=this.capSliceRange(c,g,I),x===null?x=Q?-1:c:x=this.capSliceRange(c,x,I),B[0]=g,B[1]=x,B[2]=I,B},capSliceRange:function(c,f,g){return f<0?(f+=c,f<0&&(f=g<0?-1:0)):f>=c&&(f=g<0?c-1:c),f}};function ot(c){this._interpreter=c,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[s]}]},avg:{_func:this._functionAvg,_signature:[{types:[k]}]},ceil:{_func:this._functionCeil,_signature:[{types:[s]}]},contains:{_func:this._functionContains,_signature:[{types:[d,p]},{types:[h]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[d]},{types:[d]}]},floor:{_func:this._functionFloor,_signature:[{types:[s]}]},length:{_func:this._functionLength,_signature:[{types:[d,p,y]}]},map:{_func:this._functionMap,_signature:[{types:[m]},{types:[p]}]},max:{_func:this._functionMax,_signature:[{types:[k,_]}]},merge:{_func:this._functionMerge,_signature:[{types:[y],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[p]},{types:[m]}]},sum:{_func:this._functionSum,_signature:[{types:[k]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[d]},{types:[d]}]},min:{_func:this._functionMin,_signature:[{types:[k,_]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[p]},{types:[m]}]},type:{_func:this._functionType,_signature:[{types:[h]}]},keys:{_func:this._functionKeys,_signature:[{types:[y]}]},values:{_func:this._functionValues,_signature:[{types:[y]}]},sort:{_func:this._functionSort,_signature:[{types:[_,k]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[p]},{types:[m]}]},join:{_func:this._functionJoin,_signature:[{types:[d]},{types:[_]}]},reverse:{_func:this._functionReverse,_signature:[{types:[d,p]}]},to_array:{_func:this._functionToArray,_signature:[{types:[h]}]},to_string:{_func:this._functionToString,_signature:[{types:[h]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[h]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[h],variadic:!0}]}}}ot.prototype={callFunction:function(c,f){var g=this.functionTable[c];if(g===void 0)throw new Error("Unknown function: "+c+"()");return this._validateArgs(c,f,g._signature),g._func.call(this,f)},_validateArgs:function(c,f,g){var x;if(g[g.length-1].variadic){if(f.length<g.length)throw x=g.length===1?" argument":" arguments",new Error("ArgumentError: "+c+"() takes at least"+g.length+x+" but received "+f.length)}else if(f.length!==g.length)throw x=g.length===1?" argument":" arguments",new Error("ArgumentError: "+c+"() takes "+g.length+x+" but received "+f.length);for(var I,B,V,Q=0;Q<g.length;Q++){V=!1,I=g[Q].types,B=this._getTypeName(f[Q]);for(var we=0;we<I.length;we++)if(this._typeMatches(B,I[we],f[Q])){V=!0;break}if(!V){var Le=I.map(function(se){return N[se]}).join(",");throw new Error("TypeError: "+c+"() expected argument "+(Q+1)+" to be type "+Le+" but received type "+N[B]+" instead.")}}},_typeMatches:function(c,f,g){if(f===h)return!0;if(f===_||f===k||f===p){if(f===p)return c===p;if(c===p){var x;f===k?x=s:f===_&&(x=d);for(var I=0;I<g.length;I++)if(!this._typeMatches(this._getTypeName(g[I]),x,g[I]))return!1;return!0}}else return c===f},_getTypeName:function(c){switch(Object.prototype.toString.call(c)){case"[object String]":return d;case"[object Number]":return s;case"[object Array]":return p;case"[object Boolean]":return w;case"[object Null]":return E;case"[object Object]":return c.jmespathType===ke?m:y}},_functionStartsWith:function(c){return c[0].lastIndexOf(c[1])===0},_functionEndsWith:function(c){var f=c[0],g=c[1];return f.indexOf(g,f.length-g.length)!==-1},_functionReverse:function(c){var f=this._getTypeName(c[0]);if(f===d){for(var g=c[0],x="",I=g.length-1;I>=0;I--)x+=g[I];return x}else{var B=c[0].slice(0);return B.reverse(),B}},_functionAbs:function(c){return Math.abs(c[0])},_functionCeil:function(c){return Math.ceil(c[0])},_functionAvg:function(c){for(var f=0,g=c[0],x=0;x<g.length;x++)f+=g[x];return f/g.length},_functionContains:function(c){return c[0].indexOf(c[1])>=0},_functionFloor:function(c){return Math.floor(c[0])},_functionLength:function(c){return r(c[0])?Object.keys(c[0]).length:c[0].length},_functionMap:function(c){for(var f=[],g=this._interpreter,x=c[0],I=c[1],B=0;B<I.length;B++)f.push(g.visit(x,I[B]));return f},_functionMerge:function(c){for(var f={},g=0;g<c.length;g++){var x=c[g];for(var I in x)f[I]=x[I]}return f},_functionMax:function(c){if(c[0].length>0){var f=this._getTypeName(c[0][0]);if(f===s)return Math.max.apply(Math,c[0]);for(var g=c[0],x=g[0],I=1;I<g.length;I++)x.localeCompare(g[I])<0&&(x=g[I]);return x}else return null},_functionMin:function(c){if(c[0].length>0){var f=this._getTypeName(c[0][0]);if(f===s)return Math.min.apply(Math,c[0]);for(var g=c[0],x=g[0],I=1;I<g.length;I++)g[I].localeCompare(x)<0&&(x=g[I]);return x}else return null},_functionSum:function(c){for(var f=0,g=c[0],x=0;x<g.length;x++)f+=g[x];return f},_functionType:function(c){switch(this._getTypeName(c[0])){case s:return"number";case d:return"string";case p:return"array";case y:return"object";case w:return"boolean";case m:return"expref";case E:return"null"}},_functionKeys:function(c){return Object.keys(c[0])},_functionValues:function(c){for(var f=c[0],g=Object.keys(f),x=[],I=0;I<g.length;I++)x.push(f[g[I]]);return x},_functionJoin:function(c){var f=c[0],g=c[1];return g.join(f)},_functionToArray:function(c){return this._getTypeName(c[0])===p?c[0]:[c[0]]},_functionToString:function(c){return this._getTypeName(c[0])===d?c[0]:JSON.stringify(c[0])},_functionToNumber:function(c){var f=this._getTypeName(c[0]),g;return f===s?c[0]:f===d&&(g=+c[0],!isNaN(g))?g:null},_functionNotNull:function(c){for(var f=0;f<c.length;f++)if(this._getTypeName(c[f])!==E)return c[f];return null},_functionSort:function(c){var f=c[0].slice(0);return f.sort(),f},_functionSortBy:function(c){var f=c[0].slice(0);if(f.length===0)return f;var g=this._interpreter,x=c[1],I=this._getTypeName(g.visit(x,f[0]));if([s,d].indexOf(I)<0)throw new Error("TypeError");for(var B=this,V=[],Q=0;Q<f.length;Q++)V.push([Q,f[Q]]);V.sort(function(Le,se){var H=g.visit(x,Le[1]),Be=g.visit(x,se[1]);if(B._getTypeName(H)!==I)throw new Error("TypeError: expected "+I+", received "+B._getTypeName(H));if(B._getTypeName(Be)!==I)throw new Error("TypeError: expected "+I+", received "+B._getTypeName(Be));return H>Be?1:H<Be?-1:Le[0]-se[0]});for(var we=0;we<V.length;we++)f[we]=V[we][1];return f},_functionMaxBy:function(c){for(var f=c[1],g=c[0],x=this.createKeyFunction(f,[s,d]),I=-1/0,B,V,Q=0;Q<g.length;Q++)V=x(g[Q]),V>I&&(I=V,B=g[Q]);return B},_functionMinBy:function(c){for(var f=c[1],g=c[0],x=this.createKeyFunction(f,[s,d]),I=1/0,B,V,Q=0;Q<g.length;Q++)V=x(g[Q]),V<I&&(I=V,B=g[Q]);return B},createKeyFunction:function(c,f){var g=this,x=this._interpreter,I=function(B){var V=x.visit(c,B);if(f.indexOf(g._getTypeName(V))<0){var Q="TypeError: expected one of "+f+", received "+g._getTypeName(V);throw new Error(Q)}return V};return I}};function Ze(c){var f=new Xe,g=f.parse(c);return g}function ln(c){var f=new Ct;return f.tokenize(c)}function fn(c,f){var g=new Xe,x=new ot,I=new dt(x);x._interpreter=I;var B=g.parse(f);return I.search(B,c)}t.tokenize=ln,t.compile=Ze,t.search=fn,t.strictDeepEqual=i})(e)})(oo);const ao=an(oo);class Xn{constructor(t){L(this,"layers",[]);L(this,"dataLoaded",!1);L(this,"layerSelectedNodes",[]);L(this,"layerSelectedEdges",[]);this.layers=Ec.parse(t)}static fromJson(t){const n=JSON.parse(t);return this.fromObject(n)}static fromObject(t){return new Xn(t)}applyData(t,n){const r="id",i="source",o="target";this.layerSelectedEdges.length=0,this.layerSelectedNodes.length=0;for(const a of this.layers){let u=new Set;if(a.node){const d=`[${a.node.selector.length?`?${a.node.selector}`:""}].${r}`,p=ao.search(t,d);u=new Set(p)}this.layerSelectedNodes.push(u);let s=new Set;if(a.edge){const d=`[${a.edge.selector.length?`?${a.edge.selector}`:""}].{src: ${i}, dst: ${o}}`,p=ao.search(n,d);s=new Set(p)}this.layerSelectedEdges.push(s)}this.dataLoaded=!0}addLayer(t){this.layers.push(t)}insertLayer(t,n){this.layers.splice(t,0,n)}getStyleForNode(t){const n=[];for(let i=0;i<this.layers.length;i++){const{node:o}=this.layers[i];this.layerSelectedNodes[i].has(t)&&o&&n.push(o.style)}return Bl({},...n)}}const so=new Map([["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aqua","#00ffff"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["black","#000000"],["blanchedalmond","#ffebcd"],["blue","#0000ff"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["fuchsia","#ff00ff"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["gold","#ffd700"],["goldenrod","#daa520"],["gray","#808080"],["green","#008000"],["greenyellow","#adff2f"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred ","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavender","#e6e6fa"],["lavenderblush","#fff0f5"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgrey","#d3d3d3"],["lightgreen","#90ee90"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["lime","#00ff00"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["maroon","#800000"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370d8"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["navy","#000080"],["oldlace","#fdf5e6"],["olive","#808000"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#d87093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#ff0000"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["silver","#c0c0c0"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["teal","#008080"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["white","#ffffff"],["whitesmoke","#f5f5f5"],["yellow","#ffff00"],["yellowgreen","#9acd32"]]);function jl(e){const t=so.get(e);return t||e}const Rl=Object.freeze(Object.defineProperty({__proto__:null,colorMap:so,colorNameToHex:jl},Symbol.toStringTag,{value:"Module"}));ye.Edge=Ce,ye.Graph=Al,ye.Graphty=io,ye.Node=st,ye.Styles=Xn,ye.util=Rl,Object.defineProperty(ye,Symbol.toStringTag,{value:"Module"})});
