(function(we,B){typeof exports=="object"&&typeof module<"u"?B(exports,require("@babylonjs/core")):typeof define=="function"&&define.amd?define(["exports","@babylonjs/core"],B):(we=typeof globalThis<"u"?globalThis:we||self,B(we.Graphty={},we.BABYLON))})(this,function(we,B){"use strict";var as;class Be{constructor(e,n,r,i,o={}){this.arrowMesh=null,this.parentGraph=e,this.srcId=n,this.dstId=r,this.metadata=o.metadata??{};const s=e.nodeCache.get(n);if(!s)throw new Error(`Attempting to create edge '${n}->${r}', Node '${n}' hasn't been created yet.`);const u=e.nodeCache.get(r);if(!u)throw new Error(`Attempting to create edge '${n}->${r}', Node '${r}' hasn't been created yet.`);this.srcNode=s,this.dstNode=u,this.ray=new B.Ray(this.srcNode.mesh.position,this.dstNode.mesh.position),this.style=i,this.parentGraph.graphEngine.addEdge(this),this.mesh=this.style.edgeMeshFactory(this,this.parentGraph,this.style),this.mesh.isPickable=!1,this.mesh.metadata={},this.mesh.metadata.parentEdge=this}update(){const e=this.parentGraph.graphEngine.getEdgePosition(this);this.parentGraph.edgeObservable.notifyObservers({type:"edge-update-before",edge:this});const{srcPoint:n,dstPoint:r}=this.transformArrowCap();n&&r?this.transformEdgeMesh(n,r):this.transformEdgeMesh(new B.Vector3(e.src.x,e.src.y,e.src.z),new B.Vector3(e.dst.x,e.dst.y,e.dst.z)),this.parentGraph.edgeObservable.notifyObservers({type:"edge-update-after",edge:this})}static updateRays(e){if(e.config.style.edge.arrowCap){for(const n of e.graphEngine.edges){const r=n.srcNode.mesh,i=n.dstNode.mesh;n.ray.position=i.position,n.ray.direction=i.position.subtract(r.position)}e.scene.render()}}static create(e,n,r,i,o={}){const s=e.edgeCache.get(n,r);if(s)return s;const u=new Be(e,n,r,i,o);return e.edgeCache.set(n,r,u),u}static defaultEdgeMeshFactory(e,n,r){return r.arrowCap&&(e.arrowMesh=n.meshCache.get("default-arrow-cap",()=>{const i=ys(r.width),o=Kr(r.width),s=B.GreasedLineTools.GetArrowCap(new B.Vector3(0,0,-o),new B.Vector3(0,0,1),o,i,i);return B.CreateGreasedLine("lines",{points:s.points,widths:s.widths,widthDistribution:B.GreasedLineMeshWidthDistribution.WIDTH_DISTRIBUTION_START},{color:B.Color3.FromHexString(r.color.slice(0,7))})})),n.meshCache.get("default-edge",()=>{switch(r.type){case"plain":return Be.createPlainLine(e,n,r);case"moving":return Be.createMovingLine(e,n,r);default:throw new TypeError(`Unknown Edge type: '${r.type}'`)}})}static createPlainLine(e,n,r){return B.CreateGreasedLine("edge-plain",{points:Be.unitVectorPoints},{color:B.Color3.FromHexString(r.color.slice(0,7)),width:r.width})}static createMovingLine(e,n,r){const i=B.Color3.FromHexString(r.movingLineOpts.baseColor.slice(0,7)),o=B.Color3.FromHexString(r.color.slice(0,7)),s=Math.floor(i.r*255),u=Math.floor(i.g*255),a=Math.floor(i.b*255),h=Math.floor(o.r*255),d=Math.floor(o.g*255),f=Math.floor(o.b*255),y=new Uint8Array([s,u,a,h,d,f]),b=new B.RawTexture(y,y.length/3,1,B.Engine.TEXTUREFORMAT_RGB,n.scene,!1,!0,B.Engine.TEXTURE_NEAREST_NEAREST);b.wrapU=B.RawTexture.WRAP_ADDRESSMODE,b.name="moving-texture";const m=B.CreateGreasedLine("edge-moving",{points:Be.unitVectorPoints},{width:r.width,colorMode:B.GreasedLineMeshColorMode.COLOR_MODE_MULTIPLY}),k=m.material;return k.emissiveTexture=b,k.disableLighting=!0,b.uScale=5,n.scene.onBeforeRenderObservable.add(()=>{b.uOffset-=.04*n.scene.getAnimationRatio()}),m}transformEdgeMesh(e,n){const r=n.subtract(e),i=new B.Vector3(e.x+r.x/2,e.y+r.y/2,e.z+r.z/2),o=r.length();this.mesh.position=i,this.mesh.lookAt(n),this.mesh.scaling.z=o}transformArrowCap(){if(this.arrowMesh){this.parentGraph.stats.arrowCapUpdate.beginMonitoring();const{srcPoint:e,dstPoint:n,newEndPoint:r}=this.getInterceptPoints();if(!e||!n||!r)throw new Error("Internal Error: mesh intercept points not found");return this.arrowMesh.position=n,this.arrowMesh.lookAt(this.dstNode.mesh.position),this.parentGraph.stats.arrowCapUpdate.endMonitoring(),{srcPoint:e,dstPoint:r}}return{srcPoint:null,dstPoint:null}}getInterceptPoints(){const e=this.srcNode.mesh,n=this.dstNode.mesh;this.parentGraph.stats.intersectCalc.beginMonitoring();const r=this.ray.intersectsMeshes([n]),i=this.ray.intersectsMeshes([e]);this.parentGraph.stats.intersectCalc.endMonitoring();let o=null,s=null,u=null;if(r.length&&i.length){const a=Kr(this.style.width);s=r[0].pickedPoint,o=i[0].pickedPoint;const h=o.subtract(s).length(),d=h-a,{x:f,y,z:b}=o,{x:m,y:k,z:$}=s,_=f+d/h*(m-f),E=y+d/h*(k-y),M=b+d/h*($-b);u=new B.Vector3(_,E,M)}return{srcPoint:o,dstPoint:s,newEndPoint:u}}static get unitVectorPoints(){return[0,0,-.5,0,0,.5]}}function ys(t){return Math.max(20*t,4)}function Kr(t){return Math.max(t,.5)}class bs{constructor(){this.map=new Map}has(e,n){const r=this.map.get(e);return r?r.has(n):!1}set(e,n,r){let i=this.map.get(e);if(i||(i=new Map,this.map.set(e,i)),i.has(n))throw new Error("Attempting to create duplicate Edge");i.set(n,r)}get(e,n){const r=this.map.get(e);if(r)return r.get(n)}get size(){let e=0;for(const n of this.map.values())e+=n.size;return e}}const Wr=1.618;let Wn=class se{constructor(e,n,r,i={}){if(this.dragging=!1,this.parentGraph=e,this.id=n,this.metadata=i.metadata??{},this.style=r,this.parentGraph.graphEngine.addNode(this),this.mesh=this.style.nodeMeshFactory(this,this.parentGraph,this.style),this.mesh.isPickable=!0,this.mesh.metadata={parentNode:this},this.style.label&&(this.label=se.createLabel(this.id.toString(),this,this.parentGraph),this.label.parent=this.mesh,this.label.position.y+=1),this.pinOnDrag=i.pinOnDrag??!0,this.meshDragBehavior=new B.SixDofDragBehavior,this.mesh.addBehavior(this.meshDragBehavior),this.meshDragBehavior.onDragStartObservable.add(()=>{this.parentGraph.running=!0,this.dragging=!0}),this.meshDragBehavior.onDragEndObservable.add(()=>{this.parentGraph.running=!0,this.pinOnDrag&&this.pin(),this.dragging=!1}),this.meshDragBehavior.onPositionChangedObservable.add(o=>{this.parentGraph.running=!0,this.parentGraph.graphEngine.setNodePosition(this,o.position)}),this.mesh.actionManager=this.mesh.actionManager??new B.ActionManager(this.parentGraph.scene),this.parentGraph.fetchNodes&&this.parentGraph.fetchEdges){const{fetchNodes:o,fetchEdges:s}=this.parentGraph;this.mesh.actionManager.registerAction(new B.ExecuteCodeAction({trigger:B.ActionManager.OnDoublePickTrigger},()=>{this.parentGraph.running=!0;const u=s(this,this.parentGraph),a=new Set;u.forEach(d=>{a.add(d.src),a.add(d.dst)}),a.delete(this.id);const h=o(a,this.parentGraph);this.parentGraph.addNodes([...h]),this.parentGraph.addEdges([...u])}))}}update(){if(this.dragging)return;this.parentGraph.nodeObservable.notifyObservers({type:"node-update-before",node:this});const e=this.parentGraph.graphEngine.getNodePosition(this);this.mesh.position.x=e.x,this.mesh.position.y=e.y,e.z&&(this.mesh.position.z=e.z),this.parentGraph.nodeObservable.notifyObservers({type:"node-update-after",node:this})}pin(){this.parentGraph.graphEngine.pin(this)}unpin(){this.parentGraph.graphEngine.unpin(this)}static create(e,n,r,i={}){const o=e.nodeCache.get(n);if(o)return o;const s=new se(e,n,r,i);return e.nodeCache.set(n,s),s}static defaultNodeMeshFactory(e,n,r){return n.meshCache.get("default-mesh",()=>{let i;switch(r.shape){case"box":i=se.createBox(e,n,r);break;case"sphere":i=se.createSphere(e,n,r);break;case"cylinder":i=se.createCylinder(e,n,r);break;case"cone":i=se.createCone(e,n,r);break;case"capsule":i=se.createCapsule(e,n,r);break;case"torus-knot":i=se.createTorusKnot(e,n,r);break;case"tetrahedron":i=se.createPolyhedron(0,e,n,r);break;case"octahedron":i=se.createPolyhedron(1,e,n,r);break;case"dodecahedron":i=se.createPolyhedron(2,e,n,r);break;case"icosahedron":i=se.createPolyhedron(3,e,n,r);break;case"rhombicuboctahedron":i=se.createPolyhedron(4,e,n,r);break;case"triangular_prism":i=se.createPolyhedron(5,e,n,r);break;case"pentagonal_prism":i=se.createPolyhedron(6,e,n,r);break;case"hexagonal_prism":i=se.createPolyhedron(7,e,n,r);break;case"square_pyramid":i=se.createPolyhedron(8,e,n,r);break;case"pentagonal_pyramid":i=se.createPolyhedron(9,e,n,r);break;case"triangular_dipyramid":i=se.createPolyhedron(10,e,n,r);break;case"pentagonal_dipyramid":i=se.createPolyhedron(11,e,n,r);break;case"elongated_square_dypyramid":i=se.createPolyhedron(12,e,n,r);break;case"elongated_pentagonal_dipyramid":i=se.createPolyhedron(13,e,n,r);break;case"elongated_pentagonal_cupola":i=se.createPolyhedron(14,e,n,r);break;case"goldberg":i=se.createGoldberg(e,n,r);break;case"icosphere":i=se.createIcoSphere(e,n,r);break;case"geodesic":i=se.createGeodesic(e,n,r);break;default:throw new TypeError(`unknown shape: ${r.shape}`)}const o=new B.StandardMaterial("defaultMaterial"),s=B.Color4.FromHexString(r.color);return o.diffuseColor=new B.Color3(s.r,s.g,s.b),o.wireframe=r.wireframe,o.freeze(),i.visibility=s.a,i.visibility=1,i.material=o,i})}static createBox(e,n,r){return B.MeshBuilder.CreateBox("box",{size:r.size})}static createSphere(e,n,r){return B.MeshBuilder.CreateSphere("sphere",{diameter:r.size})}static createCylinder(e,n,r){return B.MeshBuilder.CreateCylinder("cylinder",{height:r.size*Wr,diameter:r.size})}static createCone(e,n,r){return B.MeshBuilder.CreateCylinder("cylinder",{height:r.size*Wr,diameterTop:0,diameterBottom:r.size})}static createCapsule(e,n,r){return B.MeshBuilder.CreateCapsule("capsule",{})}static createTorus(e,n,r){return B.MeshBuilder.CreateTorus("torus",{})}static createTorusKnot(e,n,r){return B.MeshBuilder.CreateTorusKnot("tk",{radius:r.size*.3,tube:r.size*.2,radialSegments:128})}static createPolyhedron(e,n,r,i){return B.MeshBuilder.CreatePolyhedron("polyhedron",{size:i.size,type:e})}static createGoldberg(e,n,r){return B.MeshBuilder.CreateGoldberg("goldberg",{size:r.size})}static createIcoSphere(e,n,r){return B.MeshBuilder.CreateIcoSphere("icosphere",{radius:r.size*.75})}static createGeodesic(e,n,r){return B.MeshBuilder.CreateGeodesic("geodesic",{size:r.size})}static createLabel(e,n,r){const o="48px Verdana",a=.006944444444444444,d=new B.DynamicTexture("DynamicTexture",64,r.scene).getContext();d.font=o;const f=d.measureText(e).width+8,y=f*a,b=new B.DynamicTexture("DynamicTexture",{width:f,height:72},r.scene,!1),m=new B.StandardMaterial("mat",r.scene);m.specularColor=B.Color3.Black(),b.hasAlpha=!0;const k=b.getContext();k.fillStyle="white",k.beginPath();const $=0,_=0,E=[20,20,20,20],M=f,T=72;k.moveTo($+E[0],_),k.lineTo($+M-E[1],_),k.arc($+M-E[1],_+E[1],E[1],3*Math.PI/2,Math.PI*2),k.lineTo($+M,_+T-E[2]),k.arc($+M-E[2],_+T-E[2],E[2],0,Math.PI/2),k.lineTo($+E[3],_+T),k.arc($+E[3],_+T-E[3],E[3],Math.PI/2,Math.PI),k.lineTo($,_+E[0]),k.arc($+E[0],_+E[0],E[0],Math.PI,3*Math.PI/2),k.closePath(),k.fill(),b.drawText(e,null,null,o,"#000000","transparent",!0),m.opacityTexture=b,m.emissiveTexture=b,m.disableLighting=!0;const z=B.MeshBuilder.CreatePlane("plane",{width:y,height:.5},r.scene);return z.material=m,z.billboardMode=7,z}};const Re={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Qr=Object.create(null);for(const t in Re)Object.hasOwn(Re,t)&&(Qr[Re[t]]=t);const Te={to:{},get:{}};Te.get=function(t){const e=t.slice(0,3).toLowerCase();let n,r;switch(e){case"hsl":{n=Te.get.hsl(t),r="hsl";break}case"hwb":{n=Te.get.hwb(t),r="hwb";break}default:{n=Te.get.rgb(t),r="rgb";break}}return n?{model:r,value:n}:null},Te.get.rgb=function(t){if(!t)return null;const e=/^#([a-f\d]{3,4})$/i,n=/^#([a-f\d]{6})([a-f\d]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,o=/^(\w+)$/;let s=[0,0,0,1],u,a,h;if(u=t.match(n)){for(h=u[2],u=u[1],a=0;a<3;a++){const d=a*2;s[a]=Number.parseInt(u.slice(d,d+2),16)}h&&(s[3]=Number.parseInt(h,16)/255)}else if(u=t.match(e)){for(u=u[1],h=u[3],a=0;a<3;a++)s[a]=Number.parseInt(u[a]+u[a],16);h&&(s[3]=Number.parseInt(h+h,16)/255)}else if(u=t.match(r)){for(a=0;a<3;a++)s[a]=Number.parseInt(u[a+1],10);u[4]&&(s[3]=u[5]?Number.parseFloat(u[4])*.01:Number.parseFloat(u[4]))}else if(u=t.match(i)){for(a=0;a<3;a++)s[a]=Math.round(Number.parseFloat(u[a+1])*2.55);u[4]&&(s[3]=u[5]?Number.parseFloat(u[4])*.01:Number.parseFloat(u[4]))}else return(u=t.match(o))?u[1]==="transparent"?[0,0,0,0]:Object.hasOwn(Re,u[1])?(s=Re[u[1]],s[3]=1,s):null:null;for(a=0;a<3;a++)s[a]=Ve(s[a],0,255);return s[3]=Ve(s[3],0,1),s},Te.get.hsl=function(t){if(!t)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){const r=Number.parseFloat(n[4]),i=(Number.parseFloat(n[1])%360+360)%360,o=Ve(Number.parseFloat(n[2]),0,100),s=Ve(Number.parseFloat(n[3]),0,100),u=Ve(Number.isNaN(r)?1:r,0,1);return[i,o,s,u]}return null},Te.get.hwb=function(t){if(!t)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){const r=Number.parseFloat(n[4]),i=(Number.parseFloat(n[1])%360+360)%360,o=Ve(Number.parseFloat(n[2]),0,100),s=Ve(Number.parseFloat(n[3]),0,100),u=Ve(Number.isNaN(r)?1:r,0,1);return[i,o,s,u]}return null},Te.to.hex=function(...t){return"#"+hn(t[0])+hn(t[1])+hn(t[2])+(t[3]<1?hn(Math.round(t[3]*255)):"")},Te.to.rgb=function(...t){return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},Te.to.rgb.percent=function(...t){const e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},Te.to.hsl=function(...t){return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},Te.to.hwb=function(...t){let e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},Te.to.keyword=function(...t){return Qr[t.slice(0,3)]};function Ve(t,e,n){return Math.min(Math.max(e,t),n)}function hn(t){const e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}const Jr={};for(const t of Object.keys(Re))Jr[Re[t]]=t;const P={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},De=(6/29)**3;function gt(t){const e=t>.0031308?1.055*t**.4166666666666667-.055:t*12.92;return Math.min(Math.max(0,e),1)}function vt(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}for(const t of Object.keys(P)){if(!("channels"in P[t]))throw new Error("missing channels property: "+t);if(!("labels"in P[t]))throw new Error("missing channel labels property: "+t);if(P[t].labels.length!==P[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:n}=P[t];delete P[t].channels,delete P[t].labels,Object.defineProperty(P[t],"channels",{value:e}),Object.defineProperty(P[t],"labels",{value:n})}P.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=o-i;let u,a;switch(o){case i:{u=0;break}case e:{u=(n-r)/s;break}case n:{u=2+(r-e)/s;break}case r:{u=4+(e-n)/s;break}}u=Math.min(u*60,360),u<0&&(u+=360);const h=(i+o)/2;return o===i?a=0:h<=.5?a=s/(o+i):a=s/(2-o-i),[u,a*100,h*100]},P.rgb.hsv=function(t){let e,n,r,i,o;const s=t[0]/255,u=t[1]/255,a=t[2]/255,h=Math.max(s,u,a),d=h-Math.min(s,u,a),f=function(y){return(h-y)/6/d+1/2};if(d===0)i=0,o=0;else{switch(o=d/h,e=f(s),n=f(u),r=f(a),h){case s:{i=r-n;break}case u:{i=1/3+e-r;break}case a:{i=2/3+n-e;break}}i<0?i+=1:i>1&&(i-=1)}return[i*360,o*100,h*100]},P.rgb.hwb=function(t){const e=t[0],n=t[1];let r=t[2];const i=P.rgb.hsl(t)[0],o=1/255*Math.min(e,Math.min(n,r));return r=1-1/255*Math.max(e,Math.max(n,r)),[i,o*100,r*100]},P.rgb.oklab=function(t){const e=vt(t[0]/255),n=vt(t[1]/255),r=vt(t[2]/255),i=Math.cbrt(.4122214708*e+.5363325363*n+.0514459929*r),o=Math.cbrt(.2119034982*e+.6806995451*n+.1073969566*r),s=Math.cbrt(.0883024619*e+.2817188376*n+.6299787005*r),u=.2104542553*i+.793617785*o-.0040720468*s,a=1.9779984951*i-2.428592205*o+.4505937099*s,h=.0259040371*i+.7827717662*o-.808675766*s;return[u*100,a*100,h*100]},P.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(1-e,1-n,1-r),o=(1-e-i)/(1-i)||0,s=(1-n-i)/(1-i)||0,u=(1-r-i)/(1-i)||0;return[o*100,s*100,u*100,i*100]};function ws(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}P.rgb.keyword=function(t){const e=Jr[t];if(e)return e;let n=Number.POSITIVE_INFINITY,r;for(const i of Object.keys(Re)){const o=Re[i],s=ws(t,o);s<n&&(n=s,r=i)}return r},P.keyword.rgb=function(t){return Re[t]},P.rgb.xyz=function(t){const e=vt(t[0]/255),n=vt(t[1]/255),r=vt(t[2]/255),i=e*.4124564+n*.3575761+r*.1804375,o=e*.2126729+n*.7151522+r*.072175,s=e*.0193339+n*.119192+r*.9503041;return[i*100,o*100,s*100]},P.rgb.lab=function(t){const e=P.rgb.xyz(t);let n=e[0],r=e[1],i=e[2];n/=95.047,r/=100,i/=108.883,n=n>De?n**(1/3):7.787*n+16/116,r=r>De?r**(1/3):7.787*r+16/116,i=i>De?i**(1/3):7.787*i+16/116;const o=116*r-16,s=500*(n-r),u=200*(r-i);return[o,s,u]},P.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;let i,o;if(n===0)return o=r*255,[o,o,o];const s=r<.5?r*(1+n):r+n-r*n,u=2*r-s,a=[0,0,0];for(let h=0;h<3;h++)i=e+1/3*-(h-1),i<0&&i++,i>1&&i--,6*i<1?o=u+(s-u)*6*i:2*i<1?o=s:3*i<2?o=u+(s-u)*(2/3-i)*6:o=u,a[h]=o*255;return a},P.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,r=t[2]/100,i=n;const o=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,i*=o<=1?o:2-o;const s=(r+n)/2,u=r===0?2*i/(o+i):2*n/(r+n);return[e,u*100,s*100]},P.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let r=t[2]/100;const i=Math.floor(e)%6,o=e-Math.floor(e),s=255*r*(1-n),u=255*r*(1-n*o),a=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,a,s];case 1:return[u,r,s];case 2:return[s,r,a];case 3:return[s,u,r];case 4:return[a,s,r];case 5:return[r,s,u]}},P.hsv.hsl=function(t){const e=t[0],n=t[1]/100,r=t[2]/100,i=Math.max(r,.01);let o,s;s=(2-n)*r;const u=(2-n)*i;return o=n*i,o/=u<=1?u:2-u,o=o||0,s/=2,[e,o*100,s*100]},P.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,r=t[2]/100;const i=n+r;let o;i>1&&(n/=i,r/=i);const s=Math.floor(6*e),u=1-r;o=6*e-s,s&1&&(o=1-o);const a=n+o*(u-n);let h,d,f;switch(s){default:case 6:case 0:{h=u,d=a,f=n;break}case 1:{h=a,d=u,f=n;break}case 2:{h=n,d=u,f=a;break}case 3:{h=n,d=a,f=u;break}case 4:{h=a,d=n,f=u;break}case 5:{h=u,d=n,f=a;break}}return[h*255,d*255,f*255]},P.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100,o=1-Math.min(1,e*(1-i)+i),s=1-Math.min(1,n*(1-i)+i),u=1-Math.min(1,r*(1-i)+i);return[o*255,s*255,u*255]},P.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100;let i,o,s;return i=e*3.2404542+n*-1.5371385+r*-.4985314,o=e*-.969266+n*1.8760108+r*.041556,s=e*.0556434+n*-.2040259+r*1.0572252,i=gt(i),o=gt(o),s=gt(s),[i*255,o*255,s*255]},P.xyz.lab=function(t){let e=t[0],n=t[1],r=t[2];e/=95.047,n/=100,r/=108.883,e=e>De?e**(1/3):7.787*e+16/116,n=n>De?n**(1/3):7.787*n+16/116,r=r>De?r**(1/3):7.787*r+16/116;const i=116*n-16,o=500*(e-n),s=200*(n-r);return[i,o,s]},P.xyz.oklab=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,i=Math.cbrt(.8189330101*e+.3618667424*n-.1288597137*r),o=Math.cbrt(.0329845436*e+.9293118715*n+.0361456387*r),s=Math.cbrt(.0482003018*e+.2643662691*n+.633851707*r),u=.2104542553*i+.793617785*o-.0040720468*s,a=1.9779984951*i-2.428592205*o+.4505937099*s,h=.0259040371*i+.7827717662*o-.808675766*s;return[u*100,a*100,h*100]},P.oklab.oklch=function(t){return P.lab.lch(t)},P.oklab.xyz=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,i=(.999999998*e+.396337792*n+.215803758*r)**3,o=(1.000000008*e-.105561342*n-.063854175*r)**3,s=(1.000000055*e-.089484182*n-1.291485538*r)**3,u=1.227013851*i-.55779998*o+.281256149*s,a=-.040580178*i+1.11225687*o-.071676679*s,h=-.076381285*i-.421481978*o+1.58616322*s;return[u*100,a*100,h*100]},P.oklab.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,i=(e+.3963377774*n+.2158037573*r)**3,o=(e-.1055613458*n-.0638541728*r)**3,s=(e-.0894841775*n-1.291485548*r)**3,u=gt(4.0767416621*i-3.3077115913*o+.2309699292*s),a=gt(-1.2684380046*i+2.6097574011*o-.3413193965*s),h=gt(-.0041960863*i-.7034186147*o+1.707614701*s);return[u*255,a*255,h*255]},P.oklch.oklab=function(t){return P.lch.lab(t)},P.lab.xyz=function(t){const e=t[0],n=t[1],r=t[2];let i,o,s;o=(e+16)/116,i=n/500+o,s=o-r/200;const u=o**3,a=i**3,h=s**3;return o=u>De?u:(o-16/116)/7.787,i=a>De?a:(i-16/116)/7.787,s=h>De?h:(s-16/116)/7.787,i*=95.047,o*=100,s*=108.883,[i,o,s]},P.lab.lch=function(t){const e=t[0],n=t[1],r=t[2];let i;i=Math.atan2(r,n)*360/2/Math.PI,i<0&&(i+=360);const s=Math.sqrt(n*n+r*r);return[e,s,i]},P.lch.lab=function(t){const e=t[0],n=t[1],i=t[2]/360*2*Math.PI,o=n*Math.cos(i),s=n*Math.sin(i);return[e,o,s]},P.rgb.ansi16=function(t,e=null){const[n,r,i]=t;let o=e===null?P.rgb.hsv(t)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return o===2&&(s+=60),s},P.hsv.ansi16=function(t){return P.rgb.ansi16(P.hsv.rgb(t),t[2])},P.rgb.ansi256=function(t){const e=t[0],n=t[1],r=t[2];return e>>4===n>>4&&n>>4===r>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},P.ansi16.rgb=function(t){t=t[0];let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=(Math.trunc(t>50)+1)*.5,r=(e&1)*n*255,i=(e>>1&1)*n*255,o=(e>>2&1)*n*255;return[r,i,o]},P.ansi256.rgb=function(t){if(t=t[0],t>=232){const o=(t-232)*10+8;return[o,o,o]}t-=16;let e;const n=Math.floor(t/36)/5*255,r=Math.floor((e=t%36)/6)/5*255,i=e%6/5*255;return[n,r,i]},P.rgb.hex=function(t){const n=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".slice(n.length)+n},P.hex.rgb=function(t){const e=t.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let n=e[0];e[0].length===3&&(n=[...n].map(u=>u+u).join(""));const r=Number.parseInt(n,16),i=r>>16&255,o=r>>8&255,s=r&255;return[i,o,s]},P.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.max(Math.max(e,n),r),o=Math.min(Math.min(e,n),r),s=i-o;let u;const a=s<1?o/(1-s):0;return s<=0?u=0:i===e?u=(n-r)/s%6:i===n?u=2+(r-e)/s:u=4+(e-n)/s,u/=6,u%=1,[u*360,s*100,a*100]},P.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=n<.5?2*e*n:2*e*(1-n);let i=0;return r<1&&(i=(n-.5*r)/(1-r)),[t[0],r*100,i*100]},P.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=e*n;let i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],r*100,i*100]},P.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;if(n===0)return[r*255,r*255,r*255];const i=[0,0,0],o=e%1*6,s=o%1,u=1-s;let a=0;switch(Math.floor(o)){case 0:{i[0]=1,i[1]=s,i[2]=0;break}case 1:{i[0]=u,i[1]=1,i[2]=0;break}case 2:{i[0]=0,i[1]=1,i[2]=s;break}case 3:{i[0]=0,i[1]=u,i[2]=1;break}case 4:{i[0]=s,i[1]=0,i[2]=1;break}default:i[0]=1,i[1]=0,i[2]=u}return a=(1-n)*r,[(n*i[0]+a)*255,(n*i[1]+a)*255,(n*i[2]+a)*255]},P.hcg.hsv=function(t){const e=t[1]/100,n=t[2]/100,r=e+n*(1-e);let i=0;return r>0&&(i=e/r),[t[0],i*100,r*100]},P.hcg.hsl=function(t){const e=t[1]/100,r=t[2]/100*(1-e)+.5*e;let i=0;return r>0&&r<.5?i=e/(2*r):r>=.5&&r<1&&(i=e/(2*(1-r))),[t[0],i*100,r*100]},P.hcg.hwb=function(t){const e=t[1]/100,n=t[2]/100,r=e+n*(1-e);return[t[0],(r-e)*100,(1-r)*100]},P.hwb.hcg=function(t){const e=t[1]/100,r=1-t[2]/100,i=r-e;let o=0;return i<1&&(o=(r-i)/(1-i)),[t[0],i*100,o*100]},P.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},P.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},P.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},P.gray.hsl=function(t){return[0,0,t[0]]},P.gray.hsv=P.gray.hsl,P.gray.hwb=function(t){return[0,100,t[0]]},P.gray.cmyk=function(t){return[0,0,0,t[0]]},P.gray.lab=function(t){return[t[0],0,0]},P.gray.hex=function(t){const e=Math.round(t[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(r.length)+r},P.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};function xs(){const t={},e=Object.keys(P);for(let{length:n}=e,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}function $s(t){const e=xs(),n=[t];for(e[t].distance=0;n.length>0;){const r=n.pop(),i=Object.keys(P[r]);for(let{length:o}=i,s=0;s<o;s++){const u=i[s],a=e[u];a.distance===-1&&(a.distance=e[r].distance+1,a.parent=r,n.unshift(u))}}return e}function ks(t,e){return function(n){return e(t(n))}}function Es(t,e){const n=[e[t].parent,t];let r=P[e[t].parent][t],i=e[t].parent;for(;e[i].parent;)n.unshift(e[i].parent),r=ks(P[e[i].parent][i],r),i=e[i].parent;return r.conversion=n,r}function Ns(t){const e=$s(t),n={},r=Object.keys(e);for(let{length:i}=r,o=0;o<i;o++){const s=r[o];e[s].parent!==null&&(n[s]=Es(s,e))}return n}const Ke={},Ms=Object.keys(P);function Ts(t){const e=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),t(n))};return"conversion"in t&&(e.conversion=t.conversion),e}function zs(t){const e=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const i=t(n);if(typeof i=="object")for(let{length:o}=i,s=0;s<o;s++)i[s]=Math.round(i[s]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}for(const t of Ms){Ke[t]={},Object.defineProperty(Ke[t],"channels",{value:P[t].channels}),Object.defineProperty(Ke[t],"labels",{value:P[t].labels});const e=Ns(t),n=Object.keys(e);for(const r of n){const i=e[r];Ke[t][r]=zs(i),Ke[t][r].raw=Ts(i)}}function N(t,e,n){function r(u,a){var h;Object.defineProperty(u,"_zod",{value:u._zod??{},enumerable:!1}),(h=u._zod).traits??(h.traits=new Set),u._zod.traits.add(t),e(u,a);for(const d in s.prototype)Object.defineProperty(u,d,{value:s.prototype[d].bind(u)});u._zod.constr=s,u._zod.def=a}const i=(n==null?void 0:n.Parent)??Object;class o extends i{}Object.defineProperty(o,"name",{value:t});function s(u){var a;const h=n!=null&&n.Parent?new o:this;r(h,u),(a=h._zod).deferred??(a.deferred=[]);for(const d of h._zod.deferred)d();return h}return Object.defineProperty(s,"init",{value:r}),Object.defineProperty(s,Symbol.hasInstance,{value:u=>{var a,h;return n!=null&&n.Parent&&u instanceof n.Parent?!0:(h=(a=u==null?void 0:u._zod)==null?void 0:a.traits)==null?void 0:h.has(t)}}),Object.defineProperty(s,"name",{value:t}),s}class Tt extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Qn={};function st(t){return t&&Object.assign(Qn,t),Qn}function Ss(t,e){return typeof e=="bigint"?e.toString():e}function Yr(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function Jn(t){return t==null}function Yn(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function Cs(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,o=Number.parseInt(t.toFixed(i).replace(".","")),s=Number.parseInt(e.toFixed(i).replace(".",""));return o%s/10**i}function fe(t,e,n){Object.defineProperty(t,e,{get(){{const r=n();return t[e]=r,r}},set(r){Object.defineProperty(t,e,{value:r})},configurable:!0})}function ln(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Xr(t=10){const e="abcdefghijklmnopqrstuvwxyz";let n="";for(let r=0;r<t;r++)n+=e[Math.floor(Math.random()*e.length)];return n}function zt(t){return JSON.stringify(t)}function As(t){return typeof t=="object"&&t!==null}const Is=Yr(()=>{try{const t=Function;return new t(""),!0}catch{return!1}});function ei(t){return typeof t=="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype}const Ps=new Set(["string","number","symbol"]);function St(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function at(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function U(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Os(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional")}const Fs={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Ls(t,e){const n={},r=t._zod.def;for(const i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&(n[i]=r.shape[i])}return at(t,{...t._zod.def,shape:n,checks:[]})}function Zs(t,e){const n={...t._zod.def.shape},r=t._zod.def;for(const i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&delete n[i]}return at(t,{...t._zod.def,shape:n,checks:[]})}function Bs(t,e){const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return ln(this,"shape",r),r},checks:[]};return at(t,n)}function Rs(t,e){return at(t,{...t._zod.def,get shape(){const n={...t._zod.def.shape,...e._zod.def.shape};return ln(this,"shape",n),n},catchall:e._zod.def.catchall,checks:[]})}function js(t,e,n){const r=e._zod.def.shape,i={...r};if(n)for(const o in n){if(!(o in r))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(i[o]=t?new t({type:"optional",innerType:r[o]}):r[o])}else for(const o in r)i[o]=t?new t({type:"optional",innerType:r[o]}):r[o];return at(e,{...e._zod.def,shape:i,checks:[]})}function Ds(t,e,n){const r=e._zod.def.shape,i={...r};if(n)for(const o in n){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(i[o]=new t({type:"nonoptional",innerType:r[o]}))}else for(const o in r)i[o]=new t({type:"nonoptional",innerType:r[o]});return at(e,{...e._zod.def,shape:i,checks:[]})}function Ct(t,e=0){for(let n=e;n<t.issues.length;n++)if(t.issues[n].continue!==!0)return!0;return!1}function Xn(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function dn(t){return typeof t=="string"?t:t==null?void 0:t.message}function ut(t,e,n){var i,o,s,u,a,h;const r={...t,path:t.path??[]};if(!t.message){const d=dn((s=(o=(i=t.inst)==null?void 0:i._zod.def)==null?void 0:o.error)==null?void 0:s.call(o,t))??dn((u=e==null?void 0:e.error)==null?void 0:u.call(e,t))??dn((a=n.customError)==null?void 0:a.call(n,t))??dn((h=n.localeError)==null?void 0:h.call(n,t))??"Invalid input";r.message=d}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}function er(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function At(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const ti=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(e,Ss,2)},enumerable:!0})},ni=N("$ZodError",ti),ri=N("$ZodError",ti,{Parent:Error});function Us(t,e=n=>n.message){const n={},r=[];for(const i of t.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}function qs(t,e){const n=e||function(o){return o.message},r={_errors:[]},i=o=>{for(const s of o.issues)if(s.code==="invalid_union")s.errors.map(u=>i({issues:u}));else if(s.code==="invalid_key")i({issues:s.issues});else if(s.code==="invalid_element")i({issues:s.issues});else if(s.path.length===0)r._errors.push(n(s));else{let u=r,a=0;for(;a<s.path.length;){const h=s.path[a];a===s.path.length-1?(u[h]=u[h]||{_errors:[]},u[h]._errors.push(n(s))):u[h]=u[h]||{_errors:[]},u=u[h],a++}}};return i(t),r}const Gs=t=>(e,n,r,i)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},s=e._zod.run({value:n,issues:[]},o);if(s instanceof Promise)throw new Tt;if(s.issues.length){const u=new((i==null?void 0:i.Err)??t)(s.issues.map(a=>ut(a,o,st())));throw Error.captureStackTrace(u,i==null?void 0:i.callee),u}return s.value},Hs=t=>async(e,n,r,i)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let s=e._zod.run({value:n,issues:[]},o);if(s instanceof Promise&&(s=await s),s.issues.length){const u=new((i==null?void 0:i.Err)??t)(s.issues.map(a=>ut(a,o,st())));throw Error.captureStackTrace(u,i==null?void 0:i.callee),u}return s.value},ii=t=>(e,n,r)=>{const i=r?{...r,async:!1}:{async:!1},o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new Tt;return o.issues.length?{success:!1,error:new(t??ni)(o.issues.map(s=>ut(s,i,st())))}:{success:!0,data:o.value}},Vs=ii(ri),oi=t=>async(e,n,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(s=>ut(s,i,st())))}:{success:!0,data:o.value}},Ks=oi(ri),Ws=/^[cC][^\s-]{8,}$/,Qs=/^[0-9a-z]+$/,Js=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Ys=/^[0-9a-vA-V]{20}$/,Xs=/^[A-Za-z0-9]{27}$/,ea=/^[a-zA-Z0-9_-]{21}$/,ta=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,na=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,si=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,ra=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ia="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function oa(){return new RegExp(ia,"u")}const sa=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,aa=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,ua=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,ca=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ha=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ai=/^[A-Za-z0-9_-]*$/,tr=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,la=/^\+(?:[0-9]){6,14}[0-9]$/,ui="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",da=new RegExp(`^${ui}$`);function ci(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function fa(t){return new RegExp(`^${ci(t)}$`)}function pa(t){let e=`${ui}T${ci(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}const ga=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},va=/^\d+$/,_a=/^-?\d+(?:\.\d+)?/i,ma=/true|false/i,ya=/^[^A-Z]*$/,ba=/^[^a-z]*$/,ze=N("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),hi={number:"number",bigint:"bigint",object:"date"},li=N("$ZodCheckLessThan",(t,e)=>{ze.init(t,e);const n=hi[typeof e.value];t._zod.onattach.push(r=>{const i=r._zod.bag,o=(e.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?i.maximum=e.value:i.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),di=N("$ZodCheckGreaterThan",(t,e)=>{ze.init(t,e);const n=hi[typeof e.value];t._zod.onattach.push(r=>{const i=r._zod.bag,o=(e.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?i.minimum=e.value:i.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),wa=N("$ZodCheckMultipleOf",(t,e)=>{ze.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):Cs(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),xa=N("$ZodCheckNumberFormat",(t,e)=>{var s;ze.init(t,e),e.format=e.format||"float64";const n=(s=e.format)==null?void 0:s.includes("int"),r=n?"int":"number",[i,o]=Fs[e.format];t._zod.onattach.push(u=>{const a=u._zod.bag;a.format=e.format,a.minimum=i,a.maximum=o,n&&(a.pattern=va)}),t._zod.check=u=>{const a=u.value;if(n){if(!Number.isInteger(a)){u.issues.push({expected:r,format:e.format,code:"invalid_type",input:a,inst:t});return}if(!Number.isSafeInteger(a)){a>0?u.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):u.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}a<i&&u.issues.push({origin:"number",input:a,code:"too_small",minimum:i,inclusive:!0,inst:t,continue:!e.abort}),a>o&&u.issues.push({origin:"number",input:a,code:"too_big",maximum:o,inst:t})}}),$a=N("$ZodCheckMaxLength",(t,e)=>{ze.init(t,e),t._zod.when=n=>{const r=n.value;return!Jn(r)&&r.length!==void 0},t._zod.onattach.push(n=>{const r=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<r&&(n._zod.bag.maximum=e.maximum)}),t._zod.check=n=>{const r=n.value;if(r.length<=e.maximum)return;const o=er(r);n.issues.push({origin:o,code:"too_big",maximum:e.maximum,input:r,inst:t,continue:!e.abort})}}),ka=N("$ZodCheckMinLength",(t,e)=>{ze.init(t,e),t._zod.when=n=>{const r=n.value;return!Jn(r)&&r.length!==void 0},t._zod.onattach.push(n=>{const r=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>r&&(n._zod.bag.minimum=e.minimum)}),t._zod.check=n=>{const r=n.value;if(r.length>=e.minimum)return;const o=er(r);n.issues.push({origin:o,code:"too_small",minimum:e.minimum,input:r,inst:t,continue:!e.abort})}}),Ea=N("$ZodCheckLengthEquals",(t,e)=>{ze.init(t,e),t._zod.when=n=>{const r=n.value;return!Jn(r)&&r.length!==void 0},t._zod.onattach.push(n=>{const r=n._zod.bag;r.minimum=e.length,r.maximum=e.length,r.length=e.length}),t._zod.check=n=>{const r=n.value,i=r.length;if(i===e.length)return;const o=er(r),s=i>e.length;n.issues.push({origin:o,...s?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},input:n.value,inst:t,continue:!e.abort})}}),fn=N("$ZodCheckStringFormat",(t,e)=>{var n;ze.init(t,e),t._zod.onattach.push(r=>{r._zod.bag.format=e.format,e.pattern&&(r._zod.bag.pattern=e.pattern)}),(n=t._zod).check??(n.check=r=>{if(!e.pattern)throw new Error("Not implemented.");e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:e.format,input:r.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})})}),Na=N("$ZodCheckRegex",(t,e)=>{fn.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),Ma=N("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=ya),fn.init(t,e)}),Ta=N("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=ba),fn.init(t,e)}),za=N("$ZodCheckIncludes",(t,e)=>{ze.init(t,e);const n=new RegExp(St(e.includes));e.pattern=n,t._zod.onattach.push(r=>{r._zod.bag.pattern=n}),t._zod.check=r=>{r.value.includes(e.includes,e.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:r.value,inst:t,continue:!e.abort})}}),Sa=N("$ZodCheckStartsWith",(t,e)=>{ze.init(t,e);const n=new RegExp(`^${St(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{r._zod.bag.pattern=n}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),Ca=N("$ZodCheckEndsWith",(t,e)=>{ze.init(t,e);const n=new RegExp(`.*${St(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{r._zod.bag.pattern=new RegExp(`.*${St(e.suffix)}$`)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),Aa=N("$ZodCheckOverwrite",(t,e)=>{ze.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class Ia{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(s=>s),i=Math.min(...r.map(s=>s.length-s.trimStart().length)),o=r.map(s=>s.slice(i)).map(s=>" ".repeat(this.indent*2)+s);for(const s of o)this.content.push(s)}compile(){const e=Function,n=this==null?void 0:this.args,i=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new e(...n,i.join(`
`))}}const Pa={major:4,minor:0,patch:0},ge=N("$ZodType",(t,e)=>{var i;var n;t??(t={}),t._zod.id=e.type+"_"+Xr(10),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=Pa;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const o of r)for(const s of o._zod.onattach)s(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(i=t._zod.deferred)==null||i.push(()=>{t._zod.run=t._zod.parse});else{const o=(s,u,a)=>{let h=Ct(s),d;for(const f of u){if(f._zod.when){if(!f._zod.when(s))continue}else if(h)continue;const y=s.issues.length,b=f._zod.check(s);if(b instanceof Promise&&(a==null?void 0:a.async)===!1)throw new Tt;if(d||b instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await b,s.issues.length!==y&&(h||(h=Ct(s,y)))});else{if(s.issues.length===y)continue;h||(h=Ct(s,y))}}return d?d.then(()=>s):s};t._zod.run=(s,u)=>{const a=t._zod.parse(s,u);if(a instanceof Promise){if(u.async===!1)throw new Tt;return a.then(h=>o(h,r,u))}return o(a,r,u)}}t["~standard"]={validate:o=>{var s;try{const u=Vs(t,o);return u.success?{value:u.data}:{issues:(s=u.error)==null?void 0:s.issues}}catch{return Ks(t,o).then(a=>{var h;return a.success?{value:a.data}:{issues:(h=a.error)==null?void 0:h.issues}})}},vendor:"zod",version:1}}),nr=N("$ZodString",(t,e)=>{var n;ge.init(t,e),t._zod.pattern=((n=t==null?void 0:t._zod.bag)==null?void 0:n.pattern)??ga(t._zod.bag),t._zod.parse=(r,i)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),ce=N("$ZodStringFormat",(t,e)=>{fn.init(t,e),nr.init(t,e)}),Oa=N("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=na),ce.init(t,e)}),Fa=N("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=si(r))}else e.pattern??(e.pattern=si());ce.init(t,e)}),La=N("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=ra),ce.init(t,e)}),Za=N("$ZodURL",(t,e)=>{ce.init(t,e),t._zod.check=n=>{try{const r=new URL(n.value);tr.lastIndex=0,tr.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:tr.source,input:n.value,inst:t}),e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t}));return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t})}}}),Ba=N("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=oa()),ce.init(t,e)}),Ra=N("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=ea),ce.init(t,e)}),ja=N("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=Ws),ce.init(t,e)}),Da=N("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=Qs),ce.init(t,e)}),Ua=N("$ZodULID",(t,e)=>{e.pattern??(e.pattern=Js),ce.init(t,e)}),qa=N("$ZodXID",(t,e)=>{e.pattern??(e.pattern=Ys),ce.init(t,e)}),Ga=N("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=Xs),ce.init(t,e)}),Ha=N("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=pa(e)),ce.init(t,e)}),Va=N("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=da),ce.init(t,e)}),Ka=N("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=fa(e)),ce.init(t,e)}),Wa=N("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=ta),ce.init(t,e)}),Qa=N("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=sa),ce.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.format="ipv4"})}),Ja=N("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=aa),ce.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.format="ipv6"}),t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t})}}}),Ya=N("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=ua),ce.init(t,e)}),Xa=N("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=ca),ce.init(t,e),t._zod.check=n=>{const[r,i]=n.value.split("/");try{if(!i)throw new Error;const o=Number(i);if(`${o}`!==i)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t})}}});function fi(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const eu=N("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=ha),ce.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),t._zod.check=n=>{fi(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t})}});function tu(t){if(!ai.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return fi(n)}const nu=N("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=ai),ce.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),t._zod.check=n=>{tu(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t})}}),ru=N("$ZodE164",(t,e)=>{e.pattern??(e.pattern=la),ce.init(t,e)});function iu(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n,i=JSON.parse(atob(r));return!("typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&(!("alg"in i)||i.alg!==e))}catch{return!1}}const ou=N("$ZodJWT",(t,e)=>{ce.init(t,e),t._zod.check=n=>{iu(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t})}}),pi=N("$ZodNumber",(t,e)=>{ge.init(t,e),t._zod.pattern=t._zod.bag.pattern??_a,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const i=n.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return n;const o=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:t,...o?{received:o}:{}}),n}}),su=N("$ZodNumber",(t,e)=>{xa.init(t,e),pi.init(t,e)}),au=N("$ZodBoolean",(t,e)=>{ge.init(t,e),t._zod.pattern=ma,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}const i=n.value;return typeof i=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:t}),n}}),uu=N("$ZodUnknown",(t,e)=>{ge.init(t,e),t._zod.parse=n=>n}),cu=N("$ZodNever",(t,e)=>{ge.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function gi(t,e,n){t.issues.length&&e.issues.push(...Xn(n,t.issues)),e.value[n]=t.value}const hu=N("$ZodArray",(t,e)=>{ge.init(t,e),t._zod.parse=(n,r)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:t}),n;n.value=Array(i.length);const o=[];for(let s=0;s<i.length;s++){const u=i[s],a=e.element._zod.run({value:u,issues:[]},r);a instanceof Promise?o.push(a.then(h=>gi(h,n,s))):gi(a,n,s)}return o.length?Promise.all(o).then(()=>n):n}});function pn(t,e,n){t.issues.length&&e.issues.push(...Xn(n,t.issues)),e.value[n]=t.value}function vi(t,e,n,r){t.issues.length?r[n]===void 0?n in r?e.value[n]=void 0:e.value[n]=t.value:e.issues.push(...Xn(n,t.issues)):t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}const lu=N("$ZodObject",(t,e)=>{ge.init(t,e);const n=Yr(()=>{const f=Object.keys(e.shape),y=Os(e.shape);return{shape:e.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(y)}});fe(t._zod,"disc",()=>{const f=e.shape,y=new Map;let b=!1;for(const m in f){const k=f[m]._zod;if(k.values||k.disc){b=!0;const $={values:new Set(k.values??[]),maps:k.disc?[k.disc]:[]};y.set(m,$)}}if(b)return y});const r=f=>{const y=new Ia(["shape","payload","ctx"]),{keys:b,optionalKeys:m}=n.value,k=E=>{const M=zt(E);return`shape[${M}]._zod.run({ value: input[${M}], issues: [] }, ctx)`};y.write("const input = payload.value;");const $=Object.create(null);for(const E of b)$[E]=Xr(15);y.write("const newResult = {}");for(const E of b)if(m.has(E)){const M=$[E];y.write(`const ${M} = ${k(E)};`);const T=zt(E);y.write(`
        if (${M}.issues.length) {
          if (input[${T}] === undefined) {
            if (${T} in input) {
              newResult[${T}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${M}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${T}, ...iss.path] : [${T}],
              }))
            );
          }
        } else if (${M}.value === undefined) {
          if (${T} in input) newResult[${T}] = undefined;
        } else {
          newResult[${T}] = ${M}.value;
        }
        `)}else{const M=$[E];y.write(`const ${M} = ${k(E)};`),y.write(`
          if (${M}.issues.length) payload.issues = payload.issues.concat(${M}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${zt(E)}, ...iss.path] : [${zt(E)}]
          })));`),y.write(`newResult[${zt(E)}] = ${M}.value`)}y.write("payload.value = newResult;"),y.write("return payload;");const _=y.compile();return(E,M)=>_(f,E,M)};let i;const o=As,s=!Qn.jitless,a=s&&Is.value,{catchall:h}=e;let d;t._zod.parse=(f,y)=>{d??(d=n.value);const b=f.value;if(!o(b))return f.issues.push({expected:"object",code:"invalid_type",input:b,inst:t}),f;const m=[];if(s&&a&&(y==null?void 0:y.async)===!1&&y.jitless!==!0)i||(i=r(e.shape)),f=i(f,y);else{f.value={};const M=d.shape;for(const T of d.keys){const z=M[T],A=z._zod.run({value:b[T],issues:[]},y),R=z._zod.optin==="optional";A instanceof Promise?m.push(A.then(D=>R?vi(D,f,T,b):pn(D,f,T))):R?vi(A,f,T,b):pn(A,f,T)}}if(!h)return m.length?Promise.all(m).then(()=>f):f;const k=[],$=d.keySet,_=h._zod,E=_.def.type;for(const M of Object.keys(b)){if($.has(M))continue;if(E==="never"){k.push(M);continue}const T=_.run({value:b[M],issues:[]},y);T instanceof Promise?m.push(T.then(z=>pn(z,f,M))):pn(T,f,M)}return k.length&&f.issues.push({code:"unrecognized_keys",keys:k,input:b,inst:t}),m.length?Promise.all(m).then(()=>f):f}});function _i(t,e,n,r){for(const i of t)if(i.issues.length===0)return e.value=i.value,e;return e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(i=>i.issues.map(o=>ut(o,r,st())))}),e}const du=N("$ZodUnion",(t,e)=>{ge.init(t,e),fe(t._zod,"values",()=>{if(e.options.every(n=>n._zod.values))return new Set(e.options.flatMap(n=>Array.from(n._zod.values)))}),fe(t._zod,"pattern",()=>{if(e.options.every(n=>n._zod.pattern)){const n=e.options.map(r=>r._zod.pattern);return new RegExp(`^(${n.map(r=>Yn(r.source)).join("|")})$`)}}),t._zod.parse=(n,r)=>{let i=!1;const o=[];for(const s of e.options){const u=s._zod.run({value:n.value,issues:[]},r);if(u instanceof Promise)o.push(u),i=!0;else{if(u.issues.length===0)return u;o.push(u)}}return i?Promise.all(o).then(s=>_i(s,n,t,r)):_i(o,n,t,r)}}),fu=N("$ZodIntersection",(t,e)=>{ge.init(t,e),t._zod.parse=(n,r)=>{const{value:i}=n,o=e.left._zod.run({value:i,issues:[]},r),s=e.right._zod.run({value:i,issues:[]},r);return o instanceof Promise||s instanceof Promise?Promise.all([o,s]).then(([a,h])=>mi(n,a,h)):mi(n,o,s)}});function rr(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(ei(t)&&ei(e)){const n=Object.keys(e),r=Object.keys(t).filter(o=>n.indexOf(o)!==-1),i={...t,...e};for(const o of r){const s=rr(t[o],e[o]);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};i[o]=s.data}return{valid:!0,data:i}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const i=t[r],o=e[r],s=rr(i,o);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function mi(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),Ct(t))return t;const r=rr(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const pu=N("$ZodEnum",(t,e)=>{ge.init(t,e);const n=Object.values(e.entries).filter(i=>typeof i=="number"),r=Object.entries(e.entries).filter(([i,o])=>n.indexOf(+i)===-1).map(([i,o])=>o);t._zod.values=new Set(r),t._zod.pattern=new RegExp(`^(${r.filter(i=>Ps.has(typeof i)).map(i=>typeof i=="string"?St(i):i.toString()).join("|")})$`),t._zod.parse=(i,o)=>{const s=i.value;return t._zod.values.has(s)||i.issues.push({code:"invalid_value",values:r,input:s,inst:t}),i}}),gu=N("$ZodTransform",(t,e)=>{ge.init(t,e),t._zod.parse=(n,r)=>{const i=e.transform(n.value,n);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(s=>(n.value=s,n));if(i instanceof Promise)throw new Tt;return n.value=i,n}}),vu=N("$ZodOptional",(t,e)=>{ge.init(t,e),t._zod.optin="optional",t._zod.optout="optional",fe(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),fe(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Yn(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>n.value===void 0?n:e.innerType._zod.run(n,r)}),_u=N("$ZodNullable",(t,e)=>{ge.init(t,e),fe(t._zod,"optin",()=>e.innerType._zod.optin),fe(t._zod,"optout",()=>e.innerType._zod.optout),fe(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Yn(n.source)}|null)$`):void 0}),fe(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),mu=N("$ZodDefault",(t,e)=>{ge.init(t,e),t._zod.optin="optional",fe(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=e.defaultValue,n;const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>yi(o,e)):yi(i,e)}});function yi(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const yu=N("$ZodPrefault",(t,e)=>{ge.init(t,e),t._zod.optin="optional",fe(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),bu=N("$ZodNonOptional",(t,e)=>{ge.init(t,e),fe(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>bi(o,t)):bi(i,t)}});function bi(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const wu=N("$ZodCatch",(t,e)=>{ge.init(t,e),fe(t._zod,"optin",()=>e.innerType._zod.optin),fe(t._zod,"optout",()=>e.innerType._zod.optout),fe(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>(n.value=o.value,o.issues.length&&(n.value=e.catchValue({...n,error:{issues:o.issues.map(s=>ut(s,r,st()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(o=>ut(o,r,st()))},input:n.value}),n.issues=[]),n)}}),xu=N("$ZodPipe",(t,e)=>{ge.init(t,e),fe(t._zod,"values",()=>e.in._zod.values),fe(t._zod,"optin",()=>e.in._zod.optin),fe(t._zod,"optout",()=>e.out._zod.optout),t._zod.parse=(n,r)=>{const i=e.in._zod.run(n,r);return i instanceof Promise?i.then(o=>wi(o,e,r)):wi(i,e,r)}});function wi(t,e,n){return Ct(t)?t:e.out._zod.run({value:t.value,issues:t.issues},n)}const $u=N("$ZodReadonly",(t,e)=>{ge.init(t,e),fe(t._zod,"disc",()=>e.innerType._zod.disc),fe(t._zod,"optin",()=>e.innerType._zod.optin),fe(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(n,r)=>{const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(xi):xi(i)}});function xi(t){return t.value=Object.freeze(t.value),t}const ku=N("$ZodCustom",(t,e)=>{ze.init(t,e),ge.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,i=e.fn(r);if(i instanceof Promise)return i.then(o=>$i(o,n,r,t));$i(i,n,r,t)}});function $i(t,e,n,r){if(!t){const i={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),e.issues.push(At(i))}}class Eu{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}remove(e){return this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function Nu(){return new Eu}const gn=Nu();function Mu(t,e){return new t({type:"string",...U(e)})}function Tu(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...U(e)})}function ki(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...U(e)})}function zu(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...U(e)})}function Su(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...U(e)})}function Cu(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...U(e)})}function Au(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...U(e)})}function Iu(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...U(e)})}function Pu(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...U(e)})}function Ou(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...U(e)})}function Fu(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...U(e)})}function Lu(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...U(e)})}function Zu(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...U(e)})}function Bu(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...U(e)})}function Ru(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...U(e)})}function ju(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...U(e)})}function Du(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...U(e)})}function Uu(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...U(e)})}function qu(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...U(e)})}function Gu(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...U(e)})}function Hu(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...U(e)})}function Vu(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...U(e)})}function Ku(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...U(e)})}function Wu(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...U(e)})}function Qu(t,e){return new t({type:"string",format:"date",check:"string_format",...U(e)})}function Ju(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...U(e)})}function Yu(t,e){return new t({type:"string",format:"duration",check:"string_format",...U(e)})}function Xu(t,e){return new t({type:"number",checks:[],...U(e)})}function ec(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...U(e)})}function tc(t,e){return new t({type:"boolean",...U(e)})}function nc(t){return new t({type:"unknown"})}function rc(t,e){return new t({type:"never",...U(e)})}function Ei(t,e){return new li({check:"less_than",...U(e),value:t,inclusive:!1})}function ir(t,e){return new li({check:"less_than",...U(e),value:t,inclusive:!0})}function Ni(t,e){return new di({check:"greater_than",...U(e),value:t,inclusive:!1})}function or(t,e){return new di({check:"greater_than",...U(e),value:t,inclusive:!0})}function Mi(t,e){return new wa({check:"multiple_of",...U(e),value:t})}function Ti(t,e){return new $a({check:"max_length",...U(e),maximum:t})}function vn(t,e){return new ka({check:"min_length",...U(e),minimum:t})}function zi(t,e){return new Ea({check:"length_equals",...U(e),length:t})}function ic(t,e){return new Na({check:"string_format",format:"regex",...U(e),pattern:t})}function oc(t){return new Ma({check:"string_format",format:"lowercase",...U(t)})}function sc(t){return new Ta({check:"string_format",format:"uppercase",...U(t)})}function ac(t,e){return new za({check:"string_format",format:"includes",...U(e),includes:t})}function uc(t,e){return new Sa({check:"string_format",format:"starts_with",...U(e),prefix:t})}function cc(t,e){return new Ca({check:"string_format",format:"ends_with",...U(e),suffix:t})}function It(t){return new Aa({check:"overwrite",tx:t})}function hc(t){return It(e=>e.normalize(t))}function lc(){return It(t=>t.trim())}function dc(){return It(t=>t.toLowerCase())}function fc(){return It(t=>t.toUpperCase())}function pc(t,e,n){return new t({type:"array",element:e,...U(n)})}function gc(t,e,n){return new t({type:"custom",check:"custom",fn:e,...U(n)})}const vc=N("ZodISODateTime",(t,e)=>{Ha.init(t,e),de.init(t,e)});function _c(t){return Wu(vc,t)}const mc=N("ZodISODate",(t,e)=>{Va.init(t,e),de.init(t,e)});function yc(t){return Qu(mc,t)}const bc=N("ZodISOTime",(t,e)=>{Ka.init(t,e),de.init(t,e)});function wc(t){return Ju(bc,t)}const xc=N("ZodISODuration",(t,e)=>{Wa.init(t,e),de.init(t,e)});function $c(t){return Yu(xc,t)}const _n=N("ZodError",(t,e)=>{ni.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>qs(t,n)},flatten:{value:n=>Us(t,n)},addIssue:{value:n=>t.issues.push(n)},addIssues:{value:n=>t.issues.push(...n)},isEmpty:{get(){return t.issues.length===0}}})},{Parent:Error}),kc=Gs(_n),Ec=Hs(_n),Nc=ii(_n),Mc=oi(_n),ve=N("ZodType",(t,e)=>(ge.init(t,e),t.def=e,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone({...e,checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),t.clone=(n,r)=>at(t,n,r),t.brand=()=>t,t.register=(n,r)=>(n.add(t,r),t),t.parse=(n,r)=>kc(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>Nc(t,n,r),t.parseAsync=async(n,r)=>Ec(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>Mc(t,n,r),t.spa=t.safeParseAsync,t.refine=(n,r)=>t.check(ph(n,r)),t.superRefine=n=>t.check(gh(n)),t.overwrite=n=>t.check(It(n)),t.optional=()=>wn(t),t.nullable=()=>Bi(t),t.nullish=()=>wn(Bi(t)),t.nonoptional=n=>ah(t,n),t.array=()=>Fi(t),t.or=n=>Yc([t,n]),t.and=n=>eh(t,n),t.transform=n=>ji(t,bn(n)),t.default=n=>ih(t,n),t.prefault=n=>sh(t,n),t.catch=n=>ch(t,n),t.pipe=n=>ji(t,n),t.readonly=()=>dh(t),t.describe=n=>{const r=t.clone();return gn.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){var n;return(n=gn.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return gn.get(t);const r=t.clone();return gn.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),Si=N("_ZodString",(t,e)=>{nr.init(t,e),ve.init(t,e);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(ic(...r)),t.includes=(...r)=>t.check(ac(...r)),t.startsWith=r=>t.check(uc(r)),t.endsWith=r=>t.check(cc(r)),t.min=(...r)=>t.check(vn(...r)),t.max=(...r)=>t.check(Ti(...r)),t.length=(...r)=>t.check(zi(...r)),t.nonempty=(...r)=>t.check(vn(1,...r)),t.lowercase=r=>t.check(oc(r)),t.uppercase=r=>t.check(sc(r)),t.trim=()=>t.check(lc()),t.normalize=(...r)=>t.check(hc(...r)),t.toLowerCase=()=>t.check(dc()),t.toUpperCase=()=>t.check(fc())}),Tc=N("ZodString",(t,e)=>{nr.init(t,e),Si.init(t,e),t.email=n=>t.check(Tu(zc,n)),t.url=n=>t.check(Iu(Sc,n)),t.jwt=n=>t.check(Ku(Gc,n)),t.emoji=n=>t.check(Pu(Cc,n)),t.guid=n=>t.check(ki(Ci,n)),t.uuid=n=>t.check(zu(mn,n)),t.uuidv4=n=>t.check(Su(mn,n)),t.uuidv6=n=>t.check(Cu(mn,n)),t.uuidv7=n=>t.check(Au(mn,n)),t.nanoid=n=>t.check(Ou(Ac,n)),t.guid=n=>t.check(ki(Ci,n)),t.cuid=n=>t.check(Fu(Ic,n)),t.cuid2=n=>t.check(Lu(Pc,n)),t.ulid=n=>t.check(Zu(Oc,n)),t.base64=n=>t.check(Gu(Dc,n)),t.base64url=n=>t.check(Hu(Uc,n)),t.xid=n=>t.check(Bu(Fc,n)),t.ksuid=n=>t.check(Ru(Lc,n)),t.ipv4=n=>t.check(ju(Zc,n)),t.ipv6=n=>t.check(Du(Bc,n)),t.cidrv4=n=>t.check(Uu(Rc,n)),t.cidrv6=n=>t.check(qu(jc,n)),t.e164=n=>t.check(Vu(qc,n)),t.datetime=n=>t.check(_c(n)),t.date=n=>t.check(yc(n)),t.time=n=>t.check(wc(n)),t.duration=n=>t.check($c(n))});function Ee(t){return Mu(Tc,t)}const de=N("ZodStringFormat",(t,e)=>{ce.init(t,e),Si.init(t,e)}),zc=N("ZodEmail",(t,e)=>{La.init(t,e),de.init(t,e)}),Ci=N("ZodGUID",(t,e)=>{Oa.init(t,e),de.init(t,e)}),mn=N("ZodUUID",(t,e)=>{Fa.init(t,e),de.init(t,e)}),Sc=N("ZodURL",(t,e)=>{Za.init(t,e),de.init(t,e)}),Cc=N("ZodEmoji",(t,e)=>{Ba.init(t,e),de.init(t,e)}),Ac=N("ZodNanoID",(t,e)=>{Ra.init(t,e),de.init(t,e)}),Ic=N("ZodCUID",(t,e)=>{ja.init(t,e),de.init(t,e)}),Pc=N("ZodCUID2",(t,e)=>{Da.init(t,e),de.init(t,e)}),Oc=N("ZodULID",(t,e)=>{Ua.init(t,e),de.init(t,e)}),Fc=N("ZodXID",(t,e)=>{qa.init(t,e),de.init(t,e)}),Lc=N("ZodKSUID",(t,e)=>{Ga.init(t,e),de.init(t,e)}),Zc=N("ZodIPv4",(t,e)=>{Qa.init(t,e),de.init(t,e)}),Bc=N("ZodIPv6",(t,e)=>{Ja.init(t,e),de.init(t,e)}),Rc=N("ZodCIDRv4",(t,e)=>{Ya.init(t,e),de.init(t,e)}),jc=N("ZodCIDRv6",(t,e)=>{Xa.init(t,e),de.init(t,e)}),Dc=N("ZodBase64",(t,e)=>{eu.init(t,e),de.init(t,e)}),Uc=N("ZodBase64URL",(t,e)=>{nu.init(t,e),de.init(t,e)}),qc=N("ZodE164",(t,e)=>{ru.init(t,e),de.init(t,e)}),Gc=N("ZodJWT",(t,e)=>{ou.init(t,e),de.init(t,e)}),Ai=N("ZodNumber",(t,e)=>{pi.init(t,e),ve.init(t,e),t.gt=(r,i)=>t.check(Ni(r,i)),t.gte=(r,i)=>t.check(or(r,i)),t.min=(r,i)=>t.check(or(r,i)),t.lt=(r,i)=>t.check(Ei(r,i)),t.lte=(r,i)=>t.check(ir(r,i)),t.max=(r,i)=>t.check(ir(r,i)),t.int=r=>t.check(Ii(r)),t.safe=r=>t.check(Ii(r)),t.positive=r=>t.check(Ni(0,r)),t.nonnegative=r=>t.check(or(0,r)),t.negative=r=>t.check(Ei(0,r)),t.nonpositive=r=>t.check(ir(0,r)),t.multipleOf=(r,i)=>t.check(Mi(r,i)),t.step=(r,i)=>t.check(Mi(r,i)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function We(t){return Xu(Ai,t)}const Hc=N("ZodNumberFormat",(t,e)=>{su.init(t,e),Ai.init(t,e)});function Ii(t){return ec(Hc,t)}const Vc=N("ZodBoolean",(t,e)=>{au.init(t,e),ve.init(t,e)});function Pt(t){return tc(Vc,t)}const Kc=N("ZodUnknown",(t,e)=>{uu.init(t,e),ve.init(t,e)});function Pi(){return nc(Kc)}const Wc=N("ZodNever",(t,e)=>{cu.init(t,e),ve.init(t,e)});function Oi(t){return rc(Wc,t)}const Qc=N("ZodArray",(t,e)=>{hu.init(t,e),ve.init(t,e),t.element=e.element,t.min=(n,r)=>t.check(vn(n,r)),t.nonempty=n=>t.check(vn(1,n)),t.max=(n,r)=>t.check(Ti(n,r)),t.length=(n,r)=>t.check(zi(n,r))});function Fi(t,e){return pc(Qc,t,e)}const Li=N("ZodObject",(t,e)=>{lu.init(t,e),ve.init(t,e),fe(t,"shape",()=>Object.fromEntries(Object.entries(t._zod.def.shape))),t.keyof=()=>yn(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Pi()}),t.loose=()=>t.clone({...t._zod.def,catchall:Pi()}),t.strict=()=>t.clone({...t._zod.def,catchall:Oi()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>Bs(t,n),t.merge=n=>Rs(t,n),t.pick=n=>Ls(t,n),t.omit=n=>Zs(t,n),t.partial=(...n)=>js(Zi,t,n[0]),t.required=(...n)=>Ds(Ri,t,n[0])});function _t(t,e){const n={type:"object",get shape(){return ln(this,"shape",{...t}),this.shape},...U(e)};return new Li(n)}function Ie(t,e){return new Li({type:"object",get shape(){return ln(this,"shape",{...t}),this.shape},catchall:Oi(),...U(e)})}const Jc=N("ZodUnion",(t,e)=>{du.init(t,e),ve.init(t,e),t.options=e.options});function Yc(t,e){return new Jc({type:"union",options:t,...U(e)})}const Xc=N("ZodIntersection",(t,e)=>{fu.init(t,e),ve.init(t,e)});function eh(t,e){return new Xc({type:"intersection",left:t,right:e})}const sr=N("ZodEnum",(t,e)=>{pu.init(t,e),ve.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,i)=>{const o={};for(const s of r)if(n.has(s))o[s]=e.entries[s];else throw new Error(`Key ${s} not found in enum`);return new sr({...e,checks:[],...U(i),entries:o})},t.exclude=(r,i)=>{const o={...e.entries};for(const s of r)if(n.has(s))delete o[s];else throw new Error(`Key ${s} not found in enum`);return new sr({...e,checks:[],...U(i),entries:o})}});function yn(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new sr({type:"enum",entries:n,...U(e)})}const th=N("ZodTransform",(t,e)=>{gu.init(t,e),ve.init(t,e),t._zod.parse=(n,r)=>{n.addIssue=o=>{if(typeof o=="string")n.issues.push(At(o,n.value,e));else{const s=o;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=t),s.continue??(s.continue=!0),n.issues.push(At(s))}};const i=e.transform(n.value,n);return i instanceof Promise?i.then(o=>(n.value=o,n)):(n.value=i,n)}});function bn(t){return new th({type:"transform",transform:t})}const Zi=N("ZodOptional",(t,e)=>{vu.init(t,e),ve.init(t,e),t.unwrap=()=>t._zod.def.innerType});function wn(t){return new Zi({type:"optional",innerType:t})}const nh=N("ZodNullable",(t,e)=>{_u.init(t,e),ve.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Bi(t){return new nh({type:"nullable",innerType:t})}const rh=N("ZodDefault",(t,e)=>{mu.init(t,e),ve.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function ih(t,e){return new rh({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const oh=N("ZodPrefault",(t,e)=>{yu.init(t,e),ve.init(t,e),t.unwrap=()=>t._zod.def.innerType});function sh(t,e){return new oh({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const Ri=N("ZodNonOptional",(t,e)=>{bu.init(t,e),ve.init(t,e),t.unwrap=()=>t._zod.def.innerType});function ah(t,e){return new Ri({type:"nonoptional",innerType:t,...U(e)})}const uh=N("ZodCatch",(t,e)=>{wu.init(t,e),ve.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function ch(t,e){return new uh({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const hh=N("ZodPipe",(t,e)=>{xu.init(t,e),ve.init(t,e),t.in=e.in,t.out=e.out});function ji(t,e){return new hh({type:"pipe",in:t,out:e})}const lh=N("ZodReadonly",(t,e)=>{$u.init(t,e),ve.init(t,e)});function dh(t){return new lh({type:"readonly",innerType:t})}const Di=N("ZodCustom",(t,e)=>{ku.init(t,e),ve.init(t,e)});function fh(t,e){const n=new ze({check:"custom",...U(e)});return n._zod.check=t,n}function ph(t,e={}){return gc(Di,t,e)}function gh(t,e){const n=fh(r=>(r.addIssue=i=>{if(typeof i=="string")r.issues.push(At(i,r.value,n._zod.def));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=n),o.continue??(o.continue=!n._zod.def.abort),r.issues.push(At(o))}},t(r.value,r)),e);return n}function xn(t,e={error:`Input not instance of ${t.name}`}){const n=new Di({type:"custom",check:"custom",fn:r=>r instanceof t,abort:!0,...U(e)});return n._zod.bag.Class=t,n}const vh=yn(["box","sphere","cylinder","cone","capsule","torus-knot","tetrahedron","octahedron","dodecahedron","icosahedron","rhombicuboctahedron","triangular_prism","pentagonal_prism","hexagonal_prism","square_pyramid","pentagonal_pyramid","triangular_dipyramid","pentagonal_dipyramid","elongated_square_dypyramid","elongated_pentagonal_dipyramid","elongated_pentagonal_cupola","goldberg","icosphere","geodesic"]);function ar(t){const e=Te.get(t);if(e===null){console.warn("invalid color:",t);return}let n;switch(e.model){case"rgb":n=Ke.rgb.hex(e.value[0],e.value[1],e.value[2]);break;case"hsl":n=Ke.hsl.hex(e.value[0],e.value[1],e.value[2]);break;case"hwb":n=Ke.hwb.hex(e.value[0],e.value[1],e.value[2]);break;default:console.warn("unknown color model",e.model);return}const r=e.value[3]??1,i=Math.round(r*255).toString(16).padStart(2,"0").toUpperCase();return`#${n}${i}`}const Ot=Ie({size:We().min(0).default(1),opacity:We().min(0).max(1).default(1),wireframe:Pt().default(!1),color:Ee().pipe(bn(ar)).default("#D3D3D3FF"),label:Pt().default(!1),shape:vh.default("icosphere"),enabled:Pt().default(!0),nodeMeshFactory:xn(Function).default(()=>Wn.defaultNodeMeshFactory)}),Ui=Ie({baseColor:Ee().pipe(bn(ar)).default("#D3D3D3FF")}),_h=yn(["plain","moving"]),Ft=Ie({type:_h.default("moving"),arrowCap:Pt().default(!1),color:Ee().pipe(bn(ar)).default("#FFFFFFFF"),width:We().default(.25),movingLineOpts:Ui.default(Ui.parse({})),edgeMeshFactory:xn(Function).default(()=>Be.defaultEdgeMeshFactory)}),mh=Ie({selector:Ee(),style:Ot}),yh=Ie({selector:Ee(),style:Ft}),bh=Ie({node:mh,edge:yh}).partial().refine(t=>!!t.node||!!t.edge,"StyleLayer requires either 'node' or 'edge'."),wh=Fi(bh),qi=Ie({pinOnDrag:Pt().default(!0)}),ur=Ee().or(We());_t({id:ur,metadata:_t()}),_t({src:ur,dst:ur,metadata:_t()});const cr=_t({nodeIdPath:Ee().default("id"),edgeSrcIdPath:Ee().default("src"),edgeDstIdPath:Ee().default("dst")}),Gi=Ie({skybox:Ee().default(""),node:Ot.default(Ot.parse({})),edge:Ft.default(Ft.parse({})),startingCameraDistance:We().default(30)}),Hi=Ie({node:qi.default(qi.parse({})),fetchNodes:wn(xn(Function)),fetchEdges:wn(xn(Function))}),xh=yn(["ngraph","d3"]),Vi=Ie({type:xh.default("ngraph"),preSteps:We().default(0),stepMultiplier:We().default(1),minDelta:We().default(0)}),$h=Ie({nodeListProp:Ee().default("nodes"),edgeListProp:Ee().default("edges"),nodeIdProp:Ee().default("id"),edgeSrcIdProp:Ee().default("src"),edgeDstIdProp:Ee().default("dst"),fetchOpts:_t().default({})});function kh(t={}){return $h.parse(t)}const Eh=Ie({style:Gi.default(Gi.parse({})),behavior:Hi.default(Hi.parse({})),engine:Vi.default(Vi.parse({})),knownFields:cr.default(cr.parse({}))});function Nh(t={}){return Eh.parse(t)}function Mh(t,e,n){var r,i=1;t==null&&(t=0),e==null&&(e=0),n==null&&(n=0);function o(){var s,u=r.length,a,h=0,d=0,f=0;for(s=0;s<u;++s)a=r[s],h+=a.x||0,d+=a.y||0,f+=a.z||0;for(h=(h/u-t)*i,d=(d/u-e)*i,f=(f/u-n)*i,s=0;s<u;++s)a=r[s],h&&(a.x-=h),d&&(a.y-=d),f&&(a.z-=f)}return o.initialize=function(s){r=s},o.x=function(s){return arguments.length?(t=+s,o):t},o.y=function(s){return arguments.length?(e=+s,o):e},o.z=function(s){return arguments.length?(n=+s,o):n},o.strength=function(s){return arguments.length?(i=+s,o):i},o}function Th(t){const e=+this._x.call(null,t);return Ki(this.cover(e),e,t)}function Ki(t,e,n){if(isNaN(e))return t;var r,i=t._root,o={data:n},s=t._x0,u=t._x1,a,h,d,f,y;if(!i)return t._root=o,t;for(;i.length;)if((d=e>=(a=(s+u)/2))?s=a:u=a,r=i,!(i=i[f=+d]))return r[f]=o,t;if(h=+t._x.call(null,i.data),e===h)return o.next=i,r?r[f]=o:t._root=o,t;do r=r?r[f]=new Array(2):t._root=new Array(2),(d=e>=(a=(s+u)/2))?s=a:u=a;while((f=+d)==(y=+(h>=a)));return r[y]=i,r[f]=o,t}function zh(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e);let r=1/0,i=-1/0;for(let o=0,s;o<e;++o)isNaN(s=+this._x.call(null,t[o]))||(n[o]=s,s<r&&(r=s),s>i&&(i=s));if(r>i)return this;this.cover(r).cover(i);for(let o=0;o<e;++o)Ki(this,n[o],t[o]);return this}function Sh(t){if(isNaN(t=+t))return this;var e=this._x0,n=this._x1;if(isNaN(e))n=(e=Math.floor(t))+1;else{for(var r=n-e||1,i=this._root,o,s;e>t||t>=n;)switch(s=+(t<e),o=new Array(2),o[s]=i,i=o,r*=2,s){case 0:n=e+r;break;case 1:e=n-r;break}this._root&&this._root.length&&(this._root=i)}return this._x0=e,this._x1=n,this}function Ch(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Ah(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Ue(t,e,n){this.node=t,this.x0=e,this.x1=n}function Ih(t,e){var n,r=this._x0,i,o,s=this._x1,u=[],a=this._root,h,d;for(a&&u.push(new Ue(a,r,s)),e==null?e=1/0:(r=t-e,s=t+e);h=u.pop();)if(!(!(a=h.node)||(i=h.x0)>s||(o=h.x1)<r))if(a.length){var f=(i+o)/2;u.push(new Ue(a[1],f,o),new Ue(a[0],i,f)),(d=+(t>=f))&&(h=u[u.length-1],u[u.length-1]=u[u.length-1-d],u[u.length-1-d]=h)}else{var y=Math.abs(t-+this._x.call(null,a.data));y<e&&(e=y,r=t-y,s=t+y,n=a.data)}return n}function Ph(t){if(isNaN(a=+this._x.call(null,t)))return this;var e,n=this._root,r,i,o,s=this._x0,u=this._x1,a,h,d,f,y;if(!n)return this;if(n.length)for(;;){if((d=a>=(h=(s+u)/2))?s=h:u=h,e=n,!(n=n[f=+d]))return this;if(!n.length)break;e[f+1&1]&&(r=e,y=f)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[f]=o:delete e[f],(n=e[0]||e[1])&&n===(e[1]||e[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function Oh(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Fh(){return this._root}function Lh(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Zh(t){var e=[],n,r=this._root,i,o,s;for(r&&e.push(new Ue(r,this._x0,this._x1));n=e.pop();)if(!t(r=n.node,o=n.x0,s=n.x1)&&r.length){var u=(o+s)/2;(i=r[1])&&e.push(new Ue(i,u,s)),(i=r[0])&&e.push(new Ue(i,o,u))}return this}function Bh(t){var e=[],n=[],r;for(this._root&&e.push(new Ue(this._root,this._x0,this._x1));r=e.pop();){var i=r.node;if(i.length){var o,s=r.x0,u=r.x1,a=(s+u)/2;(o=i[0])&&e.push(new Ue(o,s,a)),(o=i[1])&&e.push(new Ue(o,a,u))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.x1);return this}function Rh(t){return t[0]}function jh(t){return arguments.length?(this._x=t,this):this._x}function Wi(t,e){var n=new hr(e??Rh,NaN,NaN);return t==null?n:n.addAll(t)}function hr(t,e,n){this._x=t,this._x0=e,this._x1=n,this._root=void 0}function Qi(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Se=Wi.prototype=hr.prototype;Se.copy=function(){var t=new hr(this._x,this._x0,this._x1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Qi(e),t;for(n=[{source:e,target:t._root=new Array(2)}];e=n.pop();)for(var i=0;i<2;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(2)}):e.target[i]=Qi(r));return t},Se.add=Th,Se.addAll=zh,Se.cover=Sh,Se.data=Ch,Se.extent=Ah,Se.find=Ih,Se.remove=Ph,Se.removeAll=Oh,Se.root=Fh,Se.size=Lh,Se.visit=Zh,Se.visitAfter=Bh,Se.x=jh;function Dh(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Ji(this.cover(e,n),e,n,t)}function Ji(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o=t._root,s={data:r},u=t._x0,a=t._y0,h=t._x1,d=t._y1,f,y,b,m,k,$,_,E;if(!o)return t._root=s,t;for(;o.length;)if((k=e>=(f=(u+h)/2))?u=f:h=f,($=n>=(y=(a+d)/2))?a=y:d=y,i=o,!(o=o[_=$<<1|k]))return i[_]=s,t;if(b=+t._x.call(null,o.data),m=+t._y.call(null,o.data),e===b&&n===m)return s.next=o,i?i[_]=s:t._root=s,t;do i=i?i[_]=new Array(4):t._root=new Array(4),(k=e>=(f=(u+h)/2))?u=f:h=f,($=n>=(y=(a+d)/2))?a=y:d=y;while((_=$<<1|k)===(E=(m>=y)<<1|b>=f));return i[E]=o,i[_]=s,t}function Uh(t){var e,n,r=t.length,i,o,s=new Array(r),u=new Array(r),a=1/0,h=1/0,d=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=i,u[n]=o,i<a&&(a=i),i>d&&(d=i),o<h&&(h=o),o>f&&(f=o));if(a>d||h>f)return this;for(this.cover(a,h).cover(d,f),n=0;n<r;++n)Ji(this,s[n],u[n],t[n]);return this}function qh(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var s=i-n||1,u=this._root,a,h;n>t||t>=i||r>e||e>=o;)switch(h=(e<r)<<1|t<n,a=new Array(4),a[h]=u,u=a,s*=2,h){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Gh(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Hh(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ne(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Vh(t,e,n){var r,i=this._x0,o=this._y0,s,u,a,h,d=this._x1,f=this._y1,y=[],b=this._root,m,k;for(b&&y.push(new Ne(b,i,o,d,f)),n==null?n=1/0:(i=t-n,o=e-n,d=t+n,f=e+n,n*=n);m=y.pop();)if(!(!(b=m.node)||(s=m.x0)>d||(u=m.y0)>f||(a=m.x1)<i||(h=m.y1)<o))if(b.length){var $=(s+a)/2,_=(u+h)/2;y.push(new Ne(b[3],$,_,a,h),new Ne(b[2],s,_,$,h),new Ne(b[1],$,u,a,_),new Ne(b[0],s,u,$,_)),(k=(e>=_)<<1|t>=$)&&(m=y[y.length-1],y[y.length-1]=y[y.length-1-k],y[y.length-1-k]=m)}else{var E=t-+this._x.call(null,b.data),M=e-+this._y.call(null,b.data),T=E*E+M*M;if(T<n){var z=Math.sqrt(n=T);i=t-z,o=e-z,d=t+z,f=e+z,r=b.data}}return r}function Kh(t){if(isNaN(d=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,o,s=this._x0,u=this._y0,a=this._x1,h=this._y1,d,f,y,b,m,k,$,_;if(!n)return this;if(n.length)for(;;){if((m=d>=(y=(s+a)/2))?s=y:a=y,(k=f>=(b=(u+h)/2))?u=b:h=b,e=n,!(n=n[$=k<<1|m]))return this;if(!n.length)break;(e[$+1&3]||e[$+2&3]||e[$+3&3])&&(r=e,_=$)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[$]=o:delete e[$],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[_]=n:this._root=n),this):(this._root=o,this)}function Wh(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Qh(){return this._root}function Jh(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Yh(t){var e=[],n,r=this._root,i,o,s,u,a;for(r&&e.push(new Ne(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,o=n.x0,s=n.y0,u=n.x1,a=n.y1)&&r.length){var h=(o+u)/2,d=(s+a)/2;(i=r[3])&&e.push(new Ne(i,h,d,u,a)),(i=r[2])&&e.push(new Ne(i,o,d,h,a)),(i=r[1])&&e.push(new Ne(i,h,s,u,d)),(i=r[0])&&e.push(new Ne(i,o,s,h,d))}return this}function Xh(t){var e=[],n=[],r;for(this._root&&e.push(new Ne(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,s=r.x0,u=r.y0,a=r.x1,h=r.y1,d=(s+a)/2,f=(u+h)/2;(o=i[0])&&e.push(new Ne(o,s,u,d,f)),(o=i[1])&&e.push(new Ne(o,d,u,a,f)),(o=i[2])&&e.push(new Ne(o,s,f,d,h)),(o=i[3])&&e.push(new Ne(o,d,f,a,h))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function el(t){return t[0]}function tl(t){return arguments.length?(this._x=t,this):this._x}function nl(t){return t[1]}function rl(t){return arguments.length?(this._y=t,this):this._y}function Yi(t,e,n){var r=new lr(e??el,n??nl,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function lr(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Xi(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Me=Yi.prototype=lr.prototype;Me.copy=function(){var t=new lr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Xi(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Xi(r));return t},Me.add=Dh,Me.addAll=Uh,Me.cover=qh,Me.data=Gh,Me.extent=Hh,Me.find=Vh,Me.remove=Kh,Me.removeAll=Wh,Me.root=Qh,Me.size=Jh,Me.visit=Yh,Me.visitAfter=Xh,Me.x=tl,Me.y=rl;function il(t){const e=+this._x.call(null,t),n=+this._y.call(null,t),r=+this._z.call(null,t);return eo(this.cover(e,n,r),e,n,r,t)}function eo(t,e,n,r,i){if(isNaN(e)||isNaN(n)||isNaN(r))return t;var o,s=t._root,u={data:i},a=t._x0,h=t._y0,d=t._z0,f=t._x1,y=t._y1,b=t._z1,m,k,$,_,E,M,T,z,A,R,D;if(!s)return t._root=u,t;for(;s.length;)if((T=e>=(m=(a+f)/2))?a=m:f=m,(z=n>=(k=(h+y)/2))?h=k:y=k,(A=r>=($=(d+b)/2))?d=$:b=$,o=s,!(s=s[R=A<<2|z<<1|T]))return o[R]=u,t;if(_=+t._x.call(null,s.data),E=+t._y.call(null,s.data),M=+t._z.call(null,s.data),e===_&&n===E&&r===M)return u.next=s,o?o[R]=u:t._root=u,t;do o=o?o[R]=new Array(8):t._root=new Array(8),(T=e>=(m=(a+f)/2))?a=m:f=m,(z=n>=(k=(h+y)/2))?h=k:y=k,(A=r>=($=(d+b)/2))?d=$:b=$;while((R=A<<2|z<<1|T)===(D=(M>=$)<<2|(E>=k)<<1|_>=m));return o[D]=s,o[R]=u,t}function ol(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e),r=new Float64Array(e),i=new Float64Array(e);let o=1/0,s=1/0,u=1/0,a=-1/0,h=-1/0,d=-1/0;for(let f=0,y,b,m,k;f<e;++f)isNaN(b=+this._x.call(null,y=t[f]))||isNaN(m=+this._y.call(null,y))||isNaN(k=+this._z.call(null,y))||(n[f]=b,r[f]=m,i[f]=k,b<o&&(o=b),b>a&&(a=b),m<s&&(s=m),m>h&&(h=m),k<u&&(u=k),k>d&&(d=k));if(o>a||s>h||u>d)return this;this.cover(o,s,u).cover(a,h,d);for(let f=0;f<e;++f)eo(this,n[f],r[f],i[f],t[f]);return this}function sl(t,e,n){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._z0,s=this._x1,u=this._y1,a=this._z1;if(isNaN(r))s=(r=Math.floor(t))+1,u=(i=Math.floor(e))+1,a=(o=Math.floor(n))+1;else{for(var h=s-r||1,d=this._root,f,y;r>t||t>=s||i>e||e>=u||o>n||n>=a;)switch(y=(n<o)<<2|(e<i)<<1|t<r,f=new Array(8),f[y]=d,d=f,h*=2,y){case 0:s=r+h,u=i+h,a=o+h;break;case 1:r=s-h,u=i+h,a=o+h;break;case 2:s=r+h,i=u-h,a=o+h;break;case 3:r=s-h,i=u-h,a=o+h;break;case 4:s=r+h,u=i+h,o=a-h;break;case 5:r=s-h,u=i+h,o=a-h;break;case 6:s=r+h,i=u-h,o=a-h;break;case 7:r=s-h,i=u-h,o=a-h;break}this._root&&this._root.length&&(this._root=d)}return this._x0=r,this._y0=i,this._z0=o,this._x1=s,this._y1=u,this._z1=a,this}function al(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function ul(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function ie(t,e,n,r,i,o,s){this.node=t,this.x0=e,this.y0=n,this.z0=r,this.x1=i,this.y1=o,this.z1=s}function cl(t,e,n,r){var i,o=this._x0,s=this._y0,u=this._z0,a,h,d,f,y,b,m=this._x1,k=this._y1,$=this._z1,_=[],E=this._root,M,T;for(E&&_.push(new ie(E,o,s,u,m,k,$)),r==null?r=1/0:(o=t-r,s=e-r,u=n-r,m=t+r,k=e+r,$=n+r,r*=r);M=_.pop();)if(!(!(E=M.node)||(a=M.x0)>m||(h=M.y0)>k||(d=M.z0)>$||(f=M.x1)<o||(y=M.y1)<s||(b=M.z1)<u))if(E.length){var z=(a+f)/2,A=(h+y)/2,R=(d+b)/2;_.push(new ie(E[7],z,A,R,f,y,b),new ie(E[6],a,A,R,z,y,b),new ie(E[5],z,h,R,f,A,b),new ie(E[4],a,h,R,z,A,b),new ie(E[3],z,A,d,f,y,R),new ie(E[2],a,A,d,z,y,R),new ie(E[1],z,h,d,f,A,R),new ie(E[0],a,h,d,z,A,R)),(T=(n>=R)<<2|(e>=A)<<1|t>=z)&&(M=_[_.length-1],_[_.length-1]=_[_.length-1-T],_[_.length-1-T]=M)}else{var D=t-+this._x.call(null,E.data),J=e-+this._y.call(null,E.data),ee=n-+this._z.call(null,E.data),te=D*D+J*J+ee*ee;if(te<r){var W=Math.sqrt(r=te);o=t-W,s=e-W,u=n-W,m=t+W,k=e+W,$=n+W,i=E.data}}return i}function hl(t){if(isNaN(y=+this._x.call(null,t))||isNaN(b=+this._y.call(null,t))||isNaN(m=+this._z.call(null,t)))return this;var e,n=this._root,r,i,o,s=this._x0,u=this._y0,a=this._z0,h=this._x1,d=this._y1,f=this._z1,y,b,m,k,$,_,E,M,T,z,A;if(!n)return this;if(n.length)for(;;){if((E=y>=(k=(s+h)/2))?s=k:h=k,(M=b>=($=(u+d)/2))?u=$:d=$,(T=m>=(_=(a+f)/2))?a=_:f=_,e=n,!(n=n[z=T<<2|M<<1|E]))return this;if(!n.length)break;(e[z+1&7]||e[z+2&7]||e[z+3&7]||e[z+4&7]||e[z+5&7]||e[z+6&7]||e[z+7&7])&&(r=e,A=z)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[z]=o:delete e[z],(n=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&n===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[A]=n:this._root=n),this):(this._root=o,this)}function ll(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function dl(){return this._root}function fl(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function pl(t){var e=[],n,r=this._root,i,o,s,u,a,h,d;for(r&&e.push(new ie(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();)if(!t(r=n.node,o=n.x0,s=n.y0,u=n.z0,a=n.x1,h=n.y1,d=n.z1)&&r.length){var f=(o+a)/2,y=(s+h)/2,b=(u+d)/2;(i=r[7])&&e.push(new ie(i,f,y,b,a,h,d)),(i=r[6])&&e.push(new ie(i,o,y,b,f,h,d)),(i=r[5])&&e.push(new ie(i,f,s,b,a,y,d)),(i=r[4])&&e.push(new ie(i,o,s,b,f,y,d)),(i=r[3])&&e.push(new ie(i,f,y,u,a,h,b)),(i=r[2])&&e.push(new ie(i,o,y,u,f,h,b)),(i=r[1])&&e.push(new ie(i,f,s,u,a,y,b)),(i=r[0])&&e.push(new ie(i,o,s,u,f,y,b))}return this}function gl(t){var e=[],n=[],r;for(this._root&&e.push(new ie(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();){var i=r.node;if(i.length){var o,s=r.x0,u=r.y0,a=r.z0,h=r.x1,d=r.y1,f=r.z1,y=(s+h)/2,b=(u+d)/2,m=(a+f)/2;(o=i[0])&&e.push(new ie(o,s,u,a,y,b,m)),(o=i[1])&&e.push(new ie(o,y,u,a,h,b,m)),(o=i[2])&&e.push(new ie(o,s,b,a,y,d,m)),(o=i[3])&&e.push(new ie(o,y,b,a,h,d,m)),(o=i[4])&&e.push(new ie(o,s,u,m,y,b,f)),(o=i[5])&&e.push(new ie(o,y,u,m,h,b,f)),(o=i[6])&&e.push(new ie(o,s,b,m,y,d,f)),(o=i[7])&&e.push(new ie(o,y,b,m,h,d,f))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function vl(t){return t[0]}function _l(t){return arguments.length?(this._x=t,this):this._x}function ml(t){return t[1]}function yl(t){return arguments.length?(this._y=t,this):this._y}function bl(t){return t[2]}function wl(t){return arguments.length?(this._z=t,this):this._z}function to(t,e,n,r){var i=new dr(e??vl,n??ml,r??bl,NaN,NaN,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function dr(t,e,n,r,i,o,s,u,a){this._x=t,this._y=e,this._z=n,this._x0=r,this._y0=i,this._z0=o,this._x1=s,this._y1=u,this._z1=a,this._root=void 0}function no(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var xe=to.prototype=dr.prototype;xe.copy=function(){var t=new dr(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=no(e),t;for(n=[{source:e,target:t._root=new Array(8)}];e=n.pop();)for(var i=0;i<8;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(8)}):e.target[i]=no(r));return t},xe.add=il,xe.addAll=ol,xe.cover=sl,xe.data=al,xe.extent=ul,xe.find=cl,xe.remove=hl,xe.removeAll=ll,xe.root=dl,xe.size=fl,xe.visit=pl,xe.visitAfter=gl,xe.x=_l,xe.y=yl,xe.z=wl;function Lt(t){return function(){return t}}function qe(t){return(t()-.5)*1e-6}function xl(t){return t.index}function ro(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function $l(t){var e=xl,n=y,r,i=Lt(30),o,s,u,a,h,d,f=1;t==null&&(t=[]);function y(_){return 1/Math.min(a[_.source.index],a[_.target.index])}function b(_){for(var E=0,M=t.length;E<f;++E)for(var T=0,z,A,R,D=0,J=0,ee=0,te,W;T<M;++T)z=t[T],A=z.source,R=z.target,D=R.x+R.vx-A.x-A.vx||qe(d),u>1&&(J=R.y+R.vy-A.y-A.vy||qe(d)),u>2&&(ee=R.z+R.vz-A.z-A.vz||qe(d)),te=Math.sqrt(D*D+J*J+ee*ee),te=(te-o[T])/te*_*r[T],D*=te,J*=te,ee*=te,R.vx-=D*(W=h[T]),u>1&&(R.vy-=J*W),u>2&&(R.vz-=ee*W),A.vx+=D*(W=1-W),u>1&&(A.vy+=J*W),u>2&&(A.vz+=ee*W)}function m(){if(s){var _,E=s.length,M=t.length,T=new Map(s.map((A,R)=>[e(A,R,s),A])),z;for(_=0,a=new Array(E);_<M;++_)z=t[_],z.index=_,typeof z.source!="object"&&(z.source=ro(T,z.source)),typeof z.target!="object"&&(z.target=ro(T,z.target)),a[z.source.index]=(a[z.source.index]||0)+1,a[z.target.index]=(a[z.target.index]||0)+1;for(_=0,h=new Array(M);_<M;++_)z=t[_],h[_]=a[z.source.index]/(a[z.source.index]+a[z.target.index]);r=new Array(M),k(),o=new Array(M),$()}}function k(){if(s)for(var _=0,E=t.length;_<E;++_)r[_]=+n(t[_],_,t)}function $(){if(s)for(var _=0,E=t.length;_<E;++_)o[_]=+i(t[_],_,t)}return b.initialize=function(_,...E){s=_,d=E.find(M=>typeof M=="function")||Math.random,u=E.find(M=>[1,2,3].includes(M))||2,m()},b.links=function(_){return arguments.length?(t=_,m(),b):t},b.id=function(_){return arguments.length?(e=_,b):e},b.iterations=function(_){return arguments.length?(f=+_,b):f},b.strength=function(_){return arguments.length?(n=typeof _=="function"?_:Lt(+_),k(),b):n},b.distance=function(_){return arguments.length?(i=typeof _=="function"?_:Lt(+_),$(),b):i},b}var kl={value:()=>{}};function io(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new $n(n)}function $n(t){this._=t}function El(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}$n.prototype=io.prototype={constructor:$n,on:function(t,e){var n=this._,r=El(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=Nl(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=oo(n[i],t.name,e);else if(e==null)for(i in n)n[i]=oo(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new $n(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Nl(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function oo(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=kl,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var mt=0,Zt=0,Bt=0,so=1e3,kn,Rt,En=0,ct=0,Nn=0,jt=typeof performance=="object"&&performance.now?performance:Date,ao=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function uo(){return ct||(ao(Ml),ct=jt.now()+Nn)}function Ml(){ct=0}function fr(){this._call=this._time=this._next=null}fr.prototype=co.prototype={constructor:fr,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?uo():+n)+(e==null?0:+e),!this._next&&Rt!==this&&(Rt?Rt._next=this:kn=this,Rt=this),this._call=t,this._time=n,pr()},stop:function(){this._call&&(this._call=null,this._time=1/0,pr())}};function co(t,e,n){var r=new fr;return r.restart(t,e,n),r}function Tl(){uo(),++mt;for(var t=kn,e;t;)(e=ct-t._time)>=0&&t._call.call(void 0,e),t=t._next;--mt}function ho(){ct=(En=jt.now())+Nn,mt=Zt=0;try{Tl()}finally{mt=0,Sl(),ct=0}}function zl(){var t=jt.now(),e=t-En;e>so&&(Nn-=e,En=t)}function Sl(){for(var t,e=kn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:kn=n);Rt=t,pr(r)}function pr(t){if(!mt){Zt&&(Zt=clearTimeout(Zt));var e=t-ct;e>24?(t<1/0&&(Zt=setTimeout(ho,t-jt.now()-Nn)),Bt&&(Bt=clearInterval(Bt))):(Bt||(En=jt.now(),Bt=setInterval(zl,so)),mt=1,ao(ho))}}const Cl=1664525,Al=1013904223,lo=4294967296;function Il(){let t=1;return()=>(t=(Cl*t+Al)%lo)/lo}var fo=3;function gr(t){return t.x}function po(t){return t.y}function Pl(t){return t.z}var Ol=10,Fl=Math.PI*(3-Math.sqrt(5)),Ll=Math.PI*20/(9+Math.sqrt(221));function Zl(t,e){e=e||2;var n=Math.min(fo,Math.max(1,Math.round(e))),r,i=1,o=.001,s=1-Math.pow(o,1/300),u=0,a=.6,h=new Map,d=co(b),f=io("tick","end"),y=Il();t==null&&(t=[]);function b(){m(),f.call("tick",r),i<o&&(d.stop(),f.call("end",r))}function m(_){var E,M=t.length,T;_===void 0&&(_=1);for(var z=0;z<_;++z)for(i+=(u-i)*s,h.forEach(function(A){A(i)}),E=0;E<M;++E)T=t[E],T.fx==null?T.x+=T.vx*=a:(T.x=T.fx,T.vx=0),n>1&&(T.fy==null?T.y+=T.vy*=a:(T.y=T.fy,T.vy=0)),n>2&&(T.fz==null?T.z+=T.vz*=a:(T.z=T.fz,T.vz=0));return r}function k(){for(var _=0,E=t.length,M;_<E;++_){if(M=t[_],M.index=_,M.fx!=null&&(M.x=M.fx),M.fy!=null&&(M.y=M.fy),M.fz!=null&&(M.z=M.fz),isNaN(M.x)||n>1&&isNaN(M.y)||n>2&&isNaN(M.z)){var T=Ol*(n>2?Math.cbrt(.5+_):n>1?Math.sqrt(.5+_):_),z=_*Fl,A=_*Ll;n===1?M.x=T:n===2?(M.x=T*Math.cos(z),M.y=T*Math.sin(z)):(M.x=T*Math.sin(z)*Math.cos(A),M.y=T*Math.cos(z),M.z=T*Math.sin(z)*Math.sin(A))}(isNaN(M.vx)||n>1&&isNaN(M.vy)||n>2&&isNaN(M.vz))&&(M.vx=0,n>1&&(M.vy=0),n>2&&(M.vz=0))}}function $(_){return _.initialize&&_.initialize(t,y,n),_}return k(),r={tick:m,restart:function(){return d.restart(b),r},stop:function(){return d.stop(),r},numDimensions:function(_){return arguments.length?(n=Math.min(fo,Math.max(1,Math.round(_))),h.forEach($),r):n},nodes:function(_){return arguments.length?(t=_,k(),h.forEach($),r):t},alpha:function(_){return arguments.length?(i=+_,r):i},alphaMin:function(_){return arguments.length?(o=+_,r):o},alphaDecay:function(_){return arguments.length?(s=+_,r):+s},alphaTarget:function(_){return arguments.length?(u=+_,r):u},velocityDecay:function(_){return arguments.length?(a=1-_,r):1-a},randomSource:function(_){return arguments.length?(y=_,h.forEach($),r):y},force:function(_,E){return arguments.length>1?(E==null?h.delete(_):h.set(_,$(E)),r):h.get(_)},find:function(){var _=Array.prototype.slice.call(arguments),E=_.shift()||0,M=(n>1?_.shift():null)||0,T=(n>2?_.shift():null)||0,z=_.shift()||1/0,A=0,R=t.length,D,J,ee,te,W,$e;for(z*=z,A=0;A<R;++A)W=t[A],D=E-W.x,J=M-(W.y||0),ee=T-(W.z||0),te=D*D+J*J+ee*ee,te<z&&($e=W,z=te);return $e},on:function(_,E){return arguments.length>1?(f.on(_,E),r):f.on(_)}}}function Bl(){var t,e,n,r,i,o=Lt(-30),s,u=1,a=1/0,h=.81;function d(m){var k,$=t.length,_=(e===1?Wi(t,gr):e===2?Yi(t,gr,po):e===3?to(t,gr,po,Pl):null).visitAfter(y);for(i=m,k=0;k<$;++k)n=t[k],_.visit(b)}function f(){if(t){var m,k=t.length,$;for(s=new Array(k),m=0;m<k;++m)$=t[m],s[$.index]=+o($,m,t)}}function y(m){var k=0,$,_,E=0,M,T,z,A,R=m.length;if(R){for(M=T=z=A=0;A<R;++A)($=m[A])&&(_=Math.abs($.value))&&(k+=$.value,E+=_,M+=_*($.x||0),T+=_*($.y||0),z+=_*($.z||0));k*=Math.sqrt(4/R),m.x=M/E,e>1&&(m.y=T/E),e>2&&(m.z=z/E)}else{$=m,$.x=$.data.x,e>1&&($.y=$.data.y),e>2&&($.z=$.data.z);do k+=s[$.data.index];while($=$.next)}m.value=k}function b(m,k,$,_,E){if(!m.value)return!0;var M=[$,_,E][e-1],T=m.x-n.x,z=e>1?m.y-n.y:0,A=e>2?m.z-n.z:0,R=M-k,D=T*T+z*z+A*A;if(R*R/h<D)return D<a&&(T===0&&(T=qe(r),D+=T*T),e>1&&z===0&&(z=qe(r),D+=z*z),e>2&&A===0&&(A=qe(r),D+=A*A),D<u&&(D=Math.sqrt(u*D)),n.vx+=T*m.value*i/D,e>1&&(n.vy+=z*m.value*i/D),e>2&&(n.vz+=A*m.value*i/D)),!0;if(m.length||D>=a)return;(m.data!==n||m.next)&&(T===0&&(T=qe(r),D+=T*T),e>1&&z===0&&(z=qe(r),D+=z*z),e>2&&A===0&&(A=qe(r),D+=A*A),D<u&&(D=Math.sqrt(u*D)));do m.data!==n&&(R=s[m.data.index]*i/D,n.vx+=T*R,e>1&&(n.vy+=z*R),e>2&&(n.vz+=A*R));while(m=m.next)}return d.initialize=function(m,...k){t=m,r=k.find($=>typeof $=="function")||Math.random,e=k.find($=>[1,2,3].includes($))||2,f()},d.strength=function(m){return arguments.length?(o=typeof m=="function"?m:Lt(+m),f(),d):o},d.distanceMin=function(m){return arguments.length?(u=m*m,d):Math.sqrt(u)},d.distanceMax=function(m){return arguments.length?(a=m*m,d):Math.sqrt(a)},d.theta=function(m){return arguments.length?(h=m*m,d):Math.sqrt(h)},d}function vr(t){return typeof t=="object"&&t!==null&&"index"in t&&typeof t.index=="number"&&"x"in t&&typeof t.x=="number"&&"y"in t&&typeof t.y=="number"&&"z"in t&&typeof t.z=="number"&&"vx"in t&&typeof t.vx=="number"&&"vy"in t&&typeof t.vy=="number"&&"vz"in t&&typeof t.vz=="number"}function Rl(t){return!!(typeof t=="object"&&t!==null&&Object.hasOwn(t,"index")&&"index"in t&&typeof t.index=="number"&&"source"in t&&vr(t.source)&&"target"in t&&vr(t.target))}class jl{constructor(){this.d3AlphaMin=.1,this.d3AlphaTarget=0,this.d3AlphaDecay=.0228,this.d3VelocityDecay=.4,this.nodeMapping=new Map,this.edgeMapping=new Map,this.newNodeMap=new Map,this.newEdgeMap=new Map,this.reheat=!1,this.d3ForceLayout=Zl().numDimensions(3).alpha(1).force("link",$l()).force("charge",Bl()).force("center",Mh()).force("dagRadial",null).stop(),this.d3ForceLayout.force("link").id(e=>e.id)}get graphNeedsRefresh(){return!!this.newNodeMap.size||!!this.newEdgeMap.size}async init(){}refresh(){if(this.graphNeedsRefresh||this.reheat){let e=[...this.nodeMapping.values()];e=e.concat([...this.newNodeMap.values()]),this.d3ForceLayout.alpha(1).nodes(e).stop();for(const r of this.newNodeMap.entries()){const i=r[0],o=r[1];if(!vr(o))throw new Error("Internal error: Node is not settled as a complete D3 Node");this.nodeMapping.set(i,o)}this.newNodeMap.clear();let n=[...this.edgeMapping.values()];n=n.concat([...this.newEdgeMap.values()]),this.d3ForceLayout.force("link").links(n);for(const r of this.newEdgeMap.entries()){const i=r[0],o=r[1];if(!Rl(o))throw new Error("Internal error: Edge is not settled as a complete D3 Edge");this.edgeMapping.set(i,o)}this.newEdgeMap.clear()}}step(){this.refresh(),this.d3ForceLayout.tick()}get isSettled(){return console.log(`this.d3ForceLayout.alpha() ${this.d3ForceLayout.alpha()}`),this.d3ForceLayout.alpha()<this.d3AlphaMin}addNode(e){this.newNodeMap.set(e,{id:e.id})}addEdge(e){this.newEdgeMap.set(e,{source:e.srcId,target:e.dstId})}get nodes(){return this.nodeMapping.keys()}get edges(){return this.edgeMapping.keys()}getNodePosition(e){const n=this._getMappedNode(e);if(n.x===void 0||n.y===void 0||n.z===void 0)throw new Error("Internal error: Node not initialized in D3GraphEngine");return{x:n.x,y:n.y,z:n.z}}setNodePosition(e,n){const r=this._getMappedNode(e);r.x=n.x,r.y=n.y,r.z=n.z??0,this.reheat=!0}getEdgePosition(e){const n=this._getMappedEdge(e);return{src:{x:n.source.x,y:n.source.y,z:n.source.z},dst:{x:n.target.x,y:n.target.y,z:n.target.z}}}pin(e){const n=this._getMappedNode(e);n.fx=n.x,n.fy=n.y,n.fz=n.z,this.reheat=!0}unpin(e){const n=this._getMappedNode(e);n.fx=void 0,n.fy=void 0,n.fz=void 0,this.reheat=!0}_getMappedNode(e){this.refresh();const n=this.nodeMapping.get(e);if(!n)throw new Error("Internal error: Node not found in D3GraphEngine");return n}_getMappedEdge(e){this.refresh();const n=this.edgeMapping.get(e);if(!n)throw new Error("Internal error: Edge not found in D3GraphEngine");return n}}class Dl{constructor(){this.meshCacheMap=new Map,this.hits=0,this.misses=0}get(e,n){let r=this.meshCacheMap.get(e);return r?(this.hits++,r.createInstance(e)):(this.misses++,r=n(),r.isVisible=!1,this.meshCacheMap.set(e,r),r.createInstance(e))}reset(){this.hits=0,this.misses=0}}var Mn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _r=function(e){ql(e);var n=Ul(e);return e.on=n.on,e.off=n.off,e.fire=n.fire,e};function Ul(t){var e=Object.create(null);return{on:function(n,r,i){if(typeof r!="function")throw new Error("callback is expected to be a function");var o=e[n];return o||(o=e[n]=[]),o.push({callback:r,ctx:i}),t},off:function(n,r){var i=typeof n>"u";if(i)return e=Object.create(null),t;if(e[n]){var o=typeof r!="function";if(o)delete e[n];else for(var s=e[n],u=0;u<s.length;++u)s[u].callback===r&&s.splice(u,1)}return t},fire:function(n){var r=e[n];if(!r)return t;var i;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var o=0;o<r.length;++o){var s=r[o];s.callback.apply(s.ctx,i)}return t}}}function ql(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}var Gl=Vl,Hl=_r;function Vl(t){if(t=t||{},"uniqueLinkId"in t&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),t.multigraph=t.uniqueLinkId),t.multigraph===void 0&&(t.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,n=new Map,r={},i=0,o=t.multigraph?T:M,s=[],u=O,a=O,h=O,d=O,f={version:20,addNode:k,addLink:E,removeLink:D,removeNode:_,getNode:$,getNodeCount:z,getLinkCount:A,getEdgeCount:A,getLinksCount:A,getNodesCount:z,getLinks:R,forEachNode:ke,forEachLinkedNode:$e,forEachLink:W,beginUpdate:h,endUpdate:d,clear:te,hasLink:ee,hasNode:$,getLink:ee};return Hl(f),y(),f;function y(){var F=f.on;f.on=j;function j(){return f.beginUpdate=h=re,f.endUpdate=d=ye,u=b,a=m,f.on=F,F.apply(f,arguments)}}function b(F,j){s.push({link:F,changeType:j})}function m(F,j){s.push({node:F,changeType:j})}function k(F,j){if(F===void 0)throw new Error("Invalid node identifier");h();var K=$(F);return K?(K.data=j,a(K,"update")):(K=new Kl(F,j),a(K,"add")),e.set(F,K),d(),K}function $(F){return e.get(F)}function _(F){var j=$(F);if(!j)return!1;h();var K=j.links;return K&&(K.forEach(J),j.links=null),e.delete(F),a(j,"remove"),d(),!0}function E(F,j,K){h();var q=$(F)||k(F),ue=$(j)||k(j),ae=o(F,j,K),pe=n.has(ae.id);return n.set(ae.id,ae),go(q,ae),F!==j&&go(ue,ae),u(ae,pe?"update":"add"),d(),ae}function M(F,j,K){var q=zn(F,j),ue=n.get(q);return ue?(ue.data=K,ue):new vo(F,j,K,q)}function T(F,j,K){var q=zn(F,j),ue=r.hasOwnProperty(q);if(ue||ee(F,j)){ue||(r[q]=0);var ae="@"+ ++r[q];q=zn(F+ae,j+ae)}return new vo(F,j,K,q)}function z(){return e.size}function A(){return n.size}function R(F){var j=$(F);return j?j.links:null}function D(F,j){return j!==void 0&&(F=ee(F,j)),J(F)}function J(F){if(!F||!n.get(F.id))return!1;h(),n.delete(F.id);var j=$(F.fromId),K=$(F.toId);return j&&j.links.delete(F),K&&K.links.delete(F),u(F,"remove"),d(),!0}function ee(F,j){if(!(F===void 0||j===void 0))return n.get(zn(F,j))}function te(){h(),ke(function(F){_(F.id)}),d()}function W(F){if(typeof F=="function")for(var j=n.values(),K=j.next();!K.done;){if(F(K.value))return!0;K=j.next()}}function $e(F,j,K){var q=$(F);if(q&&q.links&&typeof j=="function")return K?C(q.links,F,j):I(q.links,F,j)}function I(F,j,K){for(var q,ue=F.values(),ae=ue.next();!ae.done;){var pe=ae.value,rt=pe.fromId===j?pe.toId:pe.fromId;if(q=K(e.get(rt),pe),q)return!0;ae=ue.next()}}function C(F,j,K){for(var q,ue=F.values(),ae=ue.next();!ae.done;){var pe=ae.value;if(pe.fromId===j&&(q=K(e.get(pe.toId),pe),q))return!0;ae=ue.next()}}function O(){}function re(){i+=1}function ye(){i-=1,i===0&&s.length>0&&(f.fire("changed",s),s.length=0)}function ke(F){if(typeof F!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+F);for(var j=e.values(),K=j.next();!K.done;){if(F(K.value))return!0;K=j.next()}}}function Kl(t,e){this.id=t,this.links=null,this.data=e}function go(t,e){t.links?t.links.add(e):t.links=new Set([e])}function vo(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function zn(t,e){return t.toString()+" "+e.toString()}const Wl=Tn(Gl);var mr={exports:{}},Dt={exports:{}},_o=function(e){return e===0?"x":e===1?"y":e===2?"z":"c"+(e+1)};const Ql=_o;var yt=function(e){return n;function n(r,i){let o=i&&i.indent||0,s=i&&i.join!==void 0?i.join:`
`,u=Array(o+1).join(" "),a=[];for(let h=0;h<e;++h){let d=Ql(h),f=h===0?"":u;a.push(f+r.replace(/{var}/g,d))}return a.join(s)}};const mo=yt;Dt.exports=Jl,Dt.exports.generateCreateBodyFunctionBody=yo,Dt.exports.getVectorCode=wo,Dt.exports.getBodyCode=bo;function Jl(t,e){let n=yo(t,e),{Body:r}=new Function(n)();return r}function yo(t,e){return`
${wo(t,e)}
${bo(t)}
return {Body: Body, Vector: Vector};
`}function bo(t){let e=mo(t),n=e("{var}",{join:", "});return`
function Body(${n}) {
  this.isPinned = false;
  this.pos = new Vector(${n});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${n}) {
  ${e("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function wo(t,e){let n=mo(t),r="";return e&&(r=`${n(`
   var v{var};
Object.defineProperty(this, '{var}', {
  set: function(v) { 
    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');
    v{var} = v; 
  },
  get: function() { return v{var}; }
});`)}`),`function Vector(${n("{var}",{join:", "})}) {
  ${r}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${n('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${n("this.{var} = v.{var};",{indent:4})}
    } else {
      ${n('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${n("this.{var} = ",{join:""})}0;
  };`}var Yl=Dt.exports,Qe={exports:{}};const yr=yt,Je=_o;Qe.exports=Xl,Qe.exports.generateQuadTreeFunctionBody=xo,Qe.exports.getInsertStackCode=Mo,Qe.exports.getQuadNodeCode=No,Qe.exports.isSamePosition=$o,Qe.exports.getChildBodyCode=Eo,Qe.exports.setChildBodyCode=ko;function Xl(t){let e=xo(t);return new Function(e)()}function xo(t){let e=yr(t),n=Math.pow(2,t);return`
${Mo()}
${No(t)}
${$o(t)}
${Eo(t)}
${ko(t)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${s("      node.")}
      node.body = null;
      node.mass = ${e("node.mass_{var} = ",{join:""})}0;
      ${e("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${e("var d{var};",{indent:4})}
    var r; 
    ${e("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${e("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${e("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${e("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < , treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${Je(0)} - node.min_${Je(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${e("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${o()}
        }
      }
    }

    ${e("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${e("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${e("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${e("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${e("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${e("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${e("root.min_{var} = {var}min;",{indent:4})}
    ${e("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${e("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${e("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${e("var min_{var} = node.min_{var};",{indent:8})}
        ${e("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${i(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${e("child.min_{var} = min_{var};",{indent:10})}
          ${e("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${e("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${e("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`;function i(u){let a=[],h=Array(u+1).join(" ");for(let d=0;d<t;++d)a.push(h+`if (${Je(d)} > max_${Je(d)}) {`),a.push(h+`  quadIdx = quadIdx + ${Math.pow(2,d)};`),a.push(h+`  min_${Je(d)} = max_${Je(d)};`),a.push(h+`  max_${Je(d)} = node.max_${Je(d)};`),a.push(h+"}");return a.join(`
`)}function o(){let u=Array(11).join(" "),a=[];for(let h=0;h<n;++h)a.push(u+`if (node.quad${h}) {`),a.push(u+`  queue[pushIdx] = node.quad${h};`),a.push(u+"  queueLength += 1;"),a.push(u+"  pushIdx += 1;"),a.push(u+"}");return a.join(`
`)}function s(u){let a=[];for(let h=0;h<n;++h)a.push(`${u}quad${h} = null;`);return a.join(`
`)}}function $o(t){let e=yr(t);return`
  function isSamePosition(point1, point2) {
    ${e("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${e("d{var} < 1e-8",{join:" && "})};
  }  
`}function ko(t){var e=Math.pow(2,t);return`
function setChild(node, idx, child) {
  ${n()}
}`;function n(){let r=[];for(let i=0;i<e;++i){let o=i===0?"  ":"  else ";r.push(`${o}if (idx === ${i}) node.quad${i} = child;`)}return r.join(`
`)}}function Eo(t){return`function getChild(node, idx) {
${e()}
  return null;
}`;function e(){let n=[],r=Math.pow(2,t);for(let i=0;i<r;++i)n.push(`  if (idx === ${i}) return node.quad${i};`);return n.join(`
`)}}function No(t){let e=yr(t),n=Math.pow(2,t);var r=`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${i("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${e("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${e("this.min_{var} = 0;",{indent:2})}
  ${e("this.max_{var} = 0;",{indent:2})}
}
`;return r;function i(o){let s=[];for(let u=0;u<n;++u)s.push(`${o}quad${u} = null;`);return s.join(`
`)}}function Mo(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}var ed=Qe.exports,br={exports:{}};br.exports=nd,br.exports.generateFunctionBody=To;const td=yt;function nd(t){let e=To(t);return new Function("bodies","settings","random",e)}function To(t){let e=td(t);return`
  var boundingBox = {
    ${e("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${e("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${e("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${e("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${e("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${e("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${e("var max_{var} = -Infinity;",{indent:4})}
    ${e("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${e("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${e("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${e("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${e("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${e("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}var rd=br.exports,wr={exports:{}};const id=yt;wr.exports=od,wr.exports.generateCreateDragForceFunctionBody=zo;function od(t){let e=zo(t);return new Function("options",e)}function zo(t){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${id(t)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}var sd=wr.exports,xr={exports:{}};const ad=yt;xr.exports=ud,xr.exports.generateCreateSpringForceFunctionBody=So;function ud(t){let e=So(t);return new Function("options","random",e)}function So(t){let e=ad(t);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${e("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${e("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${e("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}var cd=xr.exports,$r={exports:{}};const hd=yt;$r.exports=ld,$r.exports.generateIntegratorFunctionBody=Co;function ld(t){let e=Co(t);return new Function("bodies","timeStep","adaptiveTimeStepWeight",e)}function Co(t){let e=hd(t);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${e("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${e("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${e("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${e("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${e("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${e("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${e("body.pos.{var} += d{var};",{indent:4})}

    ${e("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${e("t{var} * t{var}",{join:" + "})})/length;
`}var dd=$r.exports,kr,Ao;function fd(){if(Ao)return kr;Ao=1,kr=t;function t(e,n,r,i){this.from=e,this.to=n,this.length=r,this.coefficient=i}return kr}var Er,Io;function pd(){if(Io)return Er;Io=1,Er=t;function t(e,n){var r;if(e||(e={}),n){for(r in n)if(n.hasOwnProperty(r)){var i=e.hasOwnProperty(r),o=typeof n[r],s=!i||typeof e[r]!==o;s?e[r]=n[r]:o==="object"&&(e[r]=t(e[r],n[r]))}}return e}return Er}var Ut={exports:{}},Po;function gd(){if(Po)return Ut.exports;Po=1,Ut.exports=t,Ut.exports.random=t,Ut.exports.randomIterator=u;function t(a){var h=typeof a=="number"?a:+new Date;return new e(h)}function e(a){this.seed=a}e.prototype.next=s,e.prototype.nextDouble=o,e.prototype.uniform=o,e.prototype.gaussian=n;function n(){var a,h,d;do h=this.nextDouble()*2-1,d=this.nextDouble()*2-1,a=h*h+d*d;while(a>=1||a===0);return h*Math.sqrt(-2*Math.log(a)/a)}e.prototype.levy=r;function r(){var a=1.5,h=Math.pow(i(1+a)*Math.sin(Math.PI*a/2)/(i((1+a)/2)*a*Math.pow(2,(a-1)/2)),1/a);return this.gaussian()*h/Math.pow(Math.abs(this.gaussian()),1/a)}function i(a){return Math.sqrt(2*Math.PI/a)*Math.pow(1/Math.E*(a+1/(12*a-1/(10*a))),a)}function o(){var a=this.seed;return a=a+2127912214+(a<<12)&4294967295,a=(a^3345072700^a>>>19)&4294967295,a=a+374761393+(a<<5)&4294967295,a=(a+3550635116^a<<9)&4294967295,a=a+4251993797+(a<<3)&4294967295,a=(a^3042594569^a>>>16)&4294967295,this.seed=a,(a&268435455)/268435456}function s(a){return Math.floor(this.nextDouble()*a)}function u(a,h){var d=h||t();if(typeof d.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:y,shuffle:f};function f(){var b,m,k;for(b=a.length-1;b>0;--b)m=d.next(b+1),k=a[m],a[m]=a[b],a[b]=k;return a}function y(b){var m,k,$;for(m=a.length-1;m>0;--m)k=d.next(m+1),$=a[k],a[k]=a[m],a[m]=$,b($);a.length&&b(a[0])}}return Ut.exports}var Oo=xd,vd=Yl,_d=ed,md=rd,yd=sd,bd=cd,wd=dd,Fo={};function xd(t){var e=fd(),n=pd(),r=_r;if(t){if(t.springCoeff!==void 0)throw new Error("springCoeff was renamed to springCoefficient");if(t.dragCoeff!==void 0)throw new Error("dragCoeff was renamed to dragCoefficient")}t=n(t,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var i=Fo[t.dimensions];if(!i){var o=t.dimensions;i={Body:vd(o,t.debug),createQuadTree:_d(o),createBounds:md(o),createDragForce:yd(o),createSpringForce:bd(o),integrate:wd(o)},Fo[o]=i}var s=i.Body,u=i.createQuadTree,a=i.createBounds,h=i.createDragForce,d=i.createSpringForce,f=i.integrate,y=C=>new s(C),b=gd().random(42),m=[],k=[],$=u(t,b),_=a(m,t,b),E=d(t,b),M=h(t),T=0,z=[],A=new Map,R=0;ee("nbody",$e),ee("spring",I);var D={bodies:m,quadTree:$,springs:k,settings:t,addForce:ee,removeForce:te,getForces:W,step:function(){for(var C=0;C<z.length;++C)z[C](R);var O=f(m,t.timeStep,t.adaptiveTimeStepWeight);return R+=1,O},addBody:function(C){if(!C)throw new Error("Body is required");return m.push(C),C},addBodyAt:function(C){if(!C)throw new Error("Body position is required");var O=y(C);return m.push(O),O},removeBody:function(C){if(C){var O=m.indexOf(C);if(!(O<0))return m.splice(O,1),m.length===0&&_.reset(),!0}},addSpring:function(C,O,re,ye){if(!C||!O)throw new Error("Cannot add null spring to force simulator");typeof re!="number"&&(re=-1);var ke=new e(C,O,re,ye>=0?ye:-1);return k.push(ke),ke},getTotalMovement:function(){return T},removeSpring:function(C){if(C){var O=k.indexOf(C);if(O>-1)return k.splice(O,1),!0}},getBestNewBodyPosition:function(C){return _.getBestNewPosition(C)},getBBox:J,getBoundingBox:J,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(C){return C!==void 0?(t.gravity=C,$.options({gravity:C}),this):t.gravity},theta:function(C){return C!==void 0?(t.theta=C,$.options({theta:C}),this):t.theta},random:b};return $d(t,D),r(D),D;function J(){return _.update(),_.box}function ee(C,O){if(A.has(C))throw new Error("Force "+C+" is already added");A.set(C,O),z.push(O)}function te(C){var O=z.indexOf(A.get(C));O<0||(z.splice(O,1),A.delete(C))}function W(){return A}function $e(){if(m.length!==0){$.insertBodies(m);for(var C=m.length;C--;){var O=m[C];O.isPinned||(O.reset(),$.updateBodyForce(O),M.update(O))}}}function I(){for(var C=k.length;C--;)E.update(k[C])}}function $d(t,e){for(var n in t)kd(t,e,n)}function kd(t,e,n){if(t.hasOwnProperty(n)&&typeof e[n]!="function"){var r=Number.isFinite(t[n]);r?e[n]=function(i){if(i!==void 0){if(!Number.isFinite(i))throw new Error("Value of "+n+" should be a valid number.");return t[n]=i,e}return t[n]}:e[n]=function(i){return i!==void 0?(t[n]=i,e):t[n]}}}mr.exports=Nd,mr.exports.simulator=Oo;var Ed=_r;function Nd(t,e){if(!t)throw new Error("Graph structure cannot be undefined");var n=e&&e.createSimulator||Oo,r=n(e);if(Array.isArray(e))throw new Error("Physics settings is expected to be an object");var i=t.version>19?$e:W;e&&typeof e.nodeMass=="function"&&(i=e.nodeMass);var o=new Map,s={},u=0,a=r.settings.springTransform||Md;M(),$();var h=!1,d={step:function(){if(u===0)return f(!0),!0;var I=r.step();d.lastMove=I,d.fire("step");var C=I/u,O=C<=.01;return f(O),O},getNodePosition:function(I){return te(I).pos},setNodePosition:function(I){var C=te(I);C.setPosition.apply(C,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(I){var C=s[I];if(C)return{from:C.from.pos,to:C.to.pos}},getGraphRect:function(){return r.getBBox()},forEachBody:y,pinNode:function(I,C){var O=te(I.id);O.isPinned=!!C},isNodePinned:function(I){return te(I.id).isPinned},dispose:function(){t.off("changed",E),d.fire("disposed")},getBody:k,getSpring:m,getForceVectorLength:b,simulator:r,graph:t,lastMove:0};return Ed(d),d;function f(I){h!==I&&(h=I,_(I))}function y(I){o.forEach(I)}function b(){var I=0,C=0;return y(function(O){I+=Math.abs(O.force.x),C+=Math.abs(O.force.y)}),Math.sqrt(I*I+C*C)}function m(I,C){var O;if(C===void 0)typeof I!="object"?O=I:O=I.id;else{var re=t.hasLink(I,C);if(!re)return;O=re.id}return s[O]}function k(I){return o.get(I)}function $(){t.on("changed",E)}function _(I){d.fire("stable",I)}function E(I){for(var C=0;C<I.length;++C){var O=I[C];O.changeType==="add"?(O.node&&T(O.node.id),O.link&&A(O.link)):O.changeType==="remove"&&(O.node&&z(O.node),O.link&&R(O.link))}u=t.getNodesCount()}function M(){u=0,t.forEachNode(function(I){T(I.id),u+=1}),t.forEachLink(A)}function T(I){var C=o.get(I);if(!C){var O=t.getNode(I);if(!O)throw new Error("initBody() was called with unknown node id");var re=O.position;if(!re){var ye=D(O);re=r.getBestNewBodyPosition(ye)}C=r.addBodyAt(re),C.id=I,o.set(I,C),J(I),ee(O)&&(C.isPinned=!0)}}function z(I){var C=I.id,O=o.get(C);O&&(o.delete(C),r.removeBody(O))}function A(I){J(I.fromId),J(I.toId);var C=o.get(I.fromId),O=o.get(I.toId),re=r.addSpring(C,O,I.length);a(I,re),s[I.id]=re}function R(I){var C=s[I.id];if(C){var O=t.getNode(I.fromId),re=t.getNode(I.toId);O&&J(O.id),re&&J(re.id),delete s[I.id],r.removeSpring(C)}}function D(I){var C=[];if(!I.links)return C;for(var O=Math.min(I.links.length,2),re=0;re<O;++re){var ye=I.links[re],ke=ye.fromId!==I.id?o.get(ye.fromId):o.get(ye.toId);ke&&ke.pos&&C.push(ke)}return C}function J(I){var C=o.get(I);if(C.mass=i(I),Number.isNaN(C.mass))throw new Error("Node mass should be a number")}function ee(I){return I&&(I.isPinned||I.data&&I.data.isPinned)}function te(I){var C=o.get(I);return C||(T(I),C=o.get(I)),C}function W(I){var C=t.getLinks(I);return C?1+C.length/3:1}function $e(I){var C=t.getLinks(I);return C?1+C.size/3:1}}function Md(){}var Td=mr.exports;const zd=Tn(Td);class Sd{constructor(){this.nodeMapping=new Map,this.edgeMapping=new Map,this._settled=!0,this.ngraph=Wl(),this.ngraphLayout=zd(this.ngraph,{dimensions:3})}async init(){}step(){this._settled=this.ngraphLayout.step()}get isSettled(){return this._settled}addNode(e){const n=this.ngraph.addNode(e.id,{parentNode:e});this.nodeMapping.set(e,n),this._settled=!1}addEdge(e){const n=this.ngraph.addLink(e.srcId,e.dstId,{parentEdge:this});this.edgeMapping.set(e,n),this._settled=!1}getNodePosition(e){const n=this._getMappedNode(e);return this.ngraphLayout.getNodePosition(n.id)}setNodePosition(e,n){const r=this._getMappedNode(e),i=this.ngraphLayout.getNodePosition(r.id);i.x=n.x,i.y=n.y,i.z=n.z}getEdgePosition(e){const n=this._getMappedEdge(e),r=this.ngraphLayout.getLinkPosition(n.id);return{src:{x:r.from.x,y:r.from.y,z:r.from.z},dst:{x:r.to.x,y:r.to.y,z:r.to.z}}}get nodes(){return this.nodeMapping.keys()}get edges(){return this.edgeMapping.keys()}pin(e){const n=this._getMappedNode(e);this.ngraphLayout.pinNode(n,!0)}unpin(e){const n=this._getMappedNode(e);this.ngraphLayout.pinNode(n,!1)}_getMappedNode(e){const n=this.nodeMapping.get(e);if(!n)throw new Error("Internal error: Node not found in NGraphEngine");return n}_getMappedEdge(e){const n=this.edgeMapping.get(e);if(!n)throw new Error("Internal error: Edge not found in NGraphEngine");return n}}class Cd{constructor(e){this.graphStep=new B.PerfCounter,this.nodeUpdate=new B.PerfCounter,this.edgeUpdate=new B.PerfCounter,this.arrowCapUpdate=new B.PerfCounter,this.intersectCalc=new B.PerfCounter,this.loadTime=new B.PerfCounter,this.totalUpdates=0,this.graph=e,this.sceneInstrumentation=new B.SceneInstrumentation(e.scene),this.sceneInstrumentation.captureFrameTime=!0,this.sceneInstrumentation.captureRenderTime=!0,this.sceneInstrumentation.captureInterFrameTime=!0,this.sceneInstrumentation.captureCameraRenderTime=!0,this.sceneInstrumentation.captureActiveMeshesEvaluationTime=!0,this.sceneInstrumentation.captureRenderTargetsRenderTime=!0,this.babylonInstrumentation=new B.EngineInstrumentation(e.engine),this.babylonInstrumentation.captureGPUFrameTime=!0,this.babylonInstrumentation.captureShaderCompilationTime=!0}toString(){let e="";function n(o,s,u=""){e+=`${o}: ${s}${u}
`}function r(o){e+=`
${o}
`;for(let s=0;s<o.length;s++)e+="-";e+=`
`}function i(o,s,u=1){e+=`${o} (min/avg/last sec/max [total]): `,e+=`${(s.min*u).toFixed(2)} / `,e+=`${(s.average*u).toFixed(2)} / `,e+=`${(s.lastSecAverage*u).toFixed(2)} / `,e+=`${(s.max*u).toFixed(2)} `,e+=`[${(s.total*u).toFixed(2)}] ms
`}return r("Graph"),n("Num Nodes",this.numNodes),n("Num Edges",this.numEdges),n("Total Updates",this.totalUpdates),n("Mesh Cache Hits",this.meshCacheHits),n("Mesh Cache Misses",this.meshCacheMisses),n("Number of Node Updates",this.nodeUpdate.count),n("Number of Edge Updates",this.edgeUpdate.count),n("Number of ArrowCap Updates",this.arrowCapUpdate.count),r("Graph Engine Performance"),i("JSON Load Time",this.loadTime),i("Graph Physics Engine Time",this.graphStep),i("Node Update Time",this.nodeUpdate),i("Edge Update Time",this.edgeUpdate),i("Arrow Cap Update Time",this.arrowCapUpdate),i("Ray Intersect Calculation Time",this.intersectCalc),r("BabylonJS Performance"),n("Draw Calls",this.sceneInstrumentation.drawCallsCounter.count),i("GPU Time",this.babylonInstrumentation.gpuFrameTimeCounter,1e-6),i("Shader Time",this.babylonInstrumentation.shaderCompilationTimeCounter),i("Mesh Evaluation Time",this.sceneInstrumentation.activeMeshesEvaluationTimeCounter),i("Render Targets Time",this.sceneInstrumentation.renderTargetsRenderTimeCounter),i("Draw Calls Time",this.sceneInstrumentation.drawCallsCounter),i("Frame Time",this.sceneInstrumentation.frameTimeCounter),i("Render Time",this.sceneInstrumentation.renderTimeCounter),i("Time Between Frames",this.sceneInstrumentation.interFrameTimeCounter),i("Camera Render Time",this.sceneInstrumentation.cameraRenderTimeCounter),e}step(){this.totalUpdates++}reset(){this.totalUpdates=0}get numNodes(){return this.graph.nodeCache.size}get numEdges(){return this.graph.edgeCache.size}get meshCacheHits(){return this.graph.meshCache.hits}get meshCacheMisses(){return this.graph.meshCache.misses}}var Sn={exports:{}};Sn.exports,function(t,e){var n=200,r="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,u="[object Arguments]",a="[object Array]",h="[object AsyncFunction]",d="[object Boolean]",f="[object Date]",y="[object Error]",b="[object Function]",m="[object GeneratorFunction]",k="[object Map]",$="[object Number]",_="[object Null]",E="[object Object]",M="[object Proxy]",T="[object RegExp]",z="[object Set]",A="[object String]",R="[object Undefined]",D="[object WeakMap]",J="[object ArrayBuffer]",ee="[object DataView]",te="[object Float32Array]",W="[object Float64Array]",$e="[object Int8Array]",I="[object Int16Array]",C="[object Int32Array]",O="[object Uint8Array]",re="[object Uint8ClampedArray]",ye="[object Uint16Array]",ke="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,j=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,q={};q[te]=q[W]=q[$e]=q[I]=q[C]=q[O]=q[re]=q[ye]=q[ke]=!0,q[u]=q[a]=q[J]=q[d]=q[ee]=q[f]=q[y]=q[b]=q[k]=q[$]=q[E]=q[T]=q[z]=q[A]=q[D]=!1;var ue=typeof Mn=="object"&&Mn&&Mn.Object===Object&&Mn,ae=typeof self=="object"&&self&&self.Object===Object&&self,pe=ue||ae||Function("return this")(),rt=e&&!e.nodeType&&e,Oe=rt&&!0&&t&&!t.nodeType&&t,je=Oe&&Oe.exports===rt,Ge=je&&ue.process,kt=function(){try{var l=Oe&&Oe.require&&Oe.require("util").types;return l||Ge&&Ge.binding&&Ge.binding("util")}catch{}}(),Yt=kt&&kt.isTypedArray;function Fn(l,v,w){switch(w.length){case 0:return l.call(v);case 1:return l.call(v,w[0]);case 2:return l.call(v,w[0],w[1]);case 3:return l.call(v,w[0],w[1],w[2])}return l.apply(v,w)}function Pr(l,v){for(var w=-1,Z=Array(l);++w<l;)Z[w]=v(w);return Z}function Or(l){return function(v){return l(v)}}function Ln(l,v){return l==null?void 0:l[v]}function Fr(l,v){return function(w){return l(v(w))}}var Xt=Array.prototype,H=Function.prototype,it=Object.prototype,Et=pe["__core-js_shared__"],pt=H.toString,Fe=it.hasOwnProperty,Zn=function(){var l=/[^.]+$/.exec(Et&&Et.keys&&Et.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Bn=it.toString,c=pt.call(Object),p=RegExp("^"+pt.call(Fe).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=je?pe.Buffer:void 0,x=pe.Symbol,S=pe.Uint8Array,L=g?g.allocUnsafe:void 0,V=Fr(Object.getPrototypeOf,Object),Q=Object.create,be=it.propertyIsEnumerable,Le=Xt.splice,oe=x?x.toStringTag:void 0,G=function(){try{var l=Rr(Object,"defineProperty");return l({},"",{}),l}catch{}}(),Ze=g?g.isBuffer:void 0,Rn=Math.max,en=Date.now,tn=Rr(pe,"Map"),ot=Rr(Object,"create"),nn=function(){function l(){}return function(v){if(!He(v))return{};if(Q)return Q(v);l.prototype=v;var w=new l;return l.prototype=void 0,w}}();function _e(l){var v=-1,w=l==null?0:l.length;for(this.clear();++v<w;){var Z=l[v];this.set(Z[0],Z[1])}}function jn(){this.__data__=ot?ot(null):{},this.size=0}function rn(l){var v=this.has(l)&&delete this.__data__[l];return this.size-=v?1:0,v}function Dn(l){var v=this.__data__;if(ot){var w=v[l];return w===r?void 0:w}return Fe.call(v,l)?v[l]:void 0}function on(l){var v=this.__data__;return ot?v[l]!==void 0:Fe.call(v,l)}function sn(l,v){var w=this.__data__;return this.size+=this.has(l)?0:1,w[l]=ot&&v===void 0?r:v,this}_e.prototype.clear=jn,_e.prototype.delete=rn,_e.prototype.get=Dn,_e.prototype.has=on,_e.prototype.set=sn;function Ce(l){var v=-1,w=l==null?0:l.length;for(this.clear();++v<w;){var Z=l[v];this.set(Z[0],Z[1])}}function an(){this.__data__=[],this.size=0}function Un(l){var v=this.__data__,w=Gn(v,l);if(w<0)return!1;var Z=v.length-1;return w==Z?v.pop():Le.call(v,w,1),--this.size,!0}function qn(l){var v=this.__data__,w=Gn(v,l);return w<0?void 0:v[w][1]}function cf(l){return Gn(this.__data__,l)>-1}function hf(l,v){var w=this.__data__,Z=Gn(w,l);return Z<0?(++this.size,w.push([l,v])):w[Z][1]=v,this}Ce.prototype.clear=an,Ce.prototype.delete=Un,Ce.prototype.get=qn,Ce.prototype.has=cf,Ce.prototype.set=hf;function Nt(l){var v=-1,w=l==null?0:l.length;for(this.clear();++v<w;){var Z=l[v];this.set(Z[0],Z[1])}}function lf(){this.size=0,this.__data__={hash:new _e,map:new(tn||Ce),string:new _e}}function df(l){var v=Vn(this,l).delete(l);return this.size-=v?1:0,v}function ff(l){return Vn(this,l).get(l)}function pf(l){return Vn(this,l).has(l)}function gf(l,v){var w=Vn(this,l),Z=w.size;return w.set(l,v),this.size+=w.size==Z?0:1,this}Nt.prototype.clear=lf,Nt.prototype.delete=df,Nt.prototype.get=ff,Nt.prototype.has=pf,Nt.prototype.set=gf;function Mt(l){var v=this.__data__=new Ce(l);this.size=v.size}function vf(){this.__data__=new Ce,this.size=0}function _f(l){var v=this.__data__,w=v.delete(l);return this.size=v.size,w}function mf(l){return this.__data__.get(l)}function yf(l){return this.__data__.has(l)}function bf(l,v){var w=this.__data__;if(w instanceof Ce){var Z=w.__data__;if(!tn||Z.length<n-1)return Z.push([l,v]),this.size=++w.size,this;w=this.__data__=new Nt(Z)}return w.set(l,v),this.size=w.size,this}Mt.prototype.clear=vf,Mt.prototype.delete=_f,Mt.prototype.get=mf,Mt.prototype.has=yf,Mt.prototype.set=bf;function wf(l,v){var w=Ur(l),Z=!w&&Dr(l),Y=!w&&!Z&&fs(l),ne=!w&&!Z&&!Y&&gs(l),he=w||Z||Y||ne,X=he?Pr(l.length,String):[],le=X.length;for(var Pe in l)(v||Fe.call(l,Pe))&&!(he&&(Pe=="length"||Y&&(Pe=="offset"||Pe=="parent")||ne&&(Pe=="buffer"||Pe=="byteLength"||Pe=="byteOffset")||ls(Pe,le)))&&X.push(Pe);return X}function Lr(l,v,w){(w!==void 0&&!Kn(l[v],w)||w===void 0&&!(v in l))&&Zr(l,v,w)}function xf(l,v,w){var Z=l[v];(!(Fe.call(l,v)&&Kn(Z,w))||w===void 0&&!(v in l))&&Zr(l,v,w)}function Gn(l,v){for(var w=l.length;w--;)if(Kn(l[w][0],v))return w;return-1}function Zr(l,v,w){v=="__proto__"&&G?G(l,v,{configurable:!0,enumerable:!0,value:w,writable:!0}):l[v]=w}var $f=Of();function Hn(l){return l==null?l===void 0?R:_:oe&&oe in Object(l)?Ff(l):Df(l)}function us(l){return un(l)&&Hn(l)==u}function kf(l){if(!He(l)||Rf(l))return!1;var v=Gr(l)?p:j;return v.test(Hf(l))}function Ef(l){return un(l)&&ps(l.length)&&!!q[Hn(l)]}function Nf(l){if(!He(l))return jf(l);var v=ds(l),w=[];for(var Z in l)Z=="constructor"&&(v||!Fe.call(l,Z))||w.push(Z);return w}function Br(l,v,w,Z,Y){l!==v&&$f(v,function(ne,he){if(Y||(Y=new Mt),He(ne))Mf(l,v,he,w,Br,Z,Y);else{var X=Z?Z(jr(l,he),ne,he+"",l,v,Y):void 0;X===void 0&&(X=ne),Lr(l,he,X)}},vs)}function Mf(l,v,w,Z,Y,ne,he){var X=jr(l,w),le=jr(v,w),Pe=he.get(le);if(Pe){Lr(l,w,Pe);return}var Ae=ne?ne(X,le,w+"",l,v,he):void 0,cn=Ae===void 0;if(cn){var Hr=Ur(le),Vr=!Hr&&fs(le),ms=!Hr&&!Vr&&gs(le);Ae=le,Hr||Vr||ms?Ur(X)?Ae=X:Vf(X)?Ae=Af(X):Vr?(cn=!1,Ae=zf(le,!0)):ms?(cn=!1,Ae=Cf(le,!0)):Ae=[]:Kf(le)||Dr(le)?(Ae=X,Dr(X)?Ae=Wf(X):(!He(X)||Gr(X))&&(Ae=Lf(le))):cn=!1}cn&&(he.set(le,Ae),Y(Ae,le,Z,ne,he),he.delete(le)),Lr(l,w,Ae)}function cs(l,v){return qf(Uf(l,v,_s),l+"")}var Tf=G?function(l,v){return G(l,"toString",{configurable:!0,enumerable:!1,value:Yf(v),writable:!0})}:_s;function zf(l,v){if(v)return l.slice();var w=l.length,Z=L?L(w):new l.constructor(w);return l.copy(Z),Z}function Sf(l){var v=new l.constructor(l.byteLength);return new S(v).set(new S(l)),v}function Cf(l,v){var w=v?Sf(l.buffer):l.buffer;return new l.constructor(w,l.byteOffset,l.length)}function Af(l,v){var w=-1,Z=l.length;for(v||(v=Array(Z));++w<Z;)v[w]=l[w];return v}function If(l,v,w,Z){var Y=!w;w||(w={});for(var ne=-1,he=v.length;++ne<he;){var X=v[ne],le=Z?Z(w[X],l[X],X,w,l):void 0;le===void 0&&(le=l[X]),Y?Zr(w,X,le):xf(w,X,le)}return w}function Pf(l){return cs(function(v,w){var Z=-1,Y=w.length,ne=Y>1?w[Y-1]:void 0,he=Y>2?w[2]:void 0;for(ne=l.length>3&&typeof ne=="function"?(Y--,ne):void 0,he&&Zf(w[0],w[1],he)&&(ne=Y<3?void 0:ne,Y=1),v=Object(v);++Z<Y;){var X=w[Z];X&&l(v,X,Z,ne)}return v})}function Of(l){return function(v,w,Z){for(var Y=-1,ne=Object(v),he=Z(v),X=he.length;X--;){var le=he[l?X:++Y];if(w(ne[le],le,ne)===!1)break}return v}}function hs(l,v,w,Z,Y,ne){return He(l)&&He(v)&&(ne.set(v,l),Br(l,v,void 0,hs,ne),ne.delete(v)),l}function Vn(l,v){var w=l.__data__;return Bf(v)?w[typeof v=="string"?"string":"hash"]:w.map}function Rr(l,v){var w=Ln(l,v);return kf(w)?w:void 0}function Ff(l){var v=Fe.call(l,oe),w=l[oe];try{l[oe]=void 0;var Z=!0}catch{}var Y=Bn.call(l);return Z&&(v?l[oe]=w:delete l[oe]),Y}function Lf(l){return typeof l.constructor=="function"&&!ds(l)?nn(V(l)):{}}function ls(l,v){var w=typeof l;return v=v??s,!!v&&(w=="number"||w!="symbol"&&K.test(l))&&l>-1&&l%1==0&&l<v}function Zf(l,v,w){if(!He(w))return!1;var Z=typeof v;return(Z=="number"?qr(w)&&ls(v,w.length):Z=="string"&&v in w)?Kn(w[v],l):!1}function Bf(l){var v=typeof l;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?l!=="__proto__":l===null}function Rf(l){return!!Zn&&Zn in l}function ds(l){var v=l&&l.constructor,w=typeof v=="function"&&v.prototype||it;return l===w}function jf(l){var v=[];if(l!=null)for(var w in Object(l))v.push(w);return v}function Df(l){return Bn.call(l)}function Uf(l,v,w){return v=Rn(v===void 0?l.length-1:v,0),function(){for(var Z=arguments,Y=-1,ne=Rn(Z.length-v,0),he=Array(ne);++Y<ne;)he[Y]=Z[v+Y];Y=-1;for(var X=Array(v+1);++Y<v;)X[Y]=Z[Y];return X[v]=w(he),Fn(l,this,X)}}function jr(l,v){if(!(v==="constructor"&&typeof l[v]=="function")&&v!="__proto__")return l[v]}var qf=Gf(Tf);function Gf(l){var v=0,w=0;return function(){var Z=en(),Y=o-(Z-w);if(w=Z,Y>0){if(++v>=i)return arguments[0]}else v=0;return l.apply(void 0,arguments)}}function Hf(l){if(l!=null){try{return pt.call(l)}catch{}try{return l+""}catch{}}return""}function Kn(l,v){return l===v||l!==l&&v!==v}var Dr=us(function(){return arguments}())?us:function(l){return un(l)&&Fe.call(l,"callee")&&!be.call(l,"callee")},Ur=Array.isArray;function qr(l){return l!=null&&ps(l.length)&&!Gr(l)}function Vf(l){return un(l)&&qr(l)}var fs=Ze||Xf;function Gr(l){if(!He(l))return!1;var v=Hn(l);return v==b||v==m||v==h||v==M}function ps(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=s}function He(l){var v=typeof l;return l!=null&&(v=="object"||v=="function")}function un(l){return l!=null&&typeof l=="object"}function Kf(l){if(!un(l)||Hn(l)!=E)return!1;var v=V(l);if(v===null)return!0;var w=Fe.call(v,"constructor")&&v.constructor;return typeof w=="function"&&w instanceof w&&pt.call(w)==c}var gs=Yt?Or(Yt):Ef;function Wf(l){return If(l,vs(l))}var Qf=cs(function(l){return l.push(void 0,hs),Fn(Jf,void 0,l)});function vs(l){return qr(l)?wf(l,!0):Nf(l)}var Jf=Pf(function(l,v,w,Z){Br(l,v,w,Z)});function Yf(l){return function(){return l}}function _s(l){return l}function Xf(){return!1}t.exports=Qf}(Sn,Sn.exports);var Ad=Sn.exports;const Lo=Tn(Ad);var Zo={};(function(t){(function(e){function n(c){return c!==null?Object.prototype.toString.call(c)==="[object Array]":!1}function r(c){return c!==null?Object.prototype.toString.call(c)==="[object Object]":!1}function i(c,p){if(c===p)return!0;var g=Object.prototype.toString.call(c);if(g!==Object.prototype.toString.call(p))return!1;if(n(c)===!0){if(c.length!==p.length)return!1;for(var x=0;x<c.length;x++)if(i(c[x],p[x])===!1)return!1;return!0}if(r(c)===!0){var S={};for(var L in c)if(hasOwnProperty.call(c,L)){if(i(c[L],p[L])===!1)return!1;S[L]=!0}for(var V in p)if(hasOwnProperty.call(p,V)&&S[V]!==!0)return!1;return!0}return!1}function o(c){if(c===""||c===!1||c===null)return!0;if(n(c)&&c.length===0)return!0;if(r(c)){for(var p in c)if(c.hasOwnProperty(p))return!1;return!0}else return!1}function s(c){for(var p=Object.keys(c),g=[],x=0;x<p.length;x++)g.push(c[p[x]]);return g}var u;typeof String.prototype.trimLeft=="function"?u=function(c){return c.trimLeft()}:u=function(c){return c.match(/^\s*(.*)/)[1]};var a=0,h=1,d=2,f=3,y=4,b=5,m=6,k=7,$=8,_=9,E={0:"number",1:"any",2:"string",3:"array",4:"object",5:"boolean",6:"expression",7:"null",8:"Array<number>",9:"Array<string>"},M="EOF",T="UnquotedIdentifier",z="QuotedIdentifier",A="Rbracket",R="Rparen",D="Comma",J="Colon",ee="Rbrace",te="Number",W="Current",$e="Expref",I="Pipe",C="Or",O="And",re="EQ",ye="GT",ke="LT",F="GTE",j="LTE",K="NE",q="Flatten",ue="Star",ae="Filter",pe="Dot",rt="Not",Oe="Lbrace",je="Lbracket",Ge="Lparen",kt="Literal",Yt={".":pe,"*":ue,",":D,":":J,"{":Oe,"}":ee,"]":A,"(":Ge,")":R,"@":W},Fn={"<":!0,">":!0,"=":!0,"!":!0},Pr={" ":!0,"	":!0,"\n":!0};function Or(c){return c>="a"&&c<="z"||c>="A"&&c<="Z"||c==="_"}function Ln(c){return c>="0"&&c<="9"||c==="-"}function Fr(c){return c>="a"&&c<="z"||c>="A"&&c<="Z"||c>="0"&&c<="9"||c==="_"}function Xt(){}Xt.prototype={tokenize:function(c){var p=[];this._current=0;for(var g,x,S;this._current<c.length;)if(Or(c[this._current]))g=this._current,x=this._consumeUnquotedIdentifier(c),p.push({type:T,value:x,start:g});else if(Yt[c[this._current]]!==void 0)p.push({type:Yt[c[this._current]],value:c[this._current],start:this._current}),this._current++;else if(Ln(c[this._current]))S=this._consumeNumber(c),p.push(S);else if(c[this._current]==="[")S=this._consumeLBracket(c),p.push(S);else if(c[this._current]==='"')g=this._current,x=this._consumeQuotedIdentifier(c),p.push({type:z,value:x,start:g});else if(c[this._current]==="'")g=this._current,x=this._consumeRawStringLiteral(c),p.push({type:kt,value:x,start:g});else if(c[this._current]==="`"){g=this._current;var L=this._consumeLiteral(c);p.push({type:kt,value:L,start:g})}else if(Fn[c[this._current]]!==void 0)p.push(this._consumeOperator(c));else if(Pr[c[this._current]]!==void 0)this._current++;else if(c[this._current]==="&")g=this._current,this._current++,c[this._current]==="&"?(this._current++,p.push({type:O,value:"&&",start:g})):p.push({type:$e,value:"&",start:g});else if(c[this._current]==="|")g=this._current,this._current++,c[this._current]==="|"?(this._current++,p.push({type:C,value:"||",start:g})):p.push({type:I,value:"|",start:g});else{var V=new Error("Unknown character:"+c[this._current]);throw V.name="LexerError",V}return p},_consumeUnquotedIdentifier:function(c){var p=this._current;for(this._current++;this._current<c.length&&Fr(c[this._current]);)this._current++;return c.slice(p,this._current)},_consumeQuotedIdentifier:function(c){var p=this._current;this._current++;for(var g=c.length;c[this._current]!=='"'&&this._current<g;){var x=this._current;c[x]==="\\"&&(c[x+1]==="\\"||c[x+1]==='"')?x+=2:x++,this._current=x}return this._current++,JSON.parse(c.slice(p,this._current))},_consumeRawStringLiteral:function(c){var p=this._current;this._current++;for(var g=c.length;c[this._current]!=="'"&&this._current<g;){var x=this._current;c[x]==="\\"&&(c[x+1]==="\\"||c[x+1]==="'")?x+=2:x++,this._current=x}this._current++;var S=c.slice(p+1,this._current-1);return S.replace("\\'","'")},_consumeNumber:function(c){var p=this._current;this._current++;for(var g=c.length;Ln(c[this._current])&&this._current<g;)this._current++;var x=parseInt(c.slice(p,this._current));return{type:te,value:x,start:p}},_consumeLBracket:function(c){var p=this._current;return this._current++,c[this._current]==="?"?(this._current++,{type:ae,value:"[?",start:p}):c[this._current]==="]"?(this._current++,{type:q,value:"[]",start:p}):{type:je,value:"[",start:p}},_consumeOperator:function(c){var p=this._current,g=c[p];if(this._current++,g==="!")return c[this._current]==="="?(this._current++,{type:K,value:"!=",start:p}):{type:rt,value:"!",start:p};if(g==="<")return c[this._current]==="="?(this._current++,{type:j,value:"<=",start:p}):{type:ke,value:"<",start:p};if(g===">")return c[this._current]==="="?(this._current++,{type:F,value:">=",start:p}):{type:ye,value:">",start:p};if(g==="="&&c[this._current]==="=")return this._current++,{type:re,value:"==",start:p}},_consumeLiteral:function(c){this._current++;for(var p=this._current,g=c.length,x;c[this._current]!=="`"&&this._current<g;){var S=this._current;c[S]==="\\"&&(c[S+1]==="\\"||c[S+1]==="`")?S+=2:S++,this._current=S}var L=u(c.slice(p,this._current));return L=L.replace("\\`","`"),this._looksLikeJSON(L)?x=JSON.parse(L):x=JSON.parse('"'+L+'"'),this._current++,x},_looksLikeJSON:function(c){var p='[{"',g=["true","false","null"],x="-0123456789";if(c==="")return!1;if(p.indexOf(c[0])>=0)return!0;if(g.indexOf(c)>=0)return!0;if(x.indexOf(c[0])>=0)try{return JSON.parse(c),!0}catch{return!1}else return!1}};var H={};H[M]=0,H[T]=0,H[z]=0,H[A]=0,H[R]=0,H[D]=0,H[ee]=0,H[te]=0,H[W]=0,H[$e]=0,H[I]=1,H[C]=2,H[O]=3,H[re]=5,H[ye]=5,H[ke]=5,H[F]=5,H[j]=5,H[K]=5,H[q]=9,H[ue]=20,H[ae]=21,H[pe]=40,H[rt]=45,H[Oe]=50,H[je]=55,H[Ge]=60;function it(){}it.prototype={parse:function(c){this._loadTokens(c),this.index=0;var p=this.expression(0);if(this._lookahead(0)!==M){var g=this._lookaheadToken(0),x=new Error("Unexpected token type: "+g.type+", value: "+g.value);throw x.name="ParserError",x}return p},_loadTokens:function(c){var p=new Xt,g=p.tokenize(c);g.push({type:M,value:"",start:c.length}),this.tokens=g},expression:function(c){var p=this._lookaheadToken(0);this._advance();for(var g=this.nud(p),x=this._lookahead(0);c<H[x];)this._advance(),g=this.led(x,g),x=this._lookahead(0);return g},_lookahead:function(c){return this.tokens[this.index+c].type},_lookaheadToken:function(c){return this.tokens[this.index+c]},_advance:function(){this.index++},nud:function(c){var p,g,x;switch(c.type){case kt:return{type:"Literal",value:c.value};case T:return{type:"Field",name:c.value};case z:var S={type:"Field",name:c.value};if(this._lookahead(0)===Ge)throw new Error("Quoted identifier not allowed for function names.");return S;case rt:return g=this.expression(H.Not),{type:"NotExpression",children:[g]};case ue:return p={type:"Identity"},g=null,this._lookahead(0)===A?g={type:"Identity"}:g=this._parseProjectionRHS(H.Star),{type:"ValueProjection",children:[p,g]};case ae:return this.led(c.type,{type:"Identity"});case Oe:return this._parseMultiselectHash();case q:return p={type:q,children:[{type:"Identity"}]},g=this._parseProjectionRHS(H.Flatten),{type:"Projection",children:[p,g]};case je:return this._lookahead(0)===te||this._lookahead(0)===J?(g=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},g)):this._lookahead(0)===ue&&this._lookahead(1)===A?(this._advance(),this._advance(),g=this._parseProjectionRHS(H.Star),{type:"Projection",children:[{type:"Identity"},g]}):this._parseMultiselectList();case W:return{type:W};case $e:return x=this.expression(H.Expref),{type:"ExpressionReference",children:[x]};case Ge:for(var L=[];this._lookahead(0)!==R;)this._lookahead(0)===W?(x={type:W},this._advance()):x=this.expression(0),L.push(x);return this._match(R),L[0];default:this._errorToken(c)}},led:function(c,p){var g;switch(c){case pe:var x=H.Dot;return this._lookahead(0)!==ue?(g=this._parseDotRHS(x),{type:"Subexpression",children:[p,g]}):(this._advance(),g=this._parseProjectionRHS(x),{type:"ValueProjection",children:[p,g]});case I:return g=this.expression(H.Pipe),{type:I,children:[p,g]};case C:return g=this.expression(H.Or),{type:"OrExpression",children:[p,g]};case O:return g=this.expression(H.And),{type:"AndExpression",children:[p,g]};case Ge:for(var S=p.name,L=[],V,Q;this._lookahead(0)!==R;)this._lookahead(0)===W?(V={type:W},this._advance()):V=this.expression(0),this._lookahead(0)===D&&this._match(D),L.push(V);return this._match(R),Q={type:"Function",name:S,children:L},Q;case ae:var be=this.expression(0);return this._match(A),this._lookahead(0)===q?g={type:"Identity"}:g=this._parseProjectionRHS(H.Filter),{type:"FilterProjection",children:[p,g,be]};case q:var Le={type:q,children:[p]},oe=this._parseProjectionRHS(H.Flatten);return{type:"Projection",children:[Le,oe]};case re:case K:case ye:case F:case ke:case j:return this._parseComparator(p,c);case je:var G=this._lookaheadToken(0);return G.type===te||G.type===J?(g=this._parseIndexExpression(),this._projectIfSlice(p,g)):(this._match(ue),this._match(A),g=this._parseProjectionRHS(H.Star),{type:"Projection",children:[p,g]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(c){if(this._lookahead(0)===c)this._advance();else{var p=this._lookaheadToken(0),g=new Error("Expected "+c+", got: "+p.type);throw g.name="ParserError",g}},_errorToken:function(c){var p=new Error("Invalid token ("+c.type+'): "'+c.value+'"');throw p.name="ParserError",p},_parseIndexExpression:function(){if(this._lookahead(0)===J||this._lookahead(1)===J)return this._parseSliceExpression();var c={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match(A),c},_projectIfSlice:function(c,p){var g={type:"IndexExpression",children:[c,p]};return p.type==="Slice"?{type:"Projection",children:[g,this._parseProjectionRHS(H.Star)]}:g},_parseSliceExpression:function(){for(var c=[null,null,null],p=0,g=this._lookahead(0);g!==A&&p<3;){if(g===J)p++,this._advance();else if(g===te)c[p]=this._lookaheadToken(0).value,this._advance();else{var x=this._lookahead(0),S=new Error("Syntax error, unexpected token: "+x.value+"("+x.type+")");throw S.name="Parsererror",S}g=this._lookahead(0)}return this._match(A),{type:"Slice",children:c}},_parseComparator:function(c,p){var g=this.expression(H[p]);return{type:"Comparator",name:p,children:[c,g]}},_parseDotRHS:function(c){var p=this._lookahead(0),g=[T,z,ue];if(g.indexOf(p)>=0)return this.expression(c);if(p===je)return this._match(je),this._parseMultiselectList();if(p===Oe)return this._match(Oe),this._parseMultiselectHash()},_parseProjectionRHS:function(c){var p;if(H[this._lookahead(0)]<10)p={type:"Identity"};else if(this._lookahead(0)===je)p=this.expression(c);else if(this._lookahead(0)===ae)p=this.expression(c);else if(this._lookahead(0)===pe)this._match(pe),p=this._parseDotRHS(c);else{var g=this._lookaheadToken(0),x=new Error("Sytanx error, unexpected token: "+g.value+"("+g.type+")");throw x.name="ParserError",x}return p},_parseMultiselectList:function(){for(var c=[];this._lookahead(0)!==A;){var p=this.expression(0);if(c.push(p),this._lookahead(0)===D&&(this._match(D),this._lookahead(0)===A))throw new Error("Unexpected token Rbracket")}return this._match(A),{type:"MultiSelectList",children:c}},_parseMultiselectHash:function(){for(var c=[],p=[T,z],g,x,S,L;;){if(g=this._lookaheadToken(0),p.indexOf(g.type)<0)throw new Error("Expecting an identifier token, got: "+g.type);if(x=g.value,this._advance(),this._match(J),S=this.expression(0),L={type:"KeyValuePair",name:x,value:S},c.push(L),this._lookahead(0)===D)this._match(D);else if(this._lookahead(0)===ee){this._match(ee);break}}return{type:"MultiSelectHash",children:c}}};function Et(c){this.runtime=c}Et.prototype={search:function(c,p){return this.visit(c,p)},visit:function(c,p){var g,x,S,L,V,Q,be,Le,oe,G;switch(c.type){case"Field":return p!==null&&r(p)?(Q=p[c.name],Q===void 0?null:Q):null;case"Subexpression":for(S=this.visit(c.children[0],p),G=1;G<c.children.length;G++)if(S=this.visit(c.children[1],S),S===null)return null;return S;case"IndexExpression":return be=this.visit(c.children[0],p),Le=this.visit(c.children[1],be),Le;case"Index":if(!n(p))return null;var Ze=c.value;return Ze<0&&(Ze=p.length+Ze),S=p[Ze],S===void 0&&(S=null),S;case"Slice":if(!n(p))return null;var Rn=c.children.slice(0),en=this.computeSliceParams(p.length,Rn),tn=en[0],ot=en[1],nn=en[2];if(S=[],nn>0)for(G=tn;G<ot;G+=nn)S.push(p[G]);else for(G=tn;G>ot;G+=nn)S.push(p[G]);return S;case"Projection":var _e=this.visit(c.children[0],p);if(!n(_e))return null;for(oe=[],G=0;G<_e.length;G++)x=this.visit(c.children[1],_e[G]),x!==null&&oe.push(x);return oe;case"ValueProjection":if(_e=this.visit(c.children[0],p),!r(_e))return null;oe=[];var jn=s(_e);for(G=0;G<jn.length;G++)x=this.visit(c.children[1],jn[G]),x!==null&&oe.push(x);return oe;case"FilterProjection":if(_e=this.visit(c.children[0],p),!n(_e))return null;var rn=[],Dn=[];for(G=0;G<_e.length;G++)g=this.visit(c.children[2],_e[G]),o(g)||rn.push(_e[G]);for(var on=0;on<rn.length;on++)x=this.visit(c.children[1],rn[on]),x!==null&&Dn.push(x);return Dn;case"Comparator":switch(L=this.visit(c.children[0],p),V=this.visit(c.children[1],p),c.name){case re:S=i(L,V);break;case K:S=!i(L,V);break;case ye:S=L>V;break;case F:S=L>=V;break;case ke:S=L<V;break;case j:S=L<=V;break;default:throw new Error("Unknown comparator: "+c.name)}return S;case q:var sn=this.visit(c.children[0],p);if(!n(sn))return null;var Ce=[];for(G=0;G<sn.length;G++)x=sn[G],n(x)?Ce.push.apply(Ce,x):Ce.push(x);return Ce;case"Identity":return p;case"MultiSelectList":if(p===null)return null;for(oe=[],G=0;G<c.children.length;G++)oe.push(this.visit(c.children[G],p));return oe;case"MultiSelectHash":if(p===null)return null;oe={};var an;for(G=0;G<c.children.length;G++)an=c.children[G],oe[an.name]=this.visit(an.value,p);return oe;case"OrExpression":return g=this.visit(c.children[0],p),o(g)&&(g=this.visit(c.children[1],p)),g;case"AndExpression":return L=this.visit(c.children[0],p),o(L)===!0?L:this.visit(c.children[1],p);case"NotExpression":return L=this.visit(c.children[0],p),o(L);case"Literal":return c.value;case I:return be=this.visit(c.children[0],p),this.visit(c.children[1],be);case W:return p;case"Function":var Un=[];for(G=0;G<c.children.length;G++)Un.push(this.visit(c.children[G],p));return this.runtime.callFunction(c.name,Un);case"ExpressionReference":var qn=c.children[0];return qn.jmespathType=$e,qn;default:throw new Error("Unknown node type: "+c.type)}},computeSliceParams:function(c,p){var g=p[0],x=p[1],S=p[2],L=[null,null,null];if(S===null)S=1;else if(S===0){var V=new Error("Invalid slice, step cannot be 0");throw V.name="RuntimeError",V}var Q=S<0;return g===null?g=Q?c-1:0:g=this.capSliceRange(c,g,S),x===null?x=Q?-1:c:x=this.capSliceRange(c,x,S),L[0]=g,L[1]=x,L[2]=S,L},capSliceRange:function(c,p,g){return p<0?(p+=c,p<0&&(p=g<0?-1:0)):p>=c&&(p=g<0?c-1:c),p}};function pt(c){this._interpreter=c,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[a]}]},avg:{_func:this._functionAvg,_signature:[{types:[$]}]},ceil:{_func:this._functionCeil,_signature:[{types:[a]}]},contains:{_func:this._functionContains,_signature:[{types:[d,f]},{types:[h]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[d]},{types:[d]}]},floor:{_func:this._functionFloor,_signature:[{types:[a]}]},length:{_func:this._functionLength,_signature:[{types:[d,f,y]}]},map:{_func:this._functionMap,_signature:[{types:[m]},{types:[f]}]},max:{_func:this._functionMax,_signature:[{types:[$,_]}]},merge:{_func:this._functionMerge,_signature:[{types:[y],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[f]},{types:[m]}]},sum:{_func:this._functionSum,_signature:[{types:[$]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[d]},{types:[d]}]},min:{_func:this._functionMin,_signature:[{types:[$,_]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[f]},{types:[m]}]},type:{_func:this._functionType,_signature:[{types:[h]}]},keys:{_func:this._functionKeys,_signature:[{types:[y]}]},values:{_func:this._functionValues,_signature:[{types:[y]}]},sort:{_func:this._functionSort,_signature:[{types:[_,$]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[f]},{types:[m]}]},join:{_func:this._functionJoin,_signature:[{types:[d]},{types:[_]}]},reverse:{_func:this._functionReverse,_signature:[{types:[d,f]}]},to_array:{_func:this._functionToArray,_signature:[{types:[h]}]},to_string:{_func:this._functionToString,_signature:[{types:[h]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[h]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[h],variadic:!0}]}}}pt.prototype={callFunction:function(c,p){var g=this.functionTable[c];if(g===void 0)throw new Error("Unknown function: "+c+"()");return this._validateArgs(c,p,g._signature),g._func.call(this,p)},_validateArgs:function(c,p,g){var x;if(g[g.length-1].variadic){if(p.length<g.length)throw x=g.length===1?" argument":" arguments",new Error("ArgumentError: "+c+"() takes at least"+g.length+x+" but received "+p.length)}else if(p.length!==g.length)throw x=g.length===1?" argument":" arguments",new Error("ArgumentError: "+c+"() takes "+g.length+x+" but received "+p.length);for(var S,L,V,Q=0;Q<g.length;Q++){V=!1,S=g[Q].types,L=this._getTypeName(p[Q]);for(var be=0;be<S.length;be++)if(this._typeMatches(L,S[be],p[Q])){V=!0;break}if(!V){var Le=S.map(function(oe){return E[oe]}).join(",");throw new Error("TypeError: "+c+"() expected argument "+(Q+1)+" to be type "+Le+" but received type "+E[L]+" instead.")}}},_typeMatches:function(c,p,g){if(p===h)return!0;if(p===_||p===$||p===f){if(p===f)return c===f;if(c===f){var x;p===$?x=a:p===_&&(x=d);for(var S=0;S<g.length;S++)if(!this._typeMatches(this._getTypeName(g[S]),x,g[S]))return!1;return!0}}else return c===p},_getTypeName:function(c){switch(Object.prototype.toString.call(c)){case"[object String]":return d;case"[object Number]":return a;case"[object Array]":return f;case"[object Boolean]":return b;case"[object Null]":return k;case"[object Object]":return c.jmespathType===$e?m:y}},_functionStartsWith:function(c){return c[0].lastIndexOf(c[1])===0},_functionEndsWith:function(c){var p=c[0],g=c[1];return p.indexOf(g,p.length-g.length)!==-1},_functionReverse:function(c){var p=this._getTypeName(c[0]);if(p===d){for(var g=c[0],x="",S=g.length-1;S>=0;S--)x+=g[S];return x}else{var L=c[0].slice(0);return L.reverse(),L}},_functionAbs:function(c){return Math.abs(c[0])},_functionCeil:function(c){return Math.ceil(c[0])},_functionAvg:function(c){for(var p=0,g=c[0],x=0;x<g.length;x++)p+=g[x];return p/g.length},_functionContains:function(c){return c[0].indexOf(c[1])>=0},_functionFloor:function(c){return Math.floor(c[0])},_functionLength:function(c){return r(c[0])?Object.keys(c[0]).length:c[0].length},_functionMap:function(c){for(var p=[],g=this._interpreter,x=c[0],S=c[1],L=0;L<S.length;L++)p.push(g.visit(x,S[L]));return p},_functionMerge:function(c){for(var p={},g=0;g<c.length;g++){var x=c[g];for(var S in x)p[S]=x[S]}return p},_functionMax:function(c){if(c[0].length>0){var p=this._getTypeName(c[0][0]);if(p===a)return Math.max.apply(Math,c[0]);for(var g=c[0],x=g[0],S=1;S<g.length;S++)x.localeCompare(g[S])<0&&(x=g[S]);return x}else return null},_functionMin:function(c){if(c[0].length>0){var p=this._getTypeName(c[0][0]);if(p===a)return Math.min.apply(Math,c[0]);for(var g=c[0],x=g[0],S=1;S<g.length;S++)g[S].localeCompare(x)<0&&(x=g[S]);return x}else return null},_functionSum:function(c){for(var p=0,g=c[0],x=0;x<g.length;x++)p+=g[x];return p},_functionType:function(c){switch(this._getTypeName(c[0])){case a:return"number";case d:return"string";case f:return"array";case y:return"object";case b:return"boolean";case m:return"expref";case k:return"null"}},_functionKeys:function(c){return Object.keys(c[0])},_functionValues:function(c){for(var p=c[0],g=Object.keys(p),x=[],S=0;S<g.length;S++)x.push(p[g[S]]);return x},_functionJoin:function(c){var p=c[0],g=c[1];return g.join(p)},_functionToArray:function(c){return this._getTypeName(c[0])===f?c[0]:[c[0]]},_functionToString:function(c){return this._getTypeName(c[0])===d?c[0]:JSON.stringify(c[0])},_functionToNumber:function(c){var p=this._getTypeName(c[0]),g;return p===a?c[0]:p===d&&(g=+c[0],!isNaN(g))?g:null},_functionNotNull:function(c){for(var p=0;p<c.length;p++)if(this._getTypeName(c[p])!==k)return c[p];return null},_functionSort:function(c){var p=c[0].slice(0);return p.sort(),p},_functionSortBy:function(c){var p=c[0].slice(0);if(p.length===0)return p;var g=this._interpreter,x=c[1],S=this._getTypeName(g.visit(x,p[0]));if([a,d].indexOf(S)<0)throw new Error("TypeError");for(var L=this,V=[],Q=0;Q<p.length;Q++)V.push([Q,p[Q]]);V.sort(function(Le,oe){var G=g.visit(x,Le[1]),Ze=g.visit(x,oe[1]);if(L._getTypeName(G)!==S)throw new Error("TypeError: expected "+S+", received "+L._getTypeName(G));if(L._getTypeName(Ze)!==S)throw new Error("TypeError: expected "+S+", received "+L._getTypeName(Ze));return G>Ze?1:G<Ze?-1:Le[0]-oe[0]});for(var be=0;be<V.length;be++)p[be]=V[be][1];return p},_functionMaxBy:function(c){for(var p=c[1],g=c[0],x=this.createKeyFunction(p,[a,d]),S=-1/0,L,V,Q=0;Q<g.length;Q++)V=x(g[Q]),V>S&&(S=V,L=g[Q]);return L},_functionMinBy:function(c){for(var p=c[1],g=c[0],x=this.createKeyFunction(p,[a,d]),S=1/0,L,V,Q=0;Q<g.length;Q++)V=x(g[Q]),V<S&&(S=V,L=g[Q]);return L},createKeyFunction:function(c,p){var g=this,x=this._interpreter,S=function(L){var V=x.visit(c,L);if(p.indexOf(g._getTypeName(V))<0){var Q="TypeError: expected one of "+p+", received "+g._getTypeName(V);throw new Error(Q)}return V};return S}};function Fe(c){var p=new it,g=p.parse(c);return g}function Zn(c){var p=new Xt;return p.tokenize(c)}function Bn(c,p){var g=new it,x=new pt,S=new Et(x);x._interpreter=S;var L=g.parse(p);return S.search(L,c)}e.tokenize=Zn,e.compile=Fe,e.search=Bn,e.strictDeepEqual=i})(t)})(Zo);const Ye=Tn(Zo),Id=Ot.parse({});class Cn{constructor(e={}){this.layers=[],this.layerSelectedNodes=[],this.layerSelectedEdges=[],this.knownFields=e.knownFields||cr.parse({}),e.layers?this.layers=wh.parse(e.layers):this.layers=[],e.addDefaultStyle&&this.addLayer({node:{selector:"",style:Ot.parse({})},edge:{selector:"",style:Ft.parse({})}})}static fromJson(e){const n=JSON.parse(e);return this.fromObject(n)}static fromObject(e){return new Cn({layers:e})}addNodes(e,n){const r=n||this.knownFields.nodeIdPath,i=Ye.search(e,`[0].${r}`);if(i==null)throw new TypeError("couldn't find node ID in first node data element");for(const o of this.layers){let s=new Set;if(o.node){const a=`[${o.node.selector.length?`?${o.node.selector}`:""}].${r}`,h=Ye.search(e,a);s=new Set(h)}this.layerSelectedNodes.push(s)}}addEdges(e,n,r){const i=n||this.knownFields.edgeSrcIdPath,o=r||this.knownFields.edgeDstIdPath,s=Ye.search(e,`[0].[to_string(${i})]`);if(!s||!Array.isArray(s)||s[0]==="null")throw new TypeError("couldn't find edge source ID in first edge data element");const u=Ye.search(e,`[0].[to_string(${o})]`);if(!u||!Array.isArray(u)||u[0]==="null")throw new TypeError("couldn't find edge destination ID in first edge data element");for(const a of this.layers){let h=new Set;if(a.edge){const f=`[${a.edge.selector.length?`?${a.edge.selector}`:""}].[to_string(${i}), to_string(${o})] | [*].join(',',@)`,y=Ye.search(e,f);h=new Set(y)}this.layerSelectedEdges.push(h)}}addLayer(e){this.layers.push(e)}insertLayer(e,n){this.layers.splice(e,0,n)}getStyleForNode(e){const n=[];for(let i=0;i<this.layers.length;i++){const{node:o}=this.layers[i];this.layerSelectedNodes[i].has(e)&&o&&n.push(o.style)}const r=Lo({},...n,Id);return n.length===0&&(r.enabled=!1),r}getStyleForEdge(e,n){const r=`${e},${n}`,i=[];for(let s=0;s<this.layers.length;s++){const{edge:u}=this.layers[s];this.layerSelectedEdges[s].has(r)&&u&&i.push(u.style)}const o=Lo({},...i,Ft.parse({}));return i.length===0&&(o.enabled=!1),o}}class Bo{constructor(e,n){if(this.edgeCache=new bs,this.nodeCache=new Map,this.running=!0,this.graphObservable=new B.Observable,this.nodeObservable=new B.Observable,this.edgeObservable=new B.Observable,this.config=Nh(n),this.meshCache=new Dl,this.styles=new Cn({addDefaultStyle:!0}),this.config.behavior.fetchNodes&&(this.fetchNodes=this.config.behavior.fetchNodes),this.config.behavior.fetchEdges&&(this.fetchEdges=this.config.behavior.fetchEdges),typeof e=="string"){const r=document.getElementById(e);if(!r)throw new Error(`getElementById() could not find element '${e}'`);this.element=r}else if(e instanceof Element)this.element=e;else throw new TypeError("Graph constructor requires 'element' argument that is either a string specifying the ID of the HTML element or an Element");if(this.element.innerHTML="",this.canvas=document.createElement("canvas"),this.canvas.setAttribute("id",`babylonForceGraphRenderCanvas${Date.now()}`),this.canvas.setAttribute("touch-action","none"),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.touchAction="none",this.element.appendChild(this.canvas),this.engine=new B.Engine(this.canvas,!0),this.scene=new B.Scene(this.engine),this.camera=new B.ArcRotateCamera("camera",-Math.PI/2,Math.PI/2.5,this.config.style.startingCameraDistance,new B.Vector3(0,0,0)),delete this.camera.lowerBetaLimit,delete this.camera.upperBetaLimit,this.camera.attachControl(this.canvas,!0),new B.HemisphericLight("light",new B.Vector3(1,1,0)),this.config.style.skybox&&this.config.style.skybox.length&&new B.PhotoDome("testdome",this.config.style.skybox,{resolution:32,size:1e3},this.scene),this.config.engine.type==="ngraph")this.graphEngine=new Sd;else if(this.config.engine.type==="d3")this.graphEngine=new jl;else throw new TypeError(`Unknown graph engine type: '${this.graphEngineType}'`);this.stats=new Cd(this);for(let r=0;r<this.config.engine.preSteps;r++)this.graphEngine.step()}shutdown(){this.engine.dispose()}async init(){this.engine.runRenderLoop(()=>{this.update(),this.scene.render()}),Pd();const e=[Ro("VR","immersive-vr","local-floor"),Ro("AR","immersive-ar","local-floor")];if(navigator.xr){this.xrHelper=await this.scene.createDefaultXRExperienceAsync({uiOptions:{customButtons:e},disableTeleportation:!0}),this.xrHelper.baseExperience.onInitialXRPoseSetObservable.add(r=>{var i;((i=this.xrHelper)==null?void 0:i.baseExperience.sessionManager.sessionMode)==="immersive-ar"&&r.setTransformationFromNonVRCamera(this.camera)});const n=document.querySelector(".xr-button-overlay");n&&(n.style.cssText="z-index:11;position: absolute; right: 20px;bottom: 50px;")}else{const n=Od(this),r=document.createElement("button");r.classList.add("webxr-button"),r.classList.add("webxr-not-available"),r.innerHTML="VR / AR NOT AVAILABLE",n.appendChild(r),setTimeout(()=>{n.remove()},5e3)}window.addEventListener("resize",()=>{this.engine.resize()})}update(){if(this.running){this.stats.step(),this.stats.graphStep.beginMonitoring();for(let e=0;e<this.config.engine.stepMultiplier;e++)this.graphEngine.step();this.stats.graphStep.endMonitoring(),this.stats.nodeUpdate.beginMonitoring();for(const e of this.graphEngine.nodes)e.update();this.stats.nodeUpdate.endMonitoring(),this.stats.edgeUpdate.beginMonitoring(),Be.updateRays(this);for(const e of this.graphEngine.edges)e.update();this.stats.edgeUpdate.endMonitoring(),this.graphEngine.isSettled&&(this.graphObservable.notifyObservers({type:"graph-settled",graph:this}),this.running=!1)}}addNode(e,n){return this.addNodes([e],n)}addNodes(e,n){const r=n||this.config.knownFields.nodeIdPath;this.styles.addNodes(e);for(const i of e){const o=i,s=Ye.search(i,r);this.nodeObservable.notifyObservers({type:"node-add-before",nodeId:s,metadata:o});const u=this.styles.getStyleForNode(s);Wn.create(this,s,u,{pinOnDrag:this.pinOnDrag,metadata:o})}}addEdge(e,n,r){this.addEdges([e],n,r)}addEdges(e,n,r){const i=n||this.config.knownFields.edgeSrcIdPath,o=r||this.config.knownFields.edgeDstIdPath;this.styles.addEdges(e);for(const s of e){const u=s,a=Ye.search(s,i),h=Ye.search(s,o);this.edgeObservable.notifyObservers({type:"edge-add-before",srcNodeId:a,dstNodeId:h,metadata:u});const d=this.styles.getStyleForEdge(a,h);Be.create(this,a,h,d,{metadata:u})}}addListener(e,n){switch(e){case"graph-settled":this.graphObservable.add(r=>{r.type===e&&n(r)});break;case"node-add-before":this.nodeObservable.add(r=>{r.type===e&&n(r)});break;case"edge-add-before":this.edgeObservable.add(r=>{r.type===e&&n(r)});break;default:throw new TypeError(`Unknown listener type in addListener: ${e}`)}}async loadJsonData(e,n){this.stats.loadTime.beginMonitoring();const{nodeListProp:r,edgeListProp:i,nodeIdProp:o,edgeSrcIdProp:s,edgeDstIdProp:u,fetchOpts:a}=kh(n),d=await(await fetch(e,a)).json();if(!Array.isArray(d[r]))throw TypeError(`when fetching JSON data: '${r}' was not an Array`);if(!Array.isArray(d[i]))throw TypeError(`when fetching JSON data: '${i}' was not an Array`);for(const f of d[r]){const y=f[o],b=f;this.addNode(y,b)}for(const f of d[i]){const y=f[s],b=f[u],m=f;this.addEdge(y,b,m)}this.stats.loadTime.endMonitoring()}}function Ro(t,e,n){e=e||"immersive-vr",n=n||"local-floor";const r=document.createElement("button");r.classList.add("webxr-button"),r.classList.add("webxr-available"),r.innerHTML=t;const i=new B.WebXREnterExitUIButton(r,e,n);return i.update=function(o){o===null?(r.style.display="",r.classList.remove("webxr-presenting")):o===i?(r.style.display="",r.classList.add("webxr-presenting")):r.style.display="none"},i}function Pd(){const t=`
    .webxr-button {
        font-family: 'Verdana', sans-serif;
        font-size: 1em;
        font-weight: bold;
        color: white;
        border: 2px solid white;
        padding: 4px 16px 4px 16px;
        margin-left: 10px;
        border-radius: 8px;
    }

    .webxr-available {
        background: black;
        box-shadow:0 0 0 0px white, 0 0 0 2px black;
    }

    .webxr-presenting {
        background: red;
    }

    .webxr-presenting::before {
        content: "EXIT ";
    }

    .webxr-not-available {
        background: grey;
        box-shadow:0 0 0 0px white, 0 0 0 2px grey;
    }

    .webxr-available:hover {
        transform: scale(1.05);
    } 

    .webxr-available:active {
        background-color: rgba(51,51,51,1);
    } 
    
    .webxr-available:focus {
        background-color: rgba(51,51,51,1);
    }
    
    canvas {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        outline: none;
        -webkit-tap-highlight-color: rgba(255, 255, 255, 0); /* mobile webkit */
    }`,e=document.createElement("style");e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(e)}function Od(t){const e=document.createElement("div");e.classList.add("xr-button-overlay"),e.style.cssText="z-index:11;position: absolute; right: 20px;bottom: 50px;";const n=t.scene.getEngine().getInputElement();return n&&n.parentNode&&n.parentNode.appendChild(e),e}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Fd=t=>(e,n)=>{n!==void 0?n.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const An=globalThis,Nr=An.ShadowRoot&&(An.ShadyCSS===void 0||An.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,jo=Symbol(),Do=new WeakMap;let Ld=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==jo)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(Nr&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=Do.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&Do.set(n,e))}return e}toString(){return this.cssText}};const Zd=t=>new Ld(typeof t=="string"?t:t+"",void 0,jo),Bd=(t,e)=>{if(Nr)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),i=An.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)}},Uo=Nr?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Zd(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Rd,defineProperty:jd,getOwnPropertyDescriptor:Dd,getOwnPropertyNames:Ud,getOwnPropertySymbols:qd,getPrototypeOf:Gd}=Object,Xe=globalThis,qo=Xe.trustedTypes,Hd=qo?qo.emptyScript:"",Mr=Xe.reactiveElementPolyfillSupport,qt=(t,e)=>t,In={toAttribute(t,e){switch(e){case Boolean:t=t?Hd:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},Tr=(t,e)=>!Rd(t,e),Go={attribute:!0,type:String,converter:In,reflect:!1,useDefault:!1,hasChanged:Tr};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Xe.litPropertyMetadata??(Xe.litPropertyMetadata=new WeakMap);class bt extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=Go){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(e,r,n);i!==void 0&&jd(this.prototype,e,i)}}static getPropertyDescriptor(e,n,r){const{get:i,set:o}=Dd(this.prototype,e)??{get(){return this[n]},set(s){this[n]=s}};return{get:i,set(s){const u=i==null?void 0:i.call(this);o==null||o.call(this,s),this.requestUpdate(e,u,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Go}static _$Ei(){if(this.hasOwnProperty(qt("elementProperties")))return;const e=Gd(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(qt("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(qt("properties"))){const n=this.properties,r=[...Ud(n),...qd(n)];for(const i of r)this.createProperty(i,n[i])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,i]of n)this.elementProperties.set(r,i)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const i=this._$Eu(n,r);i!==void 0&&this._$Eh.set(i,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)n.unshift(Uo(i))}else e!==void 0&&n.push(Uo(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Bd(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var o;const r=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,r);if(i!==void 0&&r.reflect===!0){const s=(((o=r.converter)==null?void 0:o.toAttribute)!==void 0?r.converter:In).toAttribute(n,r.type);this._$Em=e,s==null?this.removeAttribute(i):this.setAttribute(i,s),this._$Em=null}}_$AK(e,n){var o,s;const r=this.constructor,i=r._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const u=r.getPropertyOptions(i),a=typeof u.converter=="function"?{fromAttribute:u.converter}:((o=u.converter)==null?void 0:o.fromAttribute)!==void 0?u.converter:In;this._$Em=i,this[i]=a.fromAttribute(n,u.type)??((s=this._$Ej)==null?void 0:s.get(i))??null,this._$Em=null}}requestUpdate(e,n,r){var i;if(e!==void 0){const o=this.constructor,s=this[e];if(r??(r=o.getPropertyOptions(e)),!((r.hasChanged??Tr)(s,n)||r.useDefault&&r.reflect&&s===((i=this._$Ej)==null?void 0:i.get(e))&&!this.hasAttribute(o._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:i,wrapped:o},s){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,s??n??this[e]),o!==!0||s!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),i===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[o,s]of this._$Ep)this[o]=s;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[o,s]of i){const{wrapped:u}=s,a=this[o];u!==!0||this._$AL.has(o)||a===void 0||this.C(o,void 0,s,a)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(i=>{var o;return(o=i.hostUpdate)==null?void 0:o.call(i)}),this.update(n)):this._$EM()}catch(i){throw e=!1,this._$EM(),i}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var i;return(i=r.hostUpdated)==null?void 0:i.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}}bt.elementStyles=[],bt.shadowRootOptions={mode:"open"},bt[qt("elementProperties")]=new Map,bt[qt("finalized")]=new Map,Mr==null||Mr({ReactiveElement:bt}),(Xe.reactiveElementVersions??(Xe.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Vd={attribute:!0,type:String,converter:In,reflect:!1,hasChanged:Tr},Kd=(t=Vd,e,n)=>{const{kind:r,metadata:i}=n;let o=globalThis.litPropertyMetadata.get(i);if(o===void 0&&globalThis.litPropertyMetadata.set(i,o=new Map),r==="setter"&&((t=Object.create(t)).wrapped=!0),o.set(n.name,t),r==="accessor"){const{name:s}=n;return{set(u){const a=e.get.call(this);e.set.call(this,u),this.requestUpdate(s,a,t)},init(u){return u!==void 0&&this.C(s,void 0,t,u),u}}}if(r==="setter"){const{name:s}=n;return function(u){const a=this[s];e.call(this,u),this.requestUpdate(s,a,t)}}throw Error("Unsupported decorator location: "+r)};function Ho(t){return(e,n)=>typeof n=="object"?Kd(t,e,n):((r,i,o)=>{const s=i.hasOwnProperty(o);return i.constructor.createProperty(o,r),s?Object.getOwnPropertyDescriptor(i,o):void 0})(t,e,n)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Gt=globalThis,Pn=Gt.trustedTypes,Vo=Pn?Pn.createPolicy("lit-html",{createHTML:t=>t}):void 0,Ko="$lit$",et=`lit$${Math.random().toFixed(9).slice(2)}$`,Wo="?"+et,Wd=`<${Wo}>`,ht=document,Ht=()=>ht.createComment(""),Vt=t=>t===null||typeof t!="object"&&typeof t!="function",zr=Array.isArray,Qd=t=>zr(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Sr=`[ 	
\f\r]`,Kt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Qo=/-->/g,Jo=/>/g,lt=RegExp(`>|${Sr}(?:([^\\s"'>=/]+)(${Sr}*=${Sr}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Yo=/'/g,Xo=/"/g,es=/^(?:script|style|textarea|title)$/i,wt=Symbol.for("lit-noChange"),me=Symbol.for("lit-nothing"),ts=new WeakMap,dt=ht.createTreeWalker(ht,129);function ns(t,e){if(!zr(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Vo!==void 0?Vo.createHTML(e):e}const Jd=(t,e)=>{const n=t.length-1,r=[];let i,o=e===2?"<svg>":e===3?"<math>":"",s=Kt;for(let u=0;u<n;u++){const a=t[u];let h,d,f=-1,y=0;for(;y<a.length&&(s.lastIndex=y,d=s.exec(a),d!==null);)y=s.lastIndex,s===Kt?d[1]==="!--"?s=Qo:d[1]!==void 0?s=Jo:d[2]!==void 0?(es.test(d[2])&&(i=RegExp("</"+d[2],"g")),s=lt):d[3]!==void 0&&(s=lt):s===lt?d[0]===">"?(s=i??Kt,f=-1):d[1]===void 0?f=-2:(f=s.lastIndex-d[2].length,h=d[1],s=d[3]===void 0?lt:d[3]==='"'?Xo:Yo):s===Xo||s===Yo?s=lt:s===Qo||s===Jo?s=Kt:(s=lt,i=void 0);const b=s===lt&&t[u+1].startsWith("/>")?" ":"";o+=s===Kt?a+Wd:f>=0?(r.push(h),a.slice(0,f)+Ko+a.slice(f)+et+b):a+et+(f===-2?u:b)}return[ns(t,o+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class Wt{constructor({strings:e,_$litType$:n},r){let i;this.parts=[];let o=0,s=0;const u=e.length-1,a=this.parts,[h,d]=Jd(e,n);if(this.el=Wt.createElement(h,r),dt.currentNode=this.el.content,n===2||n===3){const f=this.el.content.firstChild;f.replaceWith(...f.childNodes)}for(;(i=dt.nextNode())!==null&&a.length<u;){if(i.nodeType===1){if(i.hasAttributes())for(const f of i.getAttributeNames())if(f.endsWith(Ko)){const y=d[s++],b=i.getAttribute(f).split(et),m=/([.?@])?(.*)/.exec(y);a.push({type:1,index:o,name:m[2],strings:b,ctor:m[1]==="."?Xd:m[1]==="?"?ef:m[1]==="@"?tf:On}),i.removeAttribute(f)}else f.startsWith(et)&&(a.push({type:6,index:o}),i.removeAttribute(f));if(es.test(i.tagName)){const f=i.textContent.split(et),y=f.length-1;if(y>0){i.textContent=Pn?Pn.emptyScript:"";for(let b=0;b<y;b++)i.append(f[b],Ht()),dt.nextNode(),a.push({type:2,index:++o});i.append(f[y],Ht())}}}else if(i.nodeType===8)if(i.data===Wo)a.push({type:2,index:o});else{let f=-1;for(;(f=i.data.indexOf(et,f+1))!==-1;)a.push({type:7,index:o}),f+=et.length-1}o++}}static createElement(e,n){const r=ht.createElement("template");return r.innerHTML=e,r}}function xt(t,e,n=t,r){var s,u;if(e===wt)return e;let i=r!==void 0?(s=n._$Co)==null?void 0:s[r]:n._$Cl;const o=Vt(e)?void 0:e._$litDirective$;return(i==null?void 0:i.constructor)!==o&&((u=i==null?void 0:i._$AO)==null||u.call(i,!1),o===void 0?i=void 0:(i=new o(t),i._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=i:n._$Cl=i),i!==void 0&&(e=xt(t,i._$AS(t,e.values),i,r)),e}class Yd{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,i=((e==null?void 0:e.creationScope)??ht).importNode(n,!0);dt.currentNode=i;let o=dt.nextNode(),s=0,u=0,a=r[0];for(;a!==void 0;){if(s===a.index){let h;a.type===2?h=new Qt(o,o.nextSibling,this,e):a.type===1?h=new a.ctor(o,a.name,a.strings,this,e):a.type===6&&(h=new nf(o,this,e)),this._$AV.push(h),a=r[++u]}s!==(a==null?void 0:a.index)&&(o=dt.nextNode(),s++)}return dt.currentNode=ht,i}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Qt{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,i){this.type=2,this._$AH=me,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=i,this._$Cv=(i==null?void 0:i.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=xt(this,e,n),Vt(e)?e===me||e==null||e===""?(this._$AH!==me&&this._$AR(),this._$AH=me):e!==this._$AH&&e!==wt&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Qd(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==me&&Vt(this._$AH)?this._$AA.nextSibling.data=e:this.T(ht.createTextNode(e)),this._$AH=e}$(e){var o;const{values:n,_$litType$:r}=e,i=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Wt.createElement(ns(r.h,r.h[0]),this.options)),r);if(((o=this._$AH)==null?void 0:o._$AD)===i)this._$AH.p(n);else{const s=new Yd(i,this),u=s.u(this.options);s.p(n),this.T(u),this._$AH=s}}_$AC(e){let n=ts.get(e.strings);return n===void 0&&ts.set(e.strings,n=new Wt(e)),n}k(e){zr(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const o of e)i===n.length?n.push(r=new Qt(this.O(Ht()),this.O(Ht()),this,this.options)):r=n[i],r._$AI(o),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class On{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,i,o){this.type=1,this._$AH=me,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=o,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=me}_$AI(e,n=this,r,i){const o=this.strings;let s=!1;if(o===void 0)e=xt(this,e,n,0),s=!Vt(e)||e!==this._$AH&&e!==wt,s&&(this._$AH=e);else{const u=e;let a,h;for(e=o[0],a=0;a<o.length-1;a++)h=xt(this,u[r+a],n,a),h===wt&&(h=this._$AH[a]),s||(s=!Vt(h)||h!==this._$AH[a]),h===me?e=me:e!==me&&(e+=(h??"")+o[a+1]),this._$AH[a]=h}s&&!i&&this.j(e)}j(e){e===me?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Xd extends On{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===me?void 0:e}}class ef extends On{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==me)}}class tf extends On{constructor(e,n,r,i,o){super(e,n,r,i,o),this.type=5}_$AI(e,n=this){if((e=xt(this,e,n,0)??me)===wt)return;const r=this._$AH,i=e===me&&r!==me||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,o=e!==me&&(r===me||i);i&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class nf{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){xt(this,e)}}const Cr=Gt.litHtmlPolyfillSupport;Cr==null||Cr(Wt,Qt),(Gt.litHtmlVersions??(Gt.litHtmlVersions=[])).push("3.3.0");const rf=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let i=r._$litPart$;if(i===void 0){const o=(n==null?void 0:n.renderBefore)??null;r._$litPart$=i=new Qt(e.insertBefore(Ht(),o),o,void 0,n??{})}return i._$AI(t),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ft=globalThis;class Jt extends bt{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=rf(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return wt}}Jt._$litElement$=!0,Jt.finalized=!0,(as=ft.litElementHydrateSupport)==null||as.call(ft,{LitElement:Jt});const Ar=ft.litElementPolyfillSupport;Ar==null||Ar({LitElement:Jt}),(ft.litElementVersions??(ft.litElementVersions=[])).push("4.2.0");var of=Object.defineProperty,sf=Object.getOwnPropertyDescriptor,Ir=(t,e,n,r)=>{for(var i=r>1?void 0:r?sf(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&of(e,n,i),i},rs=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},tt=(t,e,n)=>(rs(t,e,"read from private field"),n?n.call(t):e.get(t)),is=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},os=(t,e,n,r)=>(rs(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),nt,$t;we.Graphty=class extends Jt{constructor(){super(),is(this,nt,void 0),is(this,$t,void 0),this.thing=!0,this.thing3=42,os(this,$t,document.createElement("div")),os(this,nt,new Bo(tt(this,$t))),tt(this,nt).addNodes([{id:0},{id:1},{id:2},{id:3},{id:4},{id:5}]),tt(this,nt).addEdges([{src:0,dst:1},{src:0,dst:2},{src:2,dst:3},{src:3,dst:0},{src:3,dst:4},{src:3,dst:5}]),tt(this,nt).init().then(()=>{tt(this,nt).engine.resize(!0)}).catch(e=>{throw e})}connectedCallback(){super.connectedCallback(),this.renderRoot.appendChild(tt(this,$t))}render(){return tt(this,$t)}disconnectedCallback(){var e;(e=tt(this,nt))==null||e.shutdown()}},nt=new WeakMap,$t=new WeakMap,Ir([Ho()],we.Graphty.prototype,"thing",2),Ir([Ho()],we.Graphty.prototype,"thing3",2),we.Graphty=Ir([Fd("graphty-core")],we.Graphty);const ss=new Map([["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aqua","#00ffff"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["black","#000000"],["blanchedalmond","#ffebcd"],["blue","#0000ff"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["fuchsia","#ff00ff"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["gold","#ffd700"],["goldenrod","#daa520"],["gray","#808080"],["green","#008000"],["greenyellow","#adff2f"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred ","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavender","#e6e6fa"],["lavenderblush","#fff0f5"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgrey","#d3d3d3"],["lightgreen","#90ee90"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["lime","#00ff00"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["maroon","#800000"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370d8"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["navy","#000080"],["oldlace","#fdf5e6"],["olive","#808000"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#d87093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#ff0000"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["silver","#c0c0c0"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["teal","#008080"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["white","#ffffff"],["whitesmoke","#f5f5f5"],["yellow","#ffff00"],["yellowgreen","#9acd32"]]);function af(t){const e=ss.get(t);return e||t}const uf=Object.freeze(Object.defineProperty({__proto__:null,colorMap:ss,colorNameToHex:af},Symbol.toStringTag,{value:"Module"}));we.Edge=Be,we.Graph=Bo,we.Node=Wn,we.Styles=Cn,we.util=uf,Object.defineProperty(we,Symbol.toStringTag,{value:"Module"})});
