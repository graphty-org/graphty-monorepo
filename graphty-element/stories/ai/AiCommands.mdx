{/* THIS FILE IS AUTO GENERATED: DO NOT EDIT THIS FILE. INSTEAD EDIT design/ai-interface-design.md or src/ai/commands/*.ts */}

import { Meta } from '@storybook/addon-docs';

<Meta title="AI/Command Reference" />

# AI Command Reference

This document describes all available AI commands for controlling the graph visualization using natural language.

## Overview

The AI interface allows users to control graph visualization through natural language commands.
When you speak or type a command, it is processed by an LLM (Language Model) which interprets
your intent and executes the appropriate graph operations.

## Command Categories

Commands are organized into the following categories:

| Category | Commands | Description |
|----------|----------|-------------|
| **Query** | `queryGraph`, `findNodes` | Get information about the graph structure |
| **Layout** | `setLayout`, `setDimension` | Change graph layout and 2D/3D mode |
| **Style** | `findAndStyleNodes`, `findAndStyleEdges`, `clearStyles` | Apply visual styles to nodes and edges |
| **Camera** | `setCameraPosition`, `zoomToNodes` | Control the camera view |
| **Mode** | `setImmersiveMode` | Enter VR/AR immersive modes |
| **Algorithm** | `runAlgorithm`, `listAlgorithms` | Run graph analysis algorithms |
| **Capture** | `captureScreenshot`, `captureVideo` | Capture images or video of the graph |

---

## Query Commands

### queryGraph

Query information about the graph structure and statistics.

**Parameters:**
- `query`: Type of information to query
  - `"nodeCount"` - Get the number of nodes
  - `"edgeCount"` - Get the number of edges
  - `"currentLayout"` - Get the current layout algorithm
  - `"summary"` or `"all"` - Get complete graph statistics

**Example phrases:**
- "How many nodes are there?"
- "How many edges?"
- "What layout is being used?"
- "Give me a summary of the graph"

---

### findNodes

Find nodes in the graph matching specific criteria.

**Parameters:**
- `selector`: JMESPath expression to match nodes (e.g., `'data.type == "server"'`)
- `limit` (optional): Maximum number of results to return

**Example phrases:**
- "Find all server nodes"
- "Find nodes with high degree"
- "Get first 10 nodes"

---

## Layout Commands

### setLayout

Change the graph layout algorithm.

**Parameters:**
- `type`: Layout algorithm name
- `options` (optional): Layout-specific configuration

**Available layouts:**
- `circular` - Nodes arranged in a circle
- `ngraph` - Force-directed physics simulation
- `d3` - D3 force simulation
- `random` - Random placement
- `spiral` - Spiral arrangement
- `shell` - Concentric circles
- `spring` - Spring-based layout
- `planar` - Planar graph layout
- `spectral` - Spectral layout
- `forceatlas2` - ForceAtlas2 algorithm

**Example phrases:**
- "Use circular layout"
- "Switch to force-directed layout"
- "Arrange nodes in a spiral"
- "Use D3 force layout"

---

### setDimension

Switch between 2D and 3D visualization modes.

**Parameters:**
- `dimension`: Either `"2d"` or `"3d"`

**Example phrases:**
- "Switch to 2D view"
- "Show in 3D"
- "Make it flat"
- "Enable 3D mode"

---

## Style Commands

### findAndStyleNodes

Find nodes matching a selector and apply visual styles.

**Parameters:**
- `selector`: JMESPath expression to match nodes (empty string matches all)
- `style`: Style properties to apply
  - `color` - Node color (e.g., `"#ff0000"`, `"red"`)
  - `size` - Node size multiplier
  - `shape` - Shape type (`"sphere"`, `"box"`, `"cylinder"`)
  - `glowColor` - Glow effect color
  - `glowStrength` - Glow effect intensity
  - `outlineColor` - Outline color
  - `outlineWidth` - Outline thickness
  - `enabled` - Visibility toggle
- `layerName` (optional): Name for this style layer for later removal

**Example phrases:**
- "Make all nodes red"
- "Highlight server nodes in blue"
- "Make nodes larger"
- "Change nodes to boxes"

---

### findAndStyleEdges

Find edges matching a selector and apply visual styles.

**Parameters:**
- `selector`: JMESPath expression to match edges (empty string matches all)
- `style`: Style properties to apply
  - `color` - Edge line color
  - `width` - Line width
  - `lineType` - Line pattern (`"solid"`, `"dash"`, `"dot"`)
  - `arrowColor` - Arrow head color
  - `arrowSize` - Arrow head size
  - `enabled` - Visibility toggle
- `layerName` (optional): Name for this style layer

**Example phrases:**
- "Make all edges green"
- "Highlight heavy edges in red"
- "Make edges dashed"

---

### clearStyles

Remove styles added by AI commands.

**Parameters:**
- `layerName` (optional): Specific layer to clear, or clear all if omitted

**Example phrases:**
- "Clear all styling"
- "Remove red node styling"
- "Reset the colors"

---

## Camera Commands

### setCameraPosition

Set the camera position using presets or specific coordinates.

**Parameters:**
- `preset` (optional): Named camera preset
  - `"fitToGraph"` - Fit all nodes in view
  - `"topView"` - Look down from above
  - `"sideView"` - View from the side
  - `"frontView"` - View from the front
  - `"isometric"` - Isometric perspective
- `position` (optional): Custom camera position `{x, y, z}`
- `target` (optional): Point to look at `{x, y, z}`
- `animate` (optional): Enable smooth transition (default: true)

**Example phrases:**
- "Show from top"
- "View from the side"
- "Isometric view"
- "Fit all nodes in view"

---

### zoomToNodes

Zoom the camera to fit specific nodes in view.

**Parameters:**
- `selector` (optional): JMESPath expression to match nodes
- `animate` (optional): Enable smooth transition (default: true)
- `padding` (optional): Extra padding around nodes (default: 1.2)

**Example phrases:**
- "Zoom to fit all nodes"
- "Zoom to server nodes"
- "Fit graph with more padding"

---

## Mode Commands

### setImmersiveMode

Enter or exit VR/AR immersive modes using WebXR.

**Parameters:**
- `mode`: The immersive mode to enter
  - `"vr"` - Virtual Reality (requires VR headset)
  - `"ar"` - Augmented Reality (requires AR-capable device)
  - `"exit"` - Return to normal desktop view

**Example phrases:**
- "Enter VR mode"
- "Switch to AR"
- "Exit immersive mode"
- "Go back to normal view"

---

## Algorithm Commands

### runAlgorithm

Run a graph analysis algorithm on the current graph.

**Parameters:**
- `namespace`: Algorithm namespace (e.g., `"graphty"`)
- `type`: Algorithm type (e.g., `"degree"`, `"pagerank"`)

**Example phrases:**
- "Calculate the degree of each node"
- "Run pagerank algorithm"
- "Compute centrality metrics"

---

### listAlgorithms

List available graph algorithms.

**Parameters:**
- `namespace` (optional): Filter by namespace

**Example phrases:**
- "What algorithms are available?"
- "List graphty algorithms"
- "Show me the available analysis tools"

---

## Capture Commands

### captureScreenshot

Capture a screenshot of the current graph visualization.

**Parameters:**
- `format` (optional): Image format (`"png"` or `"jpeg"`, default: `"png"`)
- `width` (optional): Screenshot width in pixels
- `height` (optional): Screenshot height in pixels
- `quality` (optional): JPEG quality 0-1 (default: 0.92)
- `download` (optional): Trigger a download (default: false)

**Example phrases:**
- "Take a screenshot"
- "Capture the graph as PNG"
- "Download screenshot"
- "High resolution screenshot"

---

### captureVideo

Start or stop video recording of the graph.

**Parameters:**
- `action`: `"start"` or `"stop"`
- `duration` (optional): Auto-stop after N seconds
- `format` (optional): Video format (`"webm"` or `"mp4"`)

**Example phrases:**
- "Start recording"
- "Stop recording"
- "Record for 5 seconds"

---

## Selector Syntax

Many commands use JMESPath-like selectors to target specific nodes or edges.

### Basic Selectors

| Selector | Description |
|----------|-------------|
| `""` or `"*"` | Match all items |
| `data.type == 'server'` | Match by exact property value |
| `data.weight > 0.5` | Match by comparison |
| `data.label contains 'important'` | Match by substring |

### Examples

```javascript
// Match all server nodes
"data.type == 'server'"

// Match nodes with degree > 5
"data.degree > 5"

// Match all edges (empty selector)
""
```

---

## Best Practices

1. **Be specific**: Instead of "change the color", say "make all nodes red"
2. **Use natural language**: The AI understands intent, not just commands
3. **Combine commands**: "Make server nodes blue and zoom to fit them"
4. **Name your styles**: Use `layerName` so you can remove specific styles later
5. **Use presets for camera**: Presets like "top view" work better than coordinates

---

## Troubleshooting

### Command not recognized
- Try rephrasing using simpler language
- Check if the feature you want is in the available commands
- Make sure you're connected to an LLM provider

### Style not applying
- Check your selector syntax
- Use `queryGraph` to verify nodes/edges exist
- Try clearing styles first with `clearStyles`

### Camera not moving
- Ensure animation is enabled (default)
- Check if you're in 2D mode (some presets only work in 3D)
- Try `fitToGraph` first to ensure nodes are visible
